(()=>{var t={264:(t,e,n)=>{"use strict";e.su=function(t,e){let n=t.map((t=>{let n=[];for(let i=0;i<t.length;i+=2)n.push({X:(e[0]*t[i]+e[2]*t[i+1]+e[4])*o,Y:(e[1]*t[i]+e[3]*t[i+1]+e[5])*o});return n}));return function(t){for(let e of t)if(e.length>=4&&e[0]==e[e.length-2]&&e[1]==e[e.length-1])return!0;return!1}(t)&&(n=i.default.Clipper.CleanPolygons(n,100),n=i.default.Clipper.SimplifyPolygons(n,i.default.PolyFillType.pftEvenOdd)),n},e.G0=function(t,e){return s(t,e,i.default.ClipType.ctUnion)},e.dl=function(t,e){return s(t,e,i.default.ClipType.ctXor)};var i=r(n(192));r(n(962));function r(t){return t&&t.__esModule?t:{default:t}}const o=5e7;function s(t,e,n){var r=new i.default.Clipper;r.AddPaths(t,i.default.PolyType.ptSubject,!0),r.AddPaths(e,i.default.PolyType.ptClip,!0);var o=[];return r.Execute(n,o,i.default.PolyFillType.pftEvenOdd,i.default.PolyFillType.pftEvenOdd),o}},192:(t,e,n)=>{var i,r;!function(){"use strict";var o,s={version:"6.4.2.2",use_lines:!0,use_xyz:!1},l=!1;if(t.exports?(t.exports=s,l=!0):(void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r),"undefined"!=typeof document?window.ClipperLib=s:self.ClipperLib=s),l)a="chrome",o="Netscape";else{var a=navigator.userAgent.toString().toLowerCase();o=navigator.appName}var u,p={};function h(t,e,n){s.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function f(){return new h(null,void 0,void 0)}-1!=a.indexOf("chrome")&&-1==a.indexOf("chromium")?p.chrome=1:p.chrome=0,-1!=a.indexOf("chromium")?p.chromium=1:p.chromium=0,-1!=a.indexOf("safari")&&-1==a.indexOf("chrome")&&-1==a.indexOf("chromium")?p.safari=1:p.safari=0,-1!=a.indexOf("firefox")?p.firefox=1:p.firefox=0,-1!=a.indexOf("firefox/17")?p.firefox17=1:p.firefox17=0,-1!=a.indexOf("firefox/15")?p.firefox15=1:p.firefox15=0,-1!=a.indexOf("firefox/3")?p.firefox3=1:p.firefox3=0,-1!=a.indexOf("opera")?p.opera=1:p.opera=0,-1!=a.indexOf("msie 10")?p.msie10=1:p.msie10=0,-1!=a.indexOf("msie 9")?p.msie9=1:p.msie9=0,-1!=a.indexOf("msie 8")?p.msie8=1:p.msie8=0,-1!=a.indexOf("msie 7")?p.msie7=1:p.msie7=0,-1!=a.indexOf("msie ")?p.msie=1:p.msie=0,s.biginteger_used=null,"Microsoft Internet Explorer"==o?(h.prototype.am=function(t,e,n,i,r,o){for(var s=32767&e,l=e>>15;--o>=0;){var a=32767&this[t],u=this[t++]>>15,p=l*a+u*s;r=((a=s*a+((32767&p)<<15)+n[i]+(1073741823&r))>>>30)+(p>>>15)+l*u+(r>>>30),n[i++]=1073741823&a}return r},u=30):"Netscape"!=o?(h.prototype.am=function(t,e,n,i,r,o){for(;--o>=0;){var s=e*this[t++]+n[i]+r;r=Math.floor(s/67108864),n[i++]=67108863&s}return r},u=26):(h.prototype.am=function(t,e,n,i,r,o){for(var s=16383&e,l=e>>14;--o>=0;){var a=16383&this[t],u=this[t++]>>14,p=l*a+u*s;r=((a=s*a+((16383&p)<<14)+n[i]+r)>>28)+(p>>14)+l*u,n[i++]=268435455&a}return r},u=28),h.prototype.DB=u,h.prototype.DM=(1<<u)-1,h.prototype.DV=1<<u,h.prototype.FV=Math.pow(2,52),h.prototype.F1=52-u,h.prototype.F2=2*u-52;var d,c,y=new Array;for(d="0".charCodeAt(0),c=0;c<=9;++c)y[d++]=c;for(d="a".charCodeAt(0),c=10;c<36;++c)y[d++]=c;for(d="A".charCodeAt(0),c=10;c<36;++c)y[d++]=c;function m(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function v(t,e){var n=y[t.charCodeAt(e)];return null==n?-1:n}function g(t){var e=f();return e.fromInt(t),e}function P(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function x(t){this.m=t}function C(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function _(t,e){return t&e}function I(t,e){return t|e}function E(t,e){return t^e}function b(t,e){return t&~e}function T(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function L(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function S(){}function N(t){return t}function A(t){this.r2=f(),this.q3=f(),h.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}x.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},x.prototype.revert=function(t){return t},x.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},x.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},C.prototype.convert=function(t){var e=f();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(h.ZERO)>0&&this.m.subTo(e,e),e},C.prototype.revert=function(t){var e=f();return t.copyTo(e),this.reduce(e),e},C.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},C.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},C.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},h.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},h.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},h.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,r=!1,o=0;--i>=0;){var s=8==n?255&t[i]:v(t,i);s<0?"-"==t.charAt(i)&&(r=!0):(r=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&h.ZERO.subTo(this,this)},h.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},h.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},h.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},h.prototype.lShiftTo=function(t,e){var n,i=t%this.DB,r=this.DB-i,o=(1<<r)-1,s=Math.floor(t/this.DB),l=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>r|l,l=(this[n]&o)<<i;for(n=s-1;n>=0;--n)e[n]=0;e[s]=l,e.t=this.t+s+1,e.s=this.s,e.clamp()},h.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var i=t%this.DB,r=this.DB-i,o=(1<<i)-1;e[0]=this[n]>>i;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<r,e[s-n]=this[s]>>i;i>0&&(e[this.t-n-1]|=(this.s&o)<<r),e.t=this.t-n,e.clamp()}},h.prototype.subTo=function(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()},h.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&h.ZERO.subTo(e,e)},h.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},h.prototype.divRemTo=function(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=f());var o=f(),s=this.s,l=t.s,a=this.DB-P(i[i.t-1]);a>0?(i.lShiftTo(a,o),r.lShiftTo(a,n)):(i.copyTo(o),r.copyTo(n));var u=o.t,p=o[u-1];if(0!=p){var d=p*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),c=this.FV/d,y=(1<<this.F1)/d,m=1<<this.F2,v=n.t,g=v-u,x=null==e?f():e;for(o.dlShiftTo(g,x),n.compareTo(x)>=0&&(n[n.t++]=1,n.subTo(x,n)),h.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--g>=0;){var C=n[--v]==p?this.DM:Math.floor(n[v]*c+(n[v-1]+m)*y);if((n[v]+=o.am(0,C,n,g,0,u))<C)for(o.dlShiftTo(g,x),n.subTo(x,n);n[v]<--C;)n.subTo(x,n)}null!=e&&(n.drShiftTo(u,e),s!=l&&h.ZERO.subTo(e,e)),n.t=u,n.clamp(),a>0&&n.rShiftTo(a,n),s<0&&h.ZERO.subTo(n,n)}}},h.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},h.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},h.prototype.exp=function(t,e){if(t>4294967295||t<1)return h.ONE;var n=f(),i=f(),r=e.convert(this),o=P(t)-1;for(r.copyTo(n);--o>=0;)if(e.sqrTo(n,i),(t&1<<o)>0)e.mulTo(i,r,n);else{var s=n;n=i,i=s}return e.revert(n)},h.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,i=(1<<e)-1,r=!1,o="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this[s]>>l)>0&&(r=!0,o=m(n));s>=0;)l<e?(n=(this[s]&(1<<l)-1)<<e-l,n|=this[--s]>>(l+=this.DB-e)):(n=this[s]>>(l-=e)&i,l<=0&&(l+=this.DB,--s)),n>0&&(r=!0),r&&(o+=m(n));return r?o:"0"},h.prototype.negate=function(){var t=f();return h.ZERO.subTo(this,t),t},h.prototype.abs=function(){return this.s<0?this.negate():this},h.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},h.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+P(this[this.t-1]^this.s&this.DM)},h.prototype.mod=function(t){var e=f();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(h.ZERO)>0&&t.subTo(e,e),e},h.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new x(e):new C(e),this.exp(t,n)},h.ZERO=g(0),h.ONE=g(1),S.prototype.convert=N,S.prototype.revert=N,S.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},S.prototype.sqrTo=function(t,e){t.squareTo(e)},A.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=f();return t.copyTo(e),this.reduce(e),e},A.prototype.revert=function(t){return t},A.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},A.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},A.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var F=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],w=(1<<26)/F[F.length-1];h.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},h.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=g(n),r=f(),o=f(),s="";for(this.divRemTo(i,r,o);r.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,r.divRemTo(i,r,o);return o.intValue().toString(t)+s},h.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),r=!1,o=0,s=0,l=0;l<t.length;++l){var a=v(t,l);a<0?"-"==t.charAt(l)&&0==this.signum()&&(r=!0):(s=e*s+a,++o>=n&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),r&&h.ZERO.subTo(this,this)},h.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(h.ONE.shiftLeft(t-1),I,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(h.ONE.shiftLeft(t-1),this);else{var i=new Array,r=7&t;i.length=1+(t>>3),e.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}},h.prototype.bitwiseTo=function(t,e,n){var i,r,o=Math.min(t.t,this.t);for(i=0;i<o;++i)n[i]=e(this[i],t[i]);if(t.t<this.t){for(r=t.s&this.DM,i=o;i<this.t;++i)n[i]=e(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<t.t;++i)n[i]=e(r,t[i]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},h.prototype.changeBit=function(t,e){var n=h.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},h.prototype.addTo=function(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[n++]=i:i<-1&&(e[n++]=this.DV+i),e.t=n,e.clamp()},h.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},h.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},h.prototype.multiplyLowerTo=function(t,e,n){var i,r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()},h.prototype.multiplyUpperTo=function(t,e,n){--e;var i=n.t=this.t+t.t-e;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)n[this.t+i-e]=this.am(e-i,t[i],n,0,0,this.t+i-e);n.clamp(),n.drShiftTo(1,n)},h.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var i=this.t-1;i>=0;--i)n=(e*n+this[i])%t;return n},h.prototype.millerRabin=function(t){var e=this.subtract(h.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var i=e.shiftRight(n);(t=t+1>>1)>F.length&&(t=F.length);for(var r=f(),o=0;o<t;++o){r.fromInt(F[Math.floor(Math.random()*F.length)]);var s=r.modPow(i,this);if(0!=s.compareTo(h.ONE)&&0!=s.compareTo(e)){for(var l=1;l++<n&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(h.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0},h.prototype.clone=function(){var t=f();return this.copyTo(t),t},h.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},h.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},h.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},h.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},h.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,i=this.DB-t*this.DB%8,r=0;if(t-- >0)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[r++]=n|this.s<<this.DB-i);t>=0;)i<8?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(e[r++]=n);return e},h.prototype.equals=function(t){return 0==this.compareTo(t)},h.prototype.min=function(t){return this.compareTo(t)<0?this:t},h.prototype.max=function(t){return this.compareTo(t)>0?this:t},h.prototype.and=function(t){var e=f();return this.bitwiseTo(t,_,e),e},h.prototype.or=function(t){var e=f();return this.bitwiseTo(t,I,e),e},h.prototype.xor=function(t){var e=f();return this.bitwiseTo(t,E,e),e},h.prototype.andNot=function(t){var e=f();return this.bitwiseTo(t,b,e),e},h.prototype.not=function(){for(var t=f(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},h.prototype.shiftLeft=function(t){var e=f();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},h.prototype.shiftRight=function(t){var e=f();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},h.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+T(this[t]);return this.s<0?this.t*this.DB:-1},h.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=L(this[n]^e);return t},h.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},h.prototype.setBit=function(t){return this.changeBit(t,I)},h.prototype.clearBit=function(t){return this.changeBit(t,b)},h.prototype.flipBit=function(t){return this.changeBit(t,E)},h.prototype.add=function(t){var e=f();return this.addTo(t,e),e},h.prototype.subtract=function(t){var e=f();return this.subTo(t,e),e},h.prototype.multiply=function(t){var e=f();return this.multiplyTo(t,e),e},h.prototype.divide=function(t){var e=f();return this.divRemTo(t,e,null),e},h.prototype.remainder=function(t){var e=f();return this.divRemTo(t,null,e),e},h.prototype.divideAndRemainder=function(t){var e=f(),n=f();return this.divRemTo(t,e,n),new Array(e,n)},h.prototype.modPow=function(t,e){var n,i,r=t.bitLength(),o=g(1);if(r<=0)return o;n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=r<8?new x(e):e.isEven()?new A(e):new C(e);var s=new Array,l=3,a=n-1,u=(1<<n)-1;if(s[1]=i.convert(this),n>1){var p=f();for(i.sqrTo(s[1],p);l<=u;)s[l]=f(),i.mulTo(p,s[l-2],s[l]),l+=2}var h,d,c=t.t-1,y=!0,m=f();for(r=P(t[c])-1;c>=0;){for(r>=a?h=t[c]>>r-a&u:(h=(t[c]&(1<<r+1)-1)<<a-r,c>0&&(h|=t[c-1]>>this.DB+r-a)),l=n;0==(1&h);)h>>=1,--l;if((r-=l)<0&&(r+=this.DB,--c),y)s[h].copyTo(o),y=!1;else{for(;l>1;)i.sqrTo(o,m),i.sqrTo(m,o),l-=2;l>0?i.sqrTo(o,m):(d=o,o=m,m=d),i.mulTo(m,s[h],o)}for(;c>=0&&0==(t[c]&1<<r);)i.sqrTo(o,m),d=o,o=m,m=d,--r<0&&(r=this.DB-1,--c)}return i.revert(o)},h.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return h.ZERO;for(var n=t.clone(),i=this.clone(),r=g(1),o=g(0),s=g(0),l=g(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(r.isEven()&&o.isEven()||(r.addTo(this,r),o.subTo(t,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(i)>=0?(n.subTo(i,n),e&&r.subTo(s,r),o.subTo(l,o)):(i.subTo(n,i),e&&s.subTo(r,s),l.subTo(o,l))}return 0!=i.compareTo(h.ONE)?h.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l},h.prototype.pow=function(t){return this.exp(t,new S)},h.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var i=e;e=n,n=i}var r=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(r<o&&(o=r),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},h.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=F[F.length-1]){for(e=0;e<F.length;++e)if(n[0]==F[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<F.length;){for(var i=F[e],r=e+1;r<F.length&&i<w;)i*=F[r++];for(i=n.modInt(i);e<r;)if(i%F[e++]==0)return!1}return n.millerRabin(t)},h.prototype.square=function(){var t=f();return this.squareTo(t),t};var B=h;B.prototype.IsNegative=function(){return-1==this.compareTo(B.ZERO)},B.op_Equality=function(t,e){return 0==t.compareTo(e)},B.op_Inequality=function(t,e){return 0!=t.compareTo(e)},B.op_GreaterThan=function(t,e){return t.compareTo(e)>0},B.op_LessThan=function(t,e){return t.compareTo(e)<0},B.op_Addition=function(t,e){return new B(t,void 0,void 0).add(new B(e,void 0,void 0))},B.op_Subtraction=function(t,e){return new B(t,void 0,void 0).subtract(new B(e,void 0,void 0))},B.Int128Mul=function(t,e){return new B(t,void 0,void 0).multiply(new B(e,void 0,void 0))},B.op_Division=function(t,e){return t.divide(e)},B.prototype.ToDouble=function(){return parseFloat(this.toString())};var O=function(t,e){var n;if(void 0===Object.getOwnPropertyNames){for(n in e.prototype)void 0!==t.prototype[n]&&t.prototype[n]!==Object.prototype[n]||(t.prototype[n]=e.prototype[n]);for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}else{for(var i=Object.getOwnPropertyNames(e.prototype),r=0;r<i.length;r++)void 0===Object.getOwnPropertyDescriptor(t.prototype,i[r])&&Object.defineProperty(t.prototype,i[r],Object.getOwnPropertyDescriptor(e.prototype,i[r]));for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1===t.length?(this.X=t[0].X,this.Y=t[0].Y):2===t.length&&(this.X=t[0],this.Y=t[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(t,e){this.X=t,this.Y=e},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},O(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(t){return Math.abs(t)},s.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},p.msie||p.opera||p.safari?s.Cast_Int32=function(t){return 0|t}:s.Cast_Int32=function(t){return~~t},void 0===Number.toInteger&&(Number.toInteger=null),p.chrome?s.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:p.firefox&&"function"==typeof Number.toInteger?s.Cast_Int64=function(t){return Number.toInteger(t)}:p.msie7||p.msie8?s.Cast_Int64=function(t){return parseInt(t,10)}:p.msie?s.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:s.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},s.Clear=function(t){t.length=0},s.PI=3.141592653589793,s.PI2=6.283185307179586,s.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,3===e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2===e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1===e)if(t[0]instanceof s.DoublePoint){var n=t[0];this.X=s.Clipper.Round(n.X),this.Y=s.Clipper.Round(n.Y),this.Z=0}else void 0===(i=t[0]).Z&&(i.Z=0),this.X=i.X,this.Y=i.Y,this.Z=i.Z;else this.X=0,this.Y=0,this.Z=0;else if(2===e)this.X=t[0],this.Y=t[1];else if(1===e)if(t[0]instanceof s.DoublePoint)n=t[0],this.X=s.Clipper.Round(n.X),this.Y=s.Clipper.Round(n.Y);else{var i=t[0];this.X=i.X,this.Y=i.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(t,e){return t.X===e.X&&t.Y===e.Y},s.IntPoint.op_Inequality=function(t,e){return t.X!==e.X||t.Y!==e.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,s.use_xyz&&(void 0===t.Z?this.Z=0:this.Z=t.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(t){this.X=s.Clipper.Round(t.X),this.Y=s.Clipper.Round(t.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(t,e,n){this.X=t,this.Y=e,s.use_xyz&&(this.Z=void 0===n?0:n)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var t=arguments,e=t.length;if(4===e)this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3];else if(1===e){var n=t[0];this.left=n.left,this.top=n.top,this.right=n.right,this.bottom=n.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(t,e,n,i){this.left=t,this.top=e,this.right=n,this.bottom=i},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(t,e){var n=e.Pt.Y-t.Pt.Y;return n>0?1:n<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(t){return t>-s.ClipperBase.tolerance&&t<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},s.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(s.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!==e);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,i){return i?t.X===e.X&&t.Y===e.Y||t.X===n.X&&t.Y===n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&B.op_Equality(B.Int128Mul(t.X-e.X,n.Y-e.Y),B.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X===e.X&&t.Y===e.Y||t.X===n.X&&t.Y===n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},s.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var i=e;;){if(this.PointOnLineSegment(t,i.Pt,i.Next.Pt,n))return!0;if((i=i.Next)===e)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var t,e,n,i,r,o,l=arguments,a=l.length;return 3===a?(t=l[0],e=l[1],l[2]?B.op_Equality(B.Int128Mul(t.Delta.Y,e.Delta.X),B.Int128Mul(t.Delta.X,e.Delta.Y)):s.Cast_Int64(t.Delta.Y*e.Delta.X)===s.Cast_Int64(t.Delta.X*e.Delta.Y)):4===a?(n=l[0],i=l[1],r=l[2],l[3]?B.op_Equality(B.Int128Mul(n.Y-i.Y,i.X-r.X),B.Int128Mul(n.X-i.X,i.Y-r.Y)):s.Cast_Int64((n.Y-i.Y)*(i.X-r.X))-s.Cast_Int64((n.X-i.X)*(i.Y-r.Y))==0):(n=l[0],i=l[1],r=l[2],o=l[3],l[4]?B.op_Equality(B.Int128Mul(n.Y-i.Y,r.X-o.X),B.Int128Mul(n.X-i.X,r.Y-o.Y)):s.Cast_Int64((n.Y-i.Y)*(r.X-o.X))-s.Cast_Int64((n.X-i.X)*(r.Y-o.Y))==0)},s.ClipperBase.SlopesEqual3=function(t,e,n){return n?B.op_Equality(B.Int128Mul(t.Delta.Y,e.Delta.X),B.Int128Mul(t.Delta.X,e.Delta.Y)):s.Cast_Int64(t.Delta.Y*e.Delta.X)===s.Cast_Int64(t.Delta.X*e.Delta.Y)},s.ClipperBase.SlopesEqual4=function(t,e,n,i){return i?B.op_Equality(B.Int128Mul(t.Y-e.Y,e.X-n.X),B.Int128Mul(t.X-e.X,e.Y-n.Y)):s.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-s.Cast_Int64((t.X-e.X)*(e.Y-n.Y))==0},s.ClipperBase.SlopesEqual5=function(t,e,n,i,r){return r?B.op_Equality(B.Int128Mul(t.Y-e.Y,n.X-i.X),B.Int128Mul(t.X-e.X,n.Y-i.Y)):s.Cast_Int64((t.Y-e.Y)*(n.X-i.X))-s.Cast_Int64((t.X-e.X)*(n.Y-i.Y))==0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var n=0,i=this.m_edges[t].length;n<i;++n)this.m_edges[t][n]=null;s.Clear(this.m_edges[t])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>s.ClipperBase.hiRange||t.Y>s.ClipperBase.hiRange||-t.X>s.ClipperBase.hiRange||-t.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(t.X>s.ClipperBase.loRange||t.Y>s.ClipperBase.loRange||-t.X>s.ClipperBase.loRange||-t.Y>s.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},s.ClipperBase.prototype.InitEdge=function(t,e,n,i){t.Next=e,t.Prev=n,t.Curr.X=i.X,t.Curr.Y=i.Y,s.use_xyz&&(t.Curr.Z=i.Z),t.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,s.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,s.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,s.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,s.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},s.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;s.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||s.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==s.ClipperBase.horizontal&&t.Prev.Dx!==s.ClipperBase.horizontal)break;for(;t.Prev.Dx===s.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx===s.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},s.ClipperBase.prototype.ProcessBound=function(t,e){var n,i,r=t;if(r.OutIdx===s.ClipperBase.Skip){if(t=r,e){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==r&&t.Dx===s.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==r&&t.Dx===s.ClipperBase.horizontal;)t=t.Next}if(t===r)r=e?t.Next:t.Prev;else{t=e?r.Next:r.Prev;var o=new s.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,t.WindDelta=0,r=this.ProcessBound(t,e),this.InsertLocalMinima(o)}return r}if(t.Dx===s.ClipperBase.horizontal&&((n=e?t.Prev:t.Next).Dx===s.ClipperBase.horizontal?n.Bot.X!==t.Bot.X&&n.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):n.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),n=t,e){for(;r.Top.Y===r.Next.Bot.Y&&r.Next.OutIdx!==s.ClipperBase.Skip;)r=r.Next;if(r.Dx===s.ClipperBase.horizontal&&r.Next.OutIdx!==s.ClipperBase.Skip){for(i=r;i.Prev.Dx===s.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X>r.Next.Top.X&&(r=i.Prev)}for(;t!==r;)t.NextInLML=t.Next,t.Dx===s.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===s.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),r=r.Next}else{for(;r.Top.Y===r.Prev.Bot.Y&&r.Prev.OutIdx!==s.ClipperBase.Skip;)r=r.Prev;if(r.Dx===s.ClipperBase.horizontal&&r.Prev.OutIdx!==s.ClipperBase.Skip){for(i=r;i.Next.Dx===s.ClipperBase.horizontal;)i=i.Next;(i.Next.Top.X===r.Prev.Top.X||i.Next.Top.X>r.Prev.Top.X)&&(r=i.Next)}for(;t!==r;)t.NextInLML=t.Prev,t.Dx===s.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===s.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),r=r.Prev}return r},s.ClipperBase.prototype.AddPath=function(t,e,n){s.use_lines?n||e!==s.PolyType.ptClip||s.Error("AddPath: Open paths must be subject."):n||s.Error("AddPath: Open paths have been disabled.");var i=t.length-1;if(n)for(;i>0&&s.IntPoint.op_Equality(t[i],t[0]);)--i;for(;i>0&&s.IntPoint.op_Equality(t[i],t[i-1]);)--i;if(n&&i<2||!n&&i<1)return!1;for(var r=new Array,o=0;o<=i;o++)r.push(new s.TEdge);var l=!0;r[1].Curr.X=t[1].X,r[1].Curr.Y=t[1].Y,s.use_xyz&&(r[1].Curr.Z=t[1].Z);var a={Value:this.m_UseFullRange};for(this.RangeTest(t[0],a),this.m_UseFullRange=a.Value,a.Value=this.m_UseFullRange,this.RangeTest(t[i],a),this.m_UseFullRange=a.Value,this.InitEdge(r[0],r[1],r[i],t[0]),this.InitEdge(r[i],r[0],r[i-1],t[i]),o=i-1;o>=1;--o)a.Value=this.m_UseFullRange,this.RangeTest(t[o],a),this.m_UseFullRange=a.Value,this.InitEdge(r[o],r[o+1],r[o-1],t[o]);for(var u,p=r[0],h=p,f=p;;)if(h.Curr!==h.Next.Curr||!n&&h.Next===p){if(h.Prev===h.Next)break;if(!n||!s.ClipperBase.SlopesEqual4(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if((h=h.Next)===f||!n&&h.Next===p)break}else h===p&&(p=h.Next),f=h=(h=this.RemoveEdge(h)).Prev}else{if(h===h.Next)break;h===p&&(p=h.Next),f=h=this.RemoveEdge(h)}if(!n&&h===h.Next||n&&h.Prev===h.Next)return!1;n||(this.m_HasOpenPaths=!0,p.Prev.OutIdx=s.ClipperBase.Skip),h=p;do{this.InitEdge2(h,e),h=h.Next,l&&h.Curr.Y!==p.Curr.Y&&(l=!1)}while(h!==p);if(l){if(n)return!1;for(h.Prev.OutIdx=s.ClipperBase.Skip,(c=new s.LocalMinima).Next=null,c.Y=h.Bot.Y,c.LeftBound=null,c.RightBound=h,c.RightBound.Side=s.EdgeSide.esRight,c.RightBound.WindDelta=0;h.Bot.X!==h.Prev.Top.X&&this.ReverseHorizontal(h),h.Next.OutIdx!==s.ClipperBase.Skip;)h.NextInLML=h.Next,h=h.Next;return this.InsertLocalMinima(c),this.m_edges.push(r),!0}this.m_edges.push(r);var d=null;for(s.IntPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);(h=this.FindNextLocMin(h))!==d;){var c;null===d&&(d=h),(c=new s.LocalMinima).Next=null,c.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(c.LeftBound=h.Prev,c.RightBound=h,u=!1):(c.LeftBound=h,c.RightBound=h.Prev,u=!0),c.LeftBound.Side=s.EdgeSide.esLeft,c.RightBound.Side=s.EdgeSide.esRight,n?c.LeftBound.Next===c.RightBound?c.LeftBound.WindDelta=-1:c.LeftBound.WindDelta=1:c.LeftBound.WindDelta=0,c.RightBound.WindDelta=-c.LeftBound.WindDelta,(h=this.ProcessBound(c.LeftBound,u)).OutIdx===s.ClipperBase.Skip&&(h=this.ProcessBound(h,u));var y=this.ProcessBound(c.RightBound,!u);y.OutIdx===s.ClipperBase.Skip&&(y=this.ProcessBound(y,!u)),c.LeftBound.OutIdx===s.ClipperBase.Skip?c.LeftBound=null:c.RightBound.OutIdx===s.ClipperBase.Skip&&(c.RightBound=null),this.InsertLocalMinima(c),u||(h=y)}return!0},s.ClipperBase.prototype.AddPaths=function(t,e,n){for(var i=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,n)&&(i=!0);return i},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return!(s.IntPoint.op_Equality(t,n)||s.IntPoint.op_Equality(t,e)||s.IntPoint.op_Equality(n,e))&&(t.X!==n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y)},s.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},s.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=s.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},s.ClipperBase.prototype.PopLocalMinima=function(t,e){return e.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===t&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},s.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,s.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;){this.InsertScanbeam(t.Y);var e=t.LeftBound;null!==e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,s.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=s.ClipperBase.Unassigned),null!==(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,s.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=s.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new s.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var n=this.m_Scanbeam;null!==n.Next&&t<=n.Next.Y;)n=n.Next;if(t===n.Y)return;var i=new s.Scanbeam;i.Y=t,i.Next=n.Next,n.Next=i}},s.ClipperBase.prototype.PopScanbeam=function(t){return null===this.m_Scanbeam?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},s.ClipperBase.prototype.CreateOutRec=function(){var t=new s.OutRec;return t.Idx=s.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},s.ClipperBase.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&s.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=n,s.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},s.ClipperBase.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!==t.PrevInAEL&&e.NextInAEL!==e.PrevInAEL){if(t.NextInAEL===e){var n=e.NextInAEL;null!==n&&(n.PrevInAEL=t);var i=t.PrevInAEL;null!==i&&(i.NextInAEL=e),e.PrevInAEL=i,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else if(e.NextInAEL===t){var r=t.NextInAEL;null!==r&&(r.PrevInAEL=e);var o=e.PrevInAEL;null!==o&&(o.NextInAEL=t),t.PrevInAEL=o,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=r}else{var s=t.NextInAEL,l=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=s,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=l,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},s.ClipperBase.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;null===e&&null===n&&t!==this.m_ActiveEdges||(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},s.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(t){var e=new s.Maxima;if(e.X=t,null===this.m_Maxima)this.m_Maxima=e,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)e.Next=this.m_Maxima,e.Prev=null,this.m_Maxima=e;else{for(var n=this.m_Maxima;null!==n.Next&&t>=n.Next.X;)n=n.Next;if(t===n.X)return;e.Next=n.Next,e.Prev=n,null!==n.Next&&(n.Next.Prev=e),n.Next=e}},s.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof s.PolyTree;if(4===e&&!n){var i=t[0],r=t[1],o=t[2],l=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=l,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{(u=this.ExecuteInternal())&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(4===e&&n){i=t[0];var a=t[1];if(o=t[2],l=t[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=l,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{var u;(u=this.ExecuteInternal())&&this.BuildResult2(a)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}return 2!==e||n?2===e&&n?(i=t[0],a=t[1],this.Execute(i,a,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)):void 0:(i=t[0],r=t[1],this.Execute(i,r,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd))},s.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole===t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole===t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var t,e,n,i={},r={};if(!this.PopScanbeam(i))return!1;for(this.InsertLocalMinimaIntoAEL(i.v);this.PopScanbeam(r)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(r.v))return!1;this.ProcessEdgesAtTopOfScanbeam(r.v),i.v=r.v,this.InsertLocalMinimaIntoAEL(i.v)}for(e=0,n=this.m_PolyOuts.length;e<n;e++)null===(t=this.m_PolyOuts[e]).Pts||t.IsOpen||(t.IsHole^this.ReverseSolution)==this.Area$1(t)>0&&this.ReversePolyPtLinks(t.Pts);for(this.JoinCommonEdges(),e=0,n=this.m_PolyOuts.length;e<n;e++)null!==(t=this.m_PolyOuts[e]).Pts&&(t.IsOpen?this.FixupOutPolyline(t):this.FixupOutPolygon(t));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(t,e,n){var i=new s.Join;i.OutPt1=t,i.OutPt2=e,i.OffPt.X=n.X,i.OffPt.Y=n.Y,s.use_xyz&&(i.OffPt.Z=n.Z),this.m_Joins.push(i)},s.Clipper.prototype.AddGhostJoin=function(t,e){var n=new s.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,s.use_xyz&&(n.OffPt.Z=e.Z),this.m_GhostJoins.push(n)},s.Clipper.prototype.SetZ=function(t,e,n){if(null!==this.ZFillFunction){if(0!==t.Z||null===this.ZFillFunction)return;s.IntPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:s.IntPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:s.IntPoint.op_Equality(t,n.Bot)?t.Z=n.Bot.Z:s.IntPoint.op_Equality(t,n.Top)?t.Z=n.Top.Z:this.ZFillFunction(e.Bot,e.Top,n.Bot,n.Top,t)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,n,i={};this.PopLocalMinima(t,i);){e=i.v.LeftBound,n=i.v.RightBound;var r=null;if(null===e?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):null===n?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,n,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!==n&&(s.ClipperBase.IsHorizontal(n)?(null!==n.NextInLML&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),null!==e&&null!==n){if(null!==r&&s.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var o=0,l=this.m_GhostJoins.length;o<l;o++){var a=this.m_GhostJoins[o];this.HorzSegmentsOverlap(a.OutPt1.Pt.X,a.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X===e.Bot.X&&e.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(e.PrevInAEL.Curr,e.PrevInAEL.Top,e.Curr,e.Top,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var u=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,u,e.Top)}if(e.NextInAEL!==n){n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta&&(u=this.AddOutPt(n.PrevInAEL,n.Bot),this.AddJoin(r,u,n.Top));var p=e.NextInAEL;if(null!==p)for(;p!==n;)this.IntersectEdges(n,p,e.Curr),p=p.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},s.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X===t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<s.Clipper.TopX(t,e.Top.Y):t.Top.X>s.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp===s.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case s.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!==t.WindCnt)return!1;break;case s.PolyFillType.pftNonZero:if(1!==Math.abs(t.WindCnt))return!1;break;case s.PolyFillType.pftPositive:if(1!==t.WindCnt)return!1;break;default:if(-1!==t.WindCnt)return!1}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(n){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case s.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case s.ClipType.ctUnion:switch(n){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return 0===t.WindCnt2;case s.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case s.ClipType.ctDifference:if(t.PolyTyp===s.PolyType.ptSubject)switch(n){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return 0===t.WindCnt2;case s.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case s.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case s.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return 0===t.WindCnt2;case s.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},s.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!==t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e){var n=t.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;0===t.WindDelta?t.WindCnt=n===s.PolyFillType.pftNegative?-1:1:t.WindCnt=t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges}else if(0===t.WindDelta&&this.m_ClipType!==s.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp===e.PolyTyp&&0!==r.WindDelta&&(i=!i),r=r.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!==t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!==t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},s.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,null===t.v)return!1;var e=t.v;return this.m_SortedEdges=t.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL===e)null!==(n=e.NextInSEL)&&(n.PrevInSEL=t),null!==(i=t.PrevInSEL)&&(i.NextInSEL=e),e.PrevInSEL=i,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n;else if(e.NextInSEL===t)null!==(n=t.NextInSEL)&&(n.PrevInSEL=e),null!==(i=e.PrevInSEL)&&(i.NextInSEL=t),t.PrevInSEL=i,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n;else{var n=t.NextInSEL,i=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=i,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},s.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0===e.WindDelta&&this.AddOutPt(e,n),t.OutIdx===e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},s.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var i,r,o;if(s.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(i=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=s.EdgeSide.esLeft,e.Side=s.EdgeSide.esRight,o=(r=t).PrevInAEL===e?e.PrevInAEL:r.PrevInAEL):(i=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=s.EdgeSide.esRight,e.Side=s.EdgeSide.esLeft,o=(r=e).PrevInAEL===t?t.PrevInAEL:r.PrevInAEL),null!==o&&o.OutIdx>=0&&o.Top.Y<n.Y&&r.Top.Y<n.Y){var l=s.Clipper.TopX(o,n.Y),a=s.Clipper.TopX(r,n.Y);if(l===a&&0!==r.WindDelta&&0!==o.WindDelta&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(l,n.Y),o.Top,new s.IntPoint2(a,n.Y),r.Top,this.m_UseFullRange)){var u=this.AddOutPt(o,n);this.AddJoin(i,u,r.Top)}}return i},s.Clipper.prototype.AddOutPt=function(t,e){if(t.OutIdx<0){(i=this.CreateOutRec()).IsOpen=0===t.WindDelta;var n=new s.OutPt;return i.Pts=n,n.Idx=i.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,s.use_xyz&&(n.Pt.Z=e.Z),n.Next=n,n.Prev=n,i.IsOpen||this.SetHoleState(t,i),t.OutIdx=i.Idx,n}var i,r=(i=this.m_PolyOuts[t.OutIdx]).Pts,o=t.Side===s.EdgeSide.esLeft;return o&&s.IntPoint.op_Equality(e,r.Pt)?r:!o&&s.IntPoint.op_Equality(e,r.Prev.Pt)?r.Prev:((n=new s.OutPt).Idx=i.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,s.use_xyz&&(n.Pt.Z=e.Z),n.Next=r,n.Prev=r.Prev,n.Prev.Next=n,r.Prev=n,o&&(i.Pts=n),n)},s.Clipper.prototype.GetLastOutPt=function(t){var e=this.m_PolyOuts[t.OutIdx];return t.Side===s.EdgeSide.esLeft?e.Pts:e.Pts.Prev},s.Clipper.prototype.SwapPoints=function(t,e){var n=new s.IntPoint1(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,s.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=n.X,e.Value.Y=n.Y,s.use_xyz&&(e.Value.Z=n.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,i){var r;return t>e&&(r=t,t=e,e=r),n>i&&(r=n,n=i,i=r),t<i&&n<e},s.Clipper.prototype.SetHoleState=function(t,e){for(var n=t.PrevInAEL,i=null;null!==n;)n.OutIdx>=0&&0!==n.WindDelta&&(null===i?i=n:i.OutIdx===n.OutIdx&&(i=null)),n=n.PrevInAEL;null===i?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[i.OutIdx],e.IsHole=!e.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(t,e){return t.Y===e.Y?s.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},s.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;s.IntPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Prev;var i=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;s.IntPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Next;var r=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=e.Prev;s.IntPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Prev;var o=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;s.IntPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Next;var l=Math.abs(this.GetDx(e.Pt,n.Pt));return Math.max(i,r)===Math.max(o,l)&&Math.min(i,r)===Math.min(o,l)?this.Area(t)>0:i>=o&&i>=l||r>=o&&r>=l},s.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!==t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y===t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!==t&&n.Prev!==t&&(e=n)),n=n.Next;if(null!==e)for(;e!==n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;s.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},s.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,i=e.BottomPt;return n.Pt.Y>i.Pt.Y?t:n.Pt.Y<i.Pt.Y?e:n.Pt.X<i.Pt.X?t:n.Pt.X>i.Pt.X||n.Next===n?e:i.Next===i||this.FirstIsBottomPt(n,i)?t:e},s.Clipper.prototype.OutRec1RightOfOutRec2=function(t,e){do{if((t=t.FirstLeft)===e)return!0}while(null!==t);return!1},s.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!==this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},s.Clipper.prototype.AppendPolygon=function(t,e){var n,i=this.m_PolyOuts[t.OutIdx],r=this.m_PolyOuts[e.OutIdx];n=this.OutRec1RightOfOutRec2(i,r)?r:this.OutRec1RightOfOutRec2(r,i)?i:this.GetLowermostRec(i,r);var o=i.Pts,l=o.Prev,a=r.Pts,u=a.Prev;t.Side===s.EdgeSide.esLeft?e.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(a),a.Next=o,o.Prev=a,l.Next=u,u.Prev=l,i.Pts=u):(u.Next=o,o.Prev=u,a.Prev=l,l.Next=a,i.Pts=a):e.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(a),l.Next=u,u.Prev=l,a.Next=o,o.Prev=a):(l.Next=a,a.Prev=l,o.Prev=u,u.Next=o),i.BottomPt=null,n===r&&(r.FirstLeft!==i&&(i.FirstLeft=r.FirstLeft),i.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=i;var p=t.OutIdx,h=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var f=this.m_ActiveEdges;null!==f;){if(f.OutIdx===h){f.OutIdx=p,f.Side=t.Side;break}f=f.NextInAEL}r.Idx=i.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,n;e=t;do{n=e.Next,e.Next=e.Prev,e.Prev=n,e=n}while(e!==t)}},s.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},s.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},s.Clipper.prototype.IntersectEdges=function(t,e,n){var i=t.OutIdx>=0,r=e.OutIdx>=0;if(s.use_xyz&&this.SetZ(n,t,e),!s.use_lines||0!==t.WindDelta&&0!==e.WindDelta){if(t.PolyTyp===e.PolyTyp)if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var l,a,u,p,h,f;switch(t.PolyTyp===s.PolyType.ptSubject?(l=this.m_SubjFillType,u=this.m_ClipFillType):(l=this.m_ClipFillType,u=this.m_SubjFillType),e.PolyTyp===s.PolyType.ptSubject?(a=this.m_SubjFillType,p=this.m_ClipFillType):(a=this.m_ClipFillType,p=this.m_SubjFillType),l){case s.PolyFillType.pftPositive:h=t.WindCnt;break;case s.PolyFillType.pftNegative:h=-t.WindCnt;break;default:h=Math.abs(t.WindCnt)}switch(a){case s.PolyFillType.pftPositive:f=e.WindCnt;break;case s.PolyFillType.pftNegative:f=-e.WindCnt;break;default:f=Math.abs(e.WindCnt)}if(i&&r)0!==h&&1!==h||0!==f&&1!==f||t.PolyTyp!==e.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),s.Clipper.SwapSides(t,e),s.Clipper.SwapPolyIndexes(t,e));else if(i)0!==f&&1!==f||(this.AddOutPt(t,n),s.Clipper.SwapSides(t,e),s.Clipper.SwapPolyIndexes(t,e));else if(r)0!==h&&1!==h||(this.AddOutPt(e,n),s.Clipper.SwapSides(t,e),s.Clipper.SwapPolyIndexes(t,e));else if(!(0!==h&&1!==h||0!==f&&1!==f)){var d,c;switch(u){case s.PolyFillType.pftPositive:d=t.WindCnt2;break;case s.PolyFillType.pftNegative:d=-t.WindCnt2;break;default:d=Math.abs(t.WindCnt2)}switch(p){case s.PolyFillType.pftPositive:c=e.WindCnt2;break;case s.PolyFillType.pftNegative:c=-e.WindCnt2;break;default:c=Math.abs(e.WindCnt2)}if(t.PolyTyp!==e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(1===h&&1===f)switch(this.m_ClipType){case s.ClipType.ctIntersection:d>0&&c>0&&this.AddLocalMinPoly(t,e,n);break;case s.ClipType.ctUnion:d<=0&&c<=0&&this.AddLocalMinPoly(t,e,n);break;case s.ClipType.ctDifference:(t.PolyTyp===s.PolyType.ptClip&&d>0&&c>0||t.PolyTyp===s.PolyType.ptSubject&&d<=0&&c<=0)&&this.AddLocalMinPoly(t,e,n);break;case s.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else s.Clipper.SwapSides(t,e)}}else{if(0===t.WindDelta&&0===e.WindDelta)return;t.PolyTyp===e.PolyTyp&&t.WindDelta!==e.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?0===t.WindDelta?r&&(this.AddOutPt(t,n),i&&(t.OutIdx=-1)):i&&(this.AddOutPt(e,n),r&&(e.OutIdx=-1)):t.PolyTyp!==e.PolyTyp&&(0!==t.WindDelta||1!==Math.abs(e.WindCnt)||this.m_ClipType===s.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===s.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,n),r&&(e.OutIdx=-1)):(this.AddOutPt(t,n),i&&(t.OutIdx=-1)))}},s.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;null===e&&null===n&&t!==this.m_SortedEdges||(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},s.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=s.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(t){var e={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,e);for(var n=e.Dir,i=e.Left,r=e.Right,o=0===t.WindDelta,l=t,a=null;null!==l.NextInLML&&s.ClipperBase.IsHorizontal(l.NextInLML);)l=l.NextInLML;null===l.NextInLML&&(a=this.GetMaximaPair(l));var u=this.m_Maxima;if(null!==u)if(n===s.Direction.dLeftToRight){for(;null!==u&&u.X<=t.Bot.X;)u=u.Next;null!==u&&u.X>=l.Top.X&&(u=null)}else{for(;null!==u.Next&&u.Next.X<t.Bot.X;)u=u.Next;u.X<=l.Top.X&&(u=null)}for(var p=null;;){for(var h=t===l,f=this.GetNextInAEL(t,n);null!==f;){if(null!==u)if(n===s.Direction.dLeftToRight)for(;null!==u&&u.X<f.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new s.IntPoint2(u.X,t.Bot.Y)),u=u.Next;else for(;null!==u&&u.X>f.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new s.IntPoint2(u.X,t.Bot.Y)),u=u.Prev;if(n===s.Direction.dLeftToRight&&f.Curr.X>r||n===s.Direction.dRightToLeft&&f.Curr.X<i)break;if(f.Curr.X===t.Top.X&&null!==t.NextInLML&&f.Dx<t.NextInLML.Dx)break;if(t.OutIdx>=0&&!o){s.use_xyz&&(n===s.Direction.dLeftToRight?this.SetZ(f.Curr,t,f):this.SetZ(f.Curr,f,t)),p=this.AddOutPt(t,f.Curr);for(var d=this.m_SortedEdges;null!==d;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,d.Bot.X,d.Top.X)){var c=this.GetLastOutPt(d);this.AddJoin(c,p,d.Top)}d=d.NextInSEL}this.AddGhostJoin(p,t.Bot)}if(f===a&&h)return t.OutIdx>=0&&this.AddLocalMaxPoly(t,a,t.Top),this.DeleteFromAEL(t),void this.DeleteFromAEL(a);if(n===s.Direction.dLeftToRight){var y=new s.IntPoint2(f.Curr.X,t.Curr.Y);this.IntersectEdges(t,f,y)}else y=new s.IntPoint2(f.Curr.X,t.Curr.Y),this.IntersectEdges(f,t,y);var m=this.GetNextInAEL(f,n);this.SwapPositionsInAEL(t,f),f=m}if(null===t.NextInLML||!s.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),e={Dir:n,Left:i,Right:r},this.GetHorzDirection(t,e),n=e.Dir,i=e.Left,r=e.Right}if(t.OutIdx>=0&&null===p){for(p=this.GetLastOutPt(t),d=this.m_SortedEdges;null!==d;)d.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,d.Bot.X,d.Top.X)&&(c=this.GetLastOutPt(d),this.AddJoin(c,p,d.Top)),d=d.NextInSEL;this.AddGhostJoin(p,t.Top)}if(null!==t.NextInLML)if(t.OutIdx>=0){if(p=this.AddOutPt(t,t.Top),0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var v=t.PrevInAEL;m=t.NextInAEL,null!==v&&v.Curr.X===t.Bot.X&&v.Curr.Y===t.Bot.Y&&0===v.WindDelta&&v.OutIdx>=0&&v.Curr.Y>v.Top.Y&&s.ClipperBase.SlopesEqual3(t,v,this.m_UseFullRange)?(c=this.AddOutPt(v,t.Bot),this.AddJoin(p,c,t.Top)):null!==m&&m.Curr.X===t.Bot.X&&m.Curr.Y===t.Bot.Y&&0!==m.WindDelta&&m.OutIdx>=0&&m.Curr.Y>m.Top.Y&&s.ClipperBase.SlopesEqual3(t,m,this.m_UseFullRange)&&(c=this.AddOutPt(m,t.Bot),this.AddJoin(p,c,t.Top))}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},s.Clipper.prototype.GetNextInAEL=function(t,e){return e===s.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},s.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},s.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y===e&&null===t.NextInLML},s.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y===e&&null!==t.NextInLML},s.Clipper.prototype.GetMaximaPair=function(t){return s.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?t.Next:s.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML?t.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(t){var e=this.GetMaximaPair(t);return null===e||e.OutIdx===s.ClipperBase.Skip||e.NextInAEL===e.PrevInAEL&&!s.ClipperBase.IsHorizontal(e)?null:e},s.Clipper.prototype.ProcessIntersections=function(t){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0===this.m_IntersectList.length)return!0;if(1!==this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=s.Clipper.TopX(e,t),e=e.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var i=e.NextInSEL,r=new s.IntPoint0;if(e.Curr.X>i.Curr.X){this.IntersectPoint(e,i,r),r.Y<t&&(r=new s.IntPoint2(s.Clipper.TopX(e,t),t));var o=new s.IntersectNode;o.Edge1=e,o.Edge2=i,o.Pt.X=r.X,o.Pt.Y=r.Y,s.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,i),n=!0}else e=i}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},s.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;n<t&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n===t)return!1;var i=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=i}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0},p.msie?s.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.round(t)}:p.chromium?s.Clipper.Round=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}:p.safari?s.Clipper.Round=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t}:s.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},s.Clipper.TopX=function(t,e){return e===t.Top.Y?t.Top.X:t.Bot.X+s.Clipper.Round(t.Dx*(e-t.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(t,e,n){var i,r;if(n.X=0,n.Y=0,t.Dx===e.Dx)return n.Y=t.Curr.Y,void(n.X=s.Clipper.TopX(t,n.Y));if(0===t.Delta.X)n.X=t.Bot.X,s.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,n.Y=s.Clipper.Round(n.X/e.Dx+r));else if(0===e.Delta.X)n.X=e.Bot.X,s.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(i=t.Bot.Y-t.Bot.X/t.Dx,n.Y=s.Clipper.Round(n.X/t.Dx+i));else{i=t.Bot.X-t.Bot.Y*t.Dx;var o=((r=e.Bot.X-e.Bot.Y*e.Dx)-i)/(t.Dx-e.Dx);n.Y=s.Clipper.Round(o),Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=s.Clipper.Round(t.Dx*o+i):n.X=s.Clipper.Round(e.Dx*o+r)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=s.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=s.Clipper.TopX(t,n.Y):n.X=s.Clipper.TopX(e,n.Y)}n.Y>t.Curr.Y&&(n.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(e.Dx)?n.X=s.Clipper.TopX(e,n.Y):n.X=s.Clipper.TopX(t,n.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var n=this.IsMaxima(e,t);if(n){var i=this.GetMaximaPairEx(e);n=null===i||!s.ClipperBase.IsHorizontal(i)}if(n){this.StrictlySimple&&this.InsertMaxima(e.Top.X);var r=e.PrevInAEL;this.DoMaxima(e),e=null===r?this.m_ActiveEdges:r.NextInAEL}else{if(this.IsIntermediate(e,t)&&s.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=s.Clipper.TopX(e,t),e.Curr.Y=t),s.use_xyz&&(e.Top.Y===t?e.Curr.Z=e.Top.Z:e.Bot.Y===t?e.Curr.Z=e.Bot.Z:e.Curr.Z=0),this.StrictlySimple&&(r=e.PrevInAEL,e.OutIdx>=0&&0!==e.WindDelta&&null!==r&&r.OutIdx>=0&&r.Curr.X===e.Curr.X&&0!==r.WindDelta)){var o=new s.IntPoint1(e.Curr);s.use_xyz&&this.SetZ(o,r,e);var l=this.AddOutPt(r,o),a=this.AddOutPt(e,o);this.AddJoin(l,a,o)}e=e.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){l=null,e.OutIdx>=0&&(l=this.AddOutPt(e,e.Top)),r=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var u=e.NextInAEL;null!==r&&r.Curr.X===e.Bot.X&&r.Curr.Y===e.Bot.Y&&null!==l&&r.OutIdx>=0&&r.Curr.Y===r.Top.Y&&s.ClipperBase.SlopesEqual5(e.Curr,e.Top,r.Curr,r.Top,this.m_UseFullRange)&&0!==e.WindDelta&&0!==r.WindDelta?(a=this.AddOutPt(ePrev2,e.Bot),this.AddJoin(l,a,e.Top)):null!==u&&u.Curr.X===e.Bot.X&&u.Curr.Y===e.Bot.Y&&null!==l&&u.OutIdx>=0&&u.Curr.Y===u.Top.Y&&s.ClipperBase.SlopesEqual5(e.Curr,e.Top,u.Curr,u.Top,this.m_UseFullRange)&&0!==e.WindDelta&&0!==u.WindDelta&&(a=this.AddOutPt(u,e.Bot),this.AddJoin(l,a,e.Top))}e=e.NextInAEL}},s.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPairEx(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL;null!==n&&n!==e;)this.IntersectEdges(t,n,t.Top),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1===t.OutIdx&&-1===e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):s.use_lines&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(e)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;e<n;e++)t[e].reverse()},s.Clipper.Orientation=function(t){return s.Clipper.Area(t)>=0},s.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,n=t;do{e++,n=n.Next}while(n!==t);return e},s.Clipper.prototype.BuildResult=function(t){s.Clear(t);for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var i=this.m_PolyOuts[e];if(null!==i.Pts){var r=i.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var l=new Array(o),a=0;a<o;a++)l[a]=r.Pt,r=r.Prev;t.push(l)}}}},s.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var i=this.m_PolyOuts[e],r=this.PointCount(i.Pts);if(!(i.IsOpen&&r<2||!i.IsOpen&&r<3)){this.FixHoleLinkage(i);var o=new s.PolyNode;t.m_AllPolys.push(o),i.PolyNode=o,o.m_polygon.length=r;for(var l=i.Pts.Prev,a=0;a<r;a++)o.m_polygon[a]=l.Pt,l=l.Prev}}for(e=0,n=this.m_PolyOuts.length;e<n;e++)null!==(i=this.m_PolyOuts[e]).PolyNode&&(i.IsOpen?(i.PolyNode.IsOpen=!0,t.AddChild(i.PolyNode)):null!==i.FirstLeft&&null!==i.FirstLeft.PolyNode?i.FirstLeft.PolyNode.AddChild(i.PolyNode):t.AddChild(i.PolyNode))},s.Clipper.prototype.FixupOutPolyline=function(t){for(var e=t.Pts,n=e.Prev;e!==n;)if(e=e.Next,s.IntPoint.op_Equality(e.Pt,e.Prev.Pt)){e===n&&(n=e.Prev);var i=e.Prev;i.Next=e.Next,e.Next.Prev=i,e=i}e===e.Prev&&(t.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts,i=this.PreserveCollinear||this.StrictlySimple;;){if(n.Prev===n||n.Prev===n.Next)return void(t.Pts=null);if(s.IntPoint.op_Equality(n.Pt,n.Next.Pt)||s.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||s.ClipperBase.SlopesEqual4(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!i||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))e=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n===e)break;null===e&&(e=n),n=n.Next}}t.Pts=n},s.Clipper.prototype.DupOutPt=function(t,e){var n=new s.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,s.use_xyz&&(n.Pt.Z=t.Pt.Z),n.Idx=t.Idx,e?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},s.Clipper.prototype.GetOverlap=function(t,e,n,i,r){return t<e?n<i?(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):n<i?(r.Left=Math.max(e,n),r.Right=Math.min(t,i)):(r.Left=Math.max(e,i),r.Right=Math.min(t,n)),r.Left<r.Right},s.Clipper.prototype.JoinHorz=function(t,e,n,i,r,o){var l=t.Pt.X>e.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,a=n.Pt.X>i.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(l===a)return!1;if(l===s.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;o&&t.Pt.X!==r.X&&(t=t.Next),e=this.DupOutPt(t,!o),s.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,s.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;o||t.Pt.X===r.X||(t=t.Next),e=this.DupOutPt(t,o),s.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,s.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,o))}if(a===s.Direction.dLeftToRight){for(;n.Next.Pt.X<=r.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y===r.Y;)n=n.Next;o&&n.Pt.X!==r.X&&(n=n.Next),i=this.DupOutPt(n,!o),s.IntPoint.op_Inequality(i.Pt,r)&&((n=i).Pt.X=r.X,n.Pt.Y=r.Y,s.use_xyz&&(n.Pt.Z=r.Z),i=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=r.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y===r.Y;)n=n.Next;o||n.Pt.X===r.X||(n=n.Next),i=this.DupOutPt(n,o),s.IntPoint.op_Inequality(i.Pt,r)&&((n=i).Pt.X=r.X,n.Pt.Y=r.Y,s.use_xyz&&(n.Pt.Z=r.Z),i=this.DupOutPt(n,o))}return l===s.Direction.dLeftToRight===o?(t.Prev=n,n.Next=t,e.Next=i,i.Prev=e):(t.Next=n,n.Prev=t,e.Prev=i,i.Next=e),!0},s.Clipper.prototype.JoinPoints=function(t,e,n){var i=t.OutPt1,r=new s.OutPt,o=t.OutPt2,l=new s.OutPt,a=t.OutPt1.Pt.Y===t.OffPt.Y;if(a&&s.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&s.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!==n)return!1;for(r=t.OutPt1.Next;r!==i&&s.IntPoint.op_Equality(r.Pt,t.OffPt);)r=r.Next;var u=r.Pt.Y>t.OffPt.Y;for(l=t.OutPt2.Next;l!==o&&s.IntPoint.op_Equality(l.Pt,t.OffPt);)l=l.Next;return u!==l.Pt.Y>t.OffPt.Y&&(u?(r=this.DupOutPt(i,!1),l=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,r.Next=l,l.Prev=r,t.OutPt1=i,t.OutPt2=r,!0):(r=this.DupOutPt(i,!0),l=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,r.Prev=l,l.Next=r,t.OutPt1=i,t.OutPt2=r,!0))}if(a){for(r=i;i.Prev.Pt.Y===i.Pt.Y&&i.Prev!==r&&i.Prev!==o;)i=i.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==i&&r.Next!==o;)r=r.Next;if(r.Next===i||r.Next===o)return!1;for(l=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==l&&o.Prev!==r;)o=o.Prev;for(;l.Next.Pt.Y===l.Pt.Y&&l.Next!==o&&l.Next!==i;)l=l.Next;if(l.Next===o||l.Next===i)return!1;var p={Left:null,Right:null};if(!this.GetOverlap(i.Pt.X,r.Pt.X,o.Pt.X,l.Pt.X,p))return!1;var h,f=p.Left,d=p.Right,c=new s.IntPoint0;return i.Pt.X>=f&&i.Pt.X<=d?(c.X=i.Pt.X,c.Y=i.Pt.Y,s.use_xyz&&(c.Z=i.Pt.Z),h=i.Pt.X>r.Pt.X):o.Pt.X>=f&&o.Pt.X<=d?(c.X=o.Pt.X,c.Y=o.Pt.Y,s.use_xyz&&(c.Z=o.Pt.Z),h=o.Pt.X>l.Pt.X):r.Pt.X>=f&&r.Pt.X<=d?(c.X=r.Pt.X,c.Y=r.Pt.Y,s.use_xyz&&(c.Z=r.Pt.Z),h=r.Pt.X>i.Pt.X):(c.X=l.Pt.X,c.Y=l.Pt.Y,s.use_xyz&&(c.Z=l.Pt.Z),h=l.Pt.X>o.Pt.X),t.OutPt1=i,t.OutPt2=o,this.JoinHorz(i,r,o,l,c,h)}for(r=i.Next;s.IntPoint.op_Equality(r.Pt,i.Pt)&&r!==i;)r=r.Next;var y=r.Pt.Y>i.Pt.Y||!s.ClipperBase.SlopesEqual4(i.Pt,r.Pt,t.OffPt,this.m_UseFullRange);if(y){for(r=i.Prev;s.IntPoint.op_Equality(r.Pt,i.Pt)&&r!==i;)r=r.Prev;if(r.Pt.Y>i.Pt.Y||!s.ClipperBase.SlopesEqual4(i.Pt,r.Pt,t.OffPt,this.m_UseFullRange))return!1}for(l=o.Next;s.IntPoint.op_Equality(l.Pt,o.Pt)&&l!==o;)l=l.Next;var m=l.Pt.Y>o.Pt.Y||!s.ClipperBase.SlopesEqual4(o.Pt,l.Pt,t.OffPt,this.m_UseFullRange);if(m){for(l=o.Prev;s.IntPoint.op_Equality(l.Pt,o.Pt)&&l!==o;)l=l.Prev;if(l.Pt.Y>o.Pt.Y||!s.ClipperBase.SlopesEqual4(o.Pt,l.Pt,t.OffPt,this.m_UseFullRange))return!1}return!(r===i||l===o||r===l||e===n&&y===m||(y?(r=this.DupOutPt(i,!1),l=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,r.Next=l,l.Prev=r,t.OutPt1=i,t.OutPt2=r,0):(r=this.DupOutPt(i,!0),l=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,r.Prev=l,l.Next=r,t.OutPt1=i,t.OutPt2=r,0)))},s.Clipper.GetBounds=function(t){for(var e=0,n=t.length;e<n&&0===t[e].length;)e++;if(e===n)return new s.IntRect(0,0,0,0);var i=new s.IntRect;for(i.left=t[e][0].X,i.right=i.left,i.top=t[e][0].Y,i.bottom=i.top;e<n;e++)for(var r=0,o=t[e].length;r<o;r++)t[e][r].X<i.left?i.left=t[e][r].X:t[e][r].X>i.right&&(i.right=t[e][r].X),t[e][r].Y<i.top?i.top=t[e][r].Y:t[e][r].Y>i.bottom&&(i.bottom=t[e][r].Y);return i},s.Clipper.prototype.GetBounds2=function(t){var e=t,n=new s.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!==e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},s.Clipper.PointInPolygon=function(t,e){var n=0,i=e.length;if(i<3)return 0;for(var r=e[0],o=1;o<=i;++o){var s=o===i?e[0]:e[o];if(s.Y===t.Y&&(s.X===t.X||r.Y===t.Y&&s.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=s.Y<t.Y)if(r.X>=t.X)if(s.X>t.X)n=1-n;else{if(0==(l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y)))return-1;l>0==s.Y>r.Y&&(n=1-n)}else if(s.X>t.X){var l;if(0==(l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y)))return-1;l>0==s.Y>r.Y&&(n=1-n)}r=s}return n},s.Clipper.prototype.PointInPolygon=function(t,e){var n=0,i=e,r=t.X,o=t.Y,s=e.Pt.X,l=e.Pt.Y;do{var a=(e=e.Next).Pt.X,u=e.Pt.Y;if(u===o&&(a===r||l===o&&a>r==s<r))return-1;if(l<o!=u<o)if(s>=r)if(a>r)n=1-n;else{if(0==(p=(s-r)*(u-o)-(a-r)*(l-o)))return-1;p>0==u>l&&(n=1-n)}else if(a>r){var p;if(0==(p=(s-r)*(u-o)-(a-r)*(l-o)))return-1;p>0==u>l&&(n=1-n)}s=a,l=u}while(i!==e);return n},s.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var i=this.PointInPolygon(n.Pt,e);if(i>=0)return i>0;n=n.Next}while(n!==t);return!0},s.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n,i,r=0,o=this.m_PolyOuts.length;r<o;r++)n=this.m_PolyOuts[r],i=s.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&i===t&&this.Poly2ContainsPoly1(n.Pts,e.Pts)&&(n.FirstLeft=e)},s.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n,i,r=e.FirstLeft,o=0,l=this.m_PolyOuts.length;o<l;o++)null!==(n=this.m_PolyOuts[o]).Pts&&n!==e&&n!==t&&((i=s.Clipper.ParseFirstLeft(n.FirstLeft))!==r&&i!==t&&i!==e||(this.Poly2ContainsPoly1(n.Pts,t.Pts)?n.FirstLeft=t:this.Poly2ContainsPoly1(n.Pts,e.Pts)?n.FirstLeft=e:n.FirstLeft!==t&&n.FirstLeft!==e||(n.FirstLeft=r)))},s.Clipper.prototype.FixupFirstLefts3=function(t,e){for(var n,i,r=0,o=this.m_PolyOuts.length;r<o;r++)n=this.m_PolyOuts[r],i=s.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&i===t&&(n.FirstLeft=e)},s.Clipper.ParseFirstLeft=function(t){for(;null!==t&&null===t.Pts;)t=t.FirstLeft;return t},s.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var n,i=this.m_Joins[t],r=this.GetOutRec(i.OutPt1.Idx),o=this.GetOutRec(i.OutPt2.Idx);null!==r.Pts&&null!==o.Pts&&(r.IsOpen||o.IsOpen||(n=r===o?r:this.OutRec1RightOfOutRec2(r,o)?o:this.OutRec1RightOfOutRec2(o,r)?r:this.GetLowermostRec(r,o),this.JoinPoints(i,r,o)&&(r===o?(r.Pts=i.OutPt1,r.BottomPt=null,(o=this.CreateOutRec()).Pts=i.OutPt2,this.UpdateOutPtIdxs(o),this.Poly2ContainsPoly1(o.Pts,r.Pts)?(o.IsHole=!r.IsHole,o.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,r),(o.IsHole^this.ReverseSolution)==this.Area$1(o)>0&&this.ReversePolyPtLinks(o.Pts)):this.Poly2ContainsPoly1(r.Pts,o.Pts)?(o.IsHole=r.IsHole,r.IsHole=!o.IsHole,o.FirstLeft=r.FirstLeft,r.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,o),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):(o.IsHole=r.IsHole,o.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,o))):(o.Pts=null,o.BottomPt=null,o.Idx=r.Idx,r.IsHole=n.IsHole,n===o&&(r.FirstLeft=o.FirstLeft),o.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts3(o,r)))))}},s.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!==t.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(null!==n&&!e.IsOpen)do{for(var i=n.Next;i!==e.Pts;){if(s.IntPoint.op_Equality(n.Pt,i.Pt)&&i.Next!==n&&i.Prev!==n){var r=n.Prev,o=i.Prev;n.Prev=o,o.Next=n,i.Prev=r,r.Next=i,e.Pts=n;var l=this.CreateOutRec();l.Pts=i,this.UpdateOutPtIdxs(l),this.Poly2ContainsPoly1(l.Pts,e.Pts)?(l.IsHole=!e.IsHole,l.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(l,e)):this.Poly2ContainsPoly1(e.Pts,l.Pts)?(l.IsHole=e.IsHole,e.IsHole=!l.IsHole,l.FirstLeft=e.FirstLeft,e.FirstLeft=l,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,l)):(l.IsHole=e.IsHole,l.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,l)),i=n}i=i.Next}n=n.Next}while(n!==e.Pts)}},s.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var e=t.length;if(e<3)return 0;for(var n=0,i=0,r=e-1;i<e;++i)n+=(t[r].X+t[i].X)*(t[r].Y-t[i].Y),r=i;return.5*-n},s.Clipper.prototype.Area=function(t){var e=t;if(null===t)return 0;var n=0;do{n+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next}while(t!==e);return.5*n},s.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},s.Clipper.SimplifyPolygon=function(t,e){var n=new Array,i=new s.Clipper(0);return i.StrictlySimple=!0,i.AddPath(t,s.PolyType.ptSubject,!0),i.Execute(s.ClipType.ctUnion,n,e,e),n},s.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=s.PolyFillType.pftEvenOdd);var n=new Array,i=new s.Clipper(0);return i.StrictlySimple=!0,i.AddPaths(t,s.PolyType.ptSubject,!0),i.Execute(s.ClipType.ctUnion,n,e,e),n},s.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,i=t.Y-e.Y;return n*n+i*i},s.Clipper.DistanceFromLineSqrd=function(t,e,n){var i=e.Y-n.Y,r=n.X-e.X,o=i*e.X+r*e.Y;return(o=i*t.X+r*t.Y-o)*o/(i*i+r*r)},s.Clipper.SlopesNearCollinear=function(t,e,n,i){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<n.X?s.Clipper.DistanceFromLineSqrd(t,e,n)<i:e.X>t.X==e.X<n.X?s.Clipper.DistanceFromLineSqrd(e,t,n)<i:s.Clipper.DistanceFromLineSqrd(n,t,e)<i:t.Y>e.Y==t.Y<n.Y?s.Clipper.DistanceFromLineSqrd(t,e,n)<i:e.Y>t.Y==e.Y<n.Y?s.Clipper.DistanceFromLineSqrd(e,t,n)<i:s.Clipper.DistanceFromLineSqrd(n,t,e)<i},s.Clipper.PointsAreClose=function(t,e,n){var i=t.X-e.X,r=t.Y-e.Y;return i*i+r*r<=n},s.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},s.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var n=t.length;if(0===n)return new Array;for(var i=new Array(n),r=0;r<n;++r)i[r]=new s.OutPt;for(r=0;r<n;++r)i[r].Pt=t[r],i[r].Next=i[(r+1)%n],i[r].Next.Prev=i[r],i[r].Idx=0;for(var o=e*e,l=i[0];0===l.Idx&&l.Next!==l.Prev;)s.Clipper.PointsAreClose(l.Pt,l.Prev.Pt,o)?(l=s.Clipper.ExcludeOp(l),n--):s.Clipper.PointsAreClose(l.Prev.Pt,l.Next.Pt,o)?(s.Clipper.ExcludeOp(l.Next),l=s.Clipper.ExcludeOp(l),n-=2):s.Clipper.SlopesNearCollinear(l.Prev.Pt,l.Pt,l.Next.Pt,o)?(l=s.Clipper.ExcludeOp(l),n--):(l.Idx=1,l=l.Next);n<3&&(n=0);var a=new Array(n);for(r=0;r<n;++r)a[r]=new s.IntPoint1(l.Pt),l=l.Next;return i=null,a},s.Clipper.CleanPolygons=function(t,e){for(var n=new Array(t.length),i=0,r=t.length;i<r;i++)n[i]=s.Clipper.CleanPolygon(t[i],e);return n},s.Clipper.Minkowski=function(t,e,n,i){var r=i?1:0,o=t.length,l=e.length,a=new Array;if(n)for(var u=0;u<l;u++){for(var p=new Array(o),h=0,f=t.length,d=t[h];h<f;d=t[++h])p[h]=new s.IntPoint2(e[u].X+d.X,e[u].Y+d.Y);a.push(p)}else for(u=0;u<l;u++){for(p=new Array(o),h=0,f=t.length,d=t[h];h<f;d=t[++h])p[h]=new s.IntPoint2(e[u].X-d.X,e[u].Y-d.Y);a.push(p)}var c=new Array;for(u=0;u<l-1+r;u++)for(h=0;h<o;h++){var y=new Array;y.push(a[u%l][h%o]),y.push(a[(u+1)%l][h%o]),y.push(a[(u+1)%l][(h+1)%o]),y.push(a[u%l][(h+1)%o]),s.Clipper.Orientation(y)||y.reverse(),c.push(y)}return c},s.Clipper.MinkowskiSum=function(t,e,n){if(e[0]instanceof Array){u=e;for(var i=new s.Paths,r=(l=new s.Clipper,0);r<u.length;++r){var o=s.Clipper.Minkowski(t,u[r],!0,n);l.AddPaths(o,s.PolyType.ptSubject,!0),n&&(a=s.Clipper.TranslatePath(u[r],t[0]),l.AddPath(a,s.PolyType.ptClip,!0))}return l.Execute(s.ClipType.ctUnion,i,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),i}var l,a=e,u=s.Clipper.Minkowski(t,a,!0,n);return(l=new s.Clipper).AddPaths(u,s.PolyType.ptSubject,!0),l.Execute(s.ClipType.ctUnion,u,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),u},s.Clipper.TranslatePath=function(t,e){for(var n=new s.Path,i=0;i<t.length;i++)n.push(new s.IntPoint2(t[i].X+e.X,t[i].Y+e.Y));return n},s.Clipper.MinkowskiDiff=function(t,e){var n=s.Clipper.Minkowski(t,e,!1,!0),i=new s.Clipper;return i.AddPaths(n,s.PolyType.ptSubject,!0),i.Execute(s.ClipType.ctUnion,n,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),n},s.Clipper.PolyTreeToPaths=function(t){var e=new Array;return s.Clipper.AddPolyNodeToPaths(t,s.Clipper.NodeType.ntAny,e),e},s.Clipper.AddPolyNodeToPaths=function(t,e,n){var i=!0;switch(e){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:i=!t.IsOpen}t.m_polygon.length>0&&i&&n.push(t.m_polygon);for(var r=0,o=t.Childs(),l=o.length,a=o[r];r<l;a=o[++r])s.Clipper.AddPolyNodeToPaths(a,e,n)},s.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new s.Paths,n=0,i=t.ChildCount();n<i;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},s.Clipper.ClosedPathsFromPolyTree=function(t){var e=new s.Paths;return s.Clipper.AddPolyNodeToPaths(t,s.Clipper.NodeType.ntClosed,e),e},O(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(t,e,n){var i=t.length-1;if(!(i<0)){var r=new s.PolyNode;if(r.m_jointype=e,r.m_endtype=n,n===s.EndType.etClosedLine||n===s.EndType.etClosedPolygon)for(;i>0&&s.IntPoint.op_Equality(t[0],t[i]);)i--;r.m_polygon.push(t[0]);for(var o=0,l=0,a=1;a<=i;a++)s.IntPoint.op_Inequality(r.m_polygon[o],t[a])&&(o++,r.m_polygon.push(t[a]),(t[a].Y>r.m_polygon[l].Y||t[a].Y===r.m_polygon[l].Y&&t[a].X<r.m_polygon[l].X)&&(l=o));if(!(n===s.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),n===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,l);else{var u=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[l].Y>u.Y||r.m_polygon[l].Y===u.Y&&r.m_polygon[l].X<u.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,l))}}},s.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var i=0,r=t.length;i<r;i++)this.AddPath(t[i],e,n)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++)((e=this.m_polyNodes.Childs()[t]).m_endtype===s.EndType.etClosedPolygon||e.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse();else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype!==s.EndType.etClosedLine||s.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,i=e.Y-t.Y;if(0===n&&0===i)return new s.DoublePoint2(0,0);var r=1/Math.sqrt(n*n+i*i);return n*=r,i*=r,new s.DoublePoint2(i,-n)},s.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,s.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++)(r=this.m_polyNodes.Childs()[e]).m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(r.m_polygon);else{var n;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*s.ClipperOffset.def_arc_tolerance?Math.abs(t)*s.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var i=3.14159265358979/Math.acos(1-n/Math.abs(t));for(this.m_sin=Math.sin(s.ClipperOffset.two_pi/i),this.m_cos=Math.cos(s.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/s.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin),e=0;e<this.m_polyNodes.ChildCount();e++){var r=this.m_polyNodes.Childs()[e];this.m_srcPoly=r.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||t<=0&&(o<3||r.m_endtype!==s.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!==o){for(this.m_normals.length=0,f=0;f<o-1;f++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[f],this.m_srcPoly[f+1]));if(r.m_endtype===s.EndType.etClosedLine||r.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[o-2])),r.m_endtype===s.EndType.etClosedPolygon){var l=o-1;for(f=0;f<o;f++)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(r.m_endtype===s.EndType.etClosedLine){for(l=o-1,f=0;f<o;f++)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var a=this.m_normals[o-1];for(f=o-1;f>0;f--)this.m_normals[f]=new s.DoublePoint2(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);for(this.m_normals[0]=new s.DoublePoint2(-a.X,-a.Y),l=0,f=o-1;f>=0;f--)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var u;for(l=0,f=1;f<o-1;++f)l=this.OffsetPoint(f,l,r.m_jointype);for(r.m_endtype===s.EndType.etOpenButt?(f=o-1,u=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[f].X+this.m_normals[f].X*t),s.ClipperOffset.Round(this.m_srcPoly[f].Y+this.m_normals[f].Y*t)),this.m_destPoly.push(u),u=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[f].X-this.m_normals[f].X*t),s.ClipperOffset.Round(this.m_srcPoly[f].Y-this.m_normals[f].Y*t)),this.m_destPoly.push(u)):(f=o-1,l=o-2,this.m_sinA=0,this.m_normals[f]=new s.DoublePoint2(-this.m_normals[f].X,-this.m_normals[f].Y),r.m_endtype===s.EndType.etOpenSquare?this.DoSquare(f,l):this.DoRound(f,l)),f=o-1;f>0;f--)this.m_normals[f]=new s.DoublePoint2(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);for(this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),f=(l=o-1)-1;f>0;--f)l=this.OffsetPoint(f,l,r.m_jointype);r.m_endtype===s.EndType.etOpenButt?(u=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(u),u=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(u)):(l=1,this.m_sinA=0,r.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(r.m_jointype===s.JoinType.jtRound)for(var p=1,h=0,f=1;f<=i;f++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+p*t),s.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t)));var d=p;p=p*this.m_cos-this.m_sin*h,h=d*this.m_sin+h*this.m_cos}else{p=-1,h=-1;for(f=0;f<4;++f)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+p*t),s.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t))),p<0?p=1:h<0?h=1:p=-1}this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof s.PolyTree;if(e)if(o=t[0],l=t[1],o.Clear(),this.FixOrientations(),this.DoOffset(l),(r=new s.Clipper(0)).AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),l>0)r.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else if(u=s.Clipper.GetBounds(this.m_destPolys),(a=new s.Path).push(new s.IntPoint2(u.left-10,u.bottom+10)),a.push(new s.IntPoint2(u.right+10,u.bottom+10)),a.push(new s.IntPoint2(u.right+10,u.top-10)),a.push(new s.IntPoint2(u.left-10,u.top-10)),r.AddPath(a,s.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),1===o.ChildCount()&&o.Childs()[0].ChildCount()>0){var n=o.Childs()[0];o.Childs()[0]=n.Childs()[0],o.Childs()[0].m_Parent=o;for(var i=1;i<n.ChildCount();i++)o.AddChild(n.Childs()[i])}else o.Clear();else{var r,o=t[0],l=t[1];if(s.Clear(o),this.FixOrientations(),this.DoOffset(l),(r=new s.Clipper(0)).AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),l>0)r.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var a,u=s.Clipper.GetBounds(this.m_destPolys);(a=new s.Path).push(new s.IntPoint2(u.left-10,u.bottom+10)),a.push(new s.IntPoint2(u.right+10,u.bottom+10)),a.push(new s.IntPoint2(u.right+10,u.top-10)),a.push(new s.IntPoint2(u.left-10,u.top-10)),r.AddPath(a,s.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),o.length>0&&o.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,Math.abs(this.m_sinA*this.m_delta)<1){if(this.m_normals[e].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[e].Y>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),e}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case s.JoinType.jtMiter:var i=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;i>=this.m_miterLim?this.DoMiter(t,e,i):this.DoSquare(t,e);break;case s.JoinType.jtSquare:this.DoSquare(t,e);break;case s.JoinType.jtRound:this.DoRound(t,e)}return t},s.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},s.ClipperOffset.prototype.DoMiter=function(t,e,n){var i=this.m_delta/n;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*i),s.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*i)))},s.ClipperOffset.prototype.DoRound=function(t,e){for(var n,i=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),r=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(i))),1),o=this.m_normals[e].X,l=this.m_normals[e].Y,a=0;a<r;++a)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+o*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[t].Y+l*this.m_delta))),n=o,o=o*this.m_cos-this.m_sin*l,l=n*this.m_sin+l*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},s.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},s.JS={},s.JS.AreaOfPolygon=function(t,e){return e||(e=1),s.Clipper.Area(t)/(e*e)},s.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,i=0;i<t.length;i++)n+=s.Clipper.Area(t[i]);return n/(e*e)},s.JS.BoundsOfPath=function(t,e){return s.JS.BoundsOfPaths([t],e)},s.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=s.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},s.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array;if(t=s.JS.Clone(t),"number"!=typeof e||null===e)return s.Error("Delta is not a number in Clean()."),t;if(0===t.length||1===t.length&&0===t[0].length||e<0)return t;n||(t=[t]);for(var i,r,o,l,a,u,p,h=t.length,f=[],d=0;d<h;d++)if(0!==(i=(r=t[d]).length))if(i<3)o=r,f.push(o);else{for(o=r,l=e*e,a=r[0],u=1,p=1;p<i;p++)(r[p].X-a.X)*(r[p].X-a.X)+(r[p].Y-a.Y)*(r[p].Y-a.Y)<=l||(o[u]=r[p],a=r[p],u++);a=r[u-1],(r[0].X-a.X)*(r[0].X-a.X)+(r[0].Y-a.Y)*(r[0].Y-a.Y)<=l&&u--,u<i&&o.splice(u,i-u),o.length&&f.push(o)}return!n&&f.length?f=f[0]:n||0!==f.length?n&&0===f.length&&(f=[[]]):f=[],f},s.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1===t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,i,r,o,s=t.length,l=new Array(s);for(i=0;i<s;i++){for(n=t[i].length,o=new Array(n),r=0;r<n;r++)o[r]={X:t[i][r].X,Y:t[i][r].Y};l[i]=o}return e||(l=l[0]),l},s.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(t);if(0===t.length||1===t.length&&0===t[0].length||e<0)return s.JS.Clone(t);var n,i,r,o,l,a,u,p,h,f,d,c,y,m,v,g,P=t[0]instanceof Array;P||(t=[t]);var x=t.length,C=e*e,_=[];for(n=0;n<x;n++)if(0!==(a=(r=t[n]).length)){for(o=0;o<1e6;o++){for(l=[],r[(a=r.length)-1].X!==r[0].X||r[a-1].Y!==r[0].Y?(d=1,r.push({X:r[0].X,Y:r[0].Y}),a=r.length):d=0,f=[],i=0;i<a-2;i++)u=r[i],h=r[i+1],p=r[i+2],v=u.X,g=u.Y,c=p.X-v,y=p.Y-g,0===c&&0===y||((m=((h.X-v)*c+(h.Y-g)*y)/(c*c+y*y))>1?(v=p.X,g=p.Y):m>0&&(v+=c*m,g+=y*m)),(c=h.X-v)*c+(y=h.Y-g)*y<=C&&(f[i+1]=1,i++);for(l.push({X:r[0].X,Y:r[0].Y}),i=1;i<a-1;i++)f[i]||l.push({X:r[i].X,Y:r[i].Y});if(l.push({X:r[a-1].X,Y:r[a-1].Y}),d&&r.pop(),!f.length)break;r=l}l[(a=l.length)-1].X===l[0].X&&l[a-1].Y===l[0].Y&&l.pop(),l.length>2&&_.push(l)}return P||(_=_[0]),void 0===_&&(_=[]),_},s.JS.PerimeterOfPath=function(t,e,n){if(void 0===t)return 0;var i,r,o=Math.sqrt,s=0,l=0,a=0,u=0,p=0,h=t.length;if(h<2)return 0;for(e&&(t[h]=t[0],h++);--h;)l=(i=t[h]).X,a=i.Y,s+=o((l-(u=(r=t[h-1]).X))*(l-u)+(a-(p=r.Y))*(a-p));return e&&t.pop(),s/n},s.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var i=0,r=0;r<t.length;r++)i+=s.JS.PerimeterOfPath(t[r],e,n);return i},s.JS.ScaleDownPath=function(t,e){var n,i;for(e||(e=1),n=t.length;n--;)(i=t[n]).X=i.X/e,i.Y=i.Y/e},s.JS.ScaleDownPaths=function(t,e){var n,i,r;for(e||(e=1),n=t.length;n--;)for(i=t[n].length;i--;)(r=t[n][i]).X=r.X/e,r.Y=r.Y/e},s.JS.ScaleUpPath=function(t,e){var n,i,r=Math.round;for(e||(e=1),n=t.length;n--;)(i=t[n]).X=r(i.X*e),i.Y=r(i.Y*e)},s.JS.ScaleUpPaths=function(t,e){var n,i,r,o=Math.round;for(e||(e=1),n=t.length;n--;)for(i=t[n].length;i--;)(r=t[n][i]).X=o(r.X*e),r.Y=o(r.Y*e)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new s.ExPolygon;n.outer=t.Contour();var i,r,o,l,a,u,p=t.Childs(),h=p.length;for(n.holes=new Array(h),o=0;o<h;o++)for(i=p[o],n.holes[o]=i.Contour(),l=0,u=(a=i.Childs()).length;l<u;l++)r=a[l],s.JS.AddOuterPolyNodeToExPolygons(r,e);e.push(n)},s.JS.ExPolygonsToPaths=function(t){var e,n,i,r,o=new s.Paths;for(e=0,i=t.length;e<i;e++)for(o.push(t[e].outer),n=0,r=t[e].holes.length;n<r;n++)o.push(t[e].holes[n]);return o},s.JS.PolyTreeToExPolygons=function(t){var e,n,i,r,o=new s.ExPolygons;for(n=0,r=(i=t.Childs()).length;n<r;n++)e=i[n],s.JS.AddOuterPolyNodeToExPolygons(e,o);return o}}()},241:function(t,e){var n;!function(i){var r,o,s="hasOwnProperty",l=/[\.\/]/,a=/\s*,\s*/,u=function(t,e){return t-e},p={n:{}},h=function(){for(var t=0,e=this.length;t<e;t++)if(void 0!==this[t])return this[t]},f=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},d=Object.prototype.toString,c=String,y=Array.isArray||function(t){return t instanceof Array||"[object Array]"==d.call(t)},m=function(t,e){var n,i=o,s=Array.prototype.slice.call(arguments,2),l=m.listeners(t),a=0,p=[],d={},c=[],y=r;c.firstDefined=h,c.lastDefined=f,r=t,o=0;for(var v=0,g=l.length;v<g;v++)"zIndex"in l[v]&&(p.push(l[v].zIndex),l[v].zIndex<0&&(d[l[v].zIndex]=l[v]));for(p.sort(u);p[a]<0;)if(n=d[p[a++]],c.push(n.apply(e,s)),o)return o=i,c;for(v=0;v<g;v++)if("zIndex"in(n=l[v]))if(n.zIndex==p[a]){if(c.push(n.apply(e,s)),o)break;do{if((n=d[p[++a]])&&c.push(n.apply(e,s)),o)break}while(n)}else d[n.zIndex]=n;else if(c.push(n.apply(e,s)),o)break;return o=i,r=y,c};m._events=p,m.listeners=function(t){var e,n,i,r,o,s,a,u,h=y(t)?t:t.split(l),f=p,d=[f],c=[];for(r=0,o=h.length;r<o;r++){for(u=[],s=0,a=d.length;s<a;s++)for(n=[(f=d[s].n)[h[r]],f["*"]],i=2;i--;)(e=n[i])&&(u.push(e),c=c.concat(e.f||[]));d=u}return c},m.separator=function(t){t?(t="["+(t=c(t).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",l=new RegExp(t)):l=/[\.\/]/},m.on=function(t,e){if("function"!=typeof e)return function(){};for(var n=y(t)?y(t[0])?t:[t]:c(t).split(a),i=0,r=n.length;i<r;i++)!function(t){for(var n,i=y(t)?t:c(t).split(l),r=p,o=0,s=i.length;o<s;o++)r=(r=r.n).hasOwnProperty(i[o])&&r[i[o]]||(r[i[o]]={n:{}});for(r.f=r.f||[],o=0,s=r.f.length;o<s;o++)if(r.f[o]==e){n=!0;break}!n&&r.f.push(e)}(n[i]);return function(t){+t==+t&&(e.zIndex=+t)}},m.f=function(t){var e=[].slice.call(arguments,1);return function(){m.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},m.stop=function(){o=1},m.nt=function(t){var e=y(r)?r.join("."):r;return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},m.nts=function(){return y(r)?r:r.split(l)},m.off=m.unbind=function(t,e){if(t){var n=y(t)?y(t[0])?t:[t]:c(t).split(a);if(n.length>1)for(var i=0,r=n.length;i<r;i++)m.off(n[i],e);else{n=y(t)?t:c(t).split(l);var o,u,h,f,d,v=[p],g=[];for(i=0,r=n.length;i<r;i++)for(f=0;f<v.length;f+=h.length-2){if(h=[f,1],o=v[f].n,"*"!=n[i])o[n[i]]&&(h.push(o[n[i]]),g.unshift({n:o,name:n[i]}));else for(u in o)o[s](u)&&(h.push(o[u]),g.unshift({n:o,name:u}));v.splice.apply(v,h)}for(i=0,r=v.length;i<r;i++)for(o=v[i];o.n;){if(e){if(o.f){for(f=0,d=o.f.length;f<d;f++)if(o.f[f]==e){o.f.splice(f,1);break}!o.f.length&&delete o.f}for(u in o.n)if(o.n[s](u)&&o.n[u].f){var P=o.n[u].f;for(f=0,d=P.length;f<d;f++)if(P[f]==e){P.splice(f,1);break}!P.length&&delete o.n[u].f}}else for(u in delete o.f,o.n)o.n[s](u)&&o.n[u].f&&delete o.n[u].f;o=o.n}t:for(i=0,r=g.length;i<r;i++){for(u in(o=g[i]).n[o.name].f)continue t;for(u in o.n[o.name].n)continue t;delete o.n[o.name]}}}else m._events=p={n:{}}},m.once=function(t,e){var n=function(){return m.off(t,n),e.apply(this,arguments)};return m.on(t,n)},m.version="0.5.4",m.toString=function(){return"You are running Eve 0.5.4"},i.eve=m,t.exports?t.exports=m:void 0===(n=function(){return m}.apply(e,[]))||(t.exports=n)}("undefined"!=typeof window?window:this)},776:t=>{"use strict";var e=function(t,e){this.head_=t,this.tail_=e,this.search_node_=t};e.prototype.head=function(){return this.head_},e.prototype.setHead=function(t){this.head_=t},e.prototype.tail=function(){return this.tail_},e.prototype.setTail=function(t){this.tail_=t},e.prototype.search=function(){return this.search_node_},e.prototype.setSearch=function(t){this.search_node_=t},e.prototype.findSearchNode=function(){return this.search_node_},e.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},e.prototype.locatePoint=function(t){var e=t.x,n=this.findSearchNode(e),i=n.point.x;if(e===i){if(t!==n.point)if(t===n.prev.point)n=n.prev;else{if(t!==n.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");n=n.next}}else if(e<i)for(;(n=n.prev)&&t!==n.point;);else for(;(n=n.next)&&t!==n.point;);return n&&(this.search_node_=n),n},t.exports=e,t.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},408:t=>{"use strict";t.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},709:(t,e,n)=>{"use strict";var i=n(294),r=function(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null};r.prototype.toString=function(){return i.toStringBase(this)},r.prototype.toJSON=function(){return{x:this.x,y:this.y}},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set_zero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.negate=function(t){return new r(-t.x,-t.y)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return new r(t*e.x,t*e.y)},r.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new r(-t*e.y,t*e.x):"number"==typeof e?new r(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},r.toString=i.toString,r.compare=i.compare,r.cmp=i.compare,r.equals=i.equals,r.dot=function(t,e){return t.x*e.x+t.y*e.y},t.exports=r},7:(t,e,n)=>{"use strict";var i=n(294),r=function(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var n=0;n<e.length;n++)this.message+=" "+i.toString(e[n])};(r.prototype=new Error).constructor=r,t.exports=r},980:(t,e,n)=>{"use strict";var i=n(408),r=n(7),o=n(381),s=n(776).Node,l=n(433),a=l.EPSILON,u=l.Orientation,p=l.orient2d,h=l.inScanArea,f=l.isAngleObtuse;function d(t,e){var n=t.locateNode(e),r=function(t,e,n){var i=new o(e,n.point,n.next.point);i.markNeighbor(n.triangle),t.addToMap(i);var r=new s(e);return r.next=n.next,r.prev=n,n.next.prev=r,n.next=r,g(t,i)||t.mapTriangleToNodes(i),r}(t,e,n);return e.x<=n.point.x+a&&v(t,n),function(t,e){for(var n=e.next;n.next&&!f(n.point,n.next.point,n.prev.point);)v(t,n),n=n.next;for(n=e.prev;n.prev&&!f(n.point,n.next.point,n.prev.point);)v(t,n),n=n.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,n=t.point.y-t.next.next.point.y;return i(n>=0,"unordered y"),e>=0||Math.abs(e)<n}(e)&&function(t,e){for(p(e.point,e.next.point,e.next.next.point)===u.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next,t.basin.bottom_node=t.basin.left_node;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node!==t.basin.left_node){for(t.basin.right_node=t.basin.bottom_node;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;t.basin.right_node!==t.basin.bottom_node&&(t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,C(t,t.basin.bottom_node))}}(t,e)}(t,r),r}function c(t,e,n){t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,m(n.triangle,e.p,e.q)||(function(t,e,n){t.edge_event.right?function(t,e,n){for(;n.next.point.x<e.p.x;)p(e.q,n.next.point,e.p)===u.CCW?_(t,e,n):n=n.next}(t,e,n):function(t,e,n){for(;n.prev.point.x>e.p.x;)p(e.q,n.prev.point,e.p)===u.CW?b(t,e,n):n=n.prev}(t,e,n)}(t,e,n),y(t,e.p,e.q,n.triangle,e.q))}function y(t,e,n,i,o){if(!m(i,e,n)){var s=i.pointCCW(o),l=p(n,s,e);if(l===u.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[n,s,e]);var a=i.pointCW(o),h=p(n,a,e);if(h===u.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[n,a,e]);l===h?y(t,e,n,i=l===u.CW?i.neighborCCW(o):i.neighborCW(o),o):S(t,e,n,i,o)}}function m(t,e,n){var i=t.edgeIndex(e,n);if(-1!==i){t.markConstrainedEdgeByIndex(i);var r=t.getNeighbor(i);return r&&r.markConstrainedEdgeByPoints(e,n),!0}return!1}function v(t,e){var n=new o(e.prev.point,e.point,e.next.point);n.markNeighbor(e.prev.triangle),n.markNeighbor(e.triangle),t.addToMap(n),e.prev.next=e.next,e.next.prev=e.prev,g(t,n)||t.mapTriangleToNodes(n)}function g(t,e){for(var n=0;n<3;++n)if(!e.delaunay_edge[n]){var i=e.getNeighbor(n);if(i){var r=e.getPoint(n),o=i.oppositePoint(e,r),s=i.index(o);if(i.constrained_edge[s]||i.delaunay_edge[s]){e.constrained_edge[n]=i.constrained_edge[s];continue}if(P(r,e.pointCCW(r),e.pointCW(r),o)){e.delaunay_edge[n]=!0,i.delaunay_edge[s]=!0,x(e,r,i,o);var l=!g(t,e);return l&&t.mapTriangleToNodes(e),(l=!g(t,i))&&t.mapTriangleToNodes(i),e.delaunay_edge[n]=!1,i.delaunay_edge[s]=!1,!0}}}return!1}function P(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=e.x-i.x,l=e.y-i.y,a=r*l-s*o;if(a<=0)return!1;var u=n.x-i.x,p=n.y-i.y,h=u*o-r*p;return!(h<=0)&&(r*r+o*o)*(s*p-u*l)+(s*s+l*l)*h+(u*u+p*p)*a>0}function x(t,e,n,i){var r,o,s,l,a,u,p,h,f,d,c,y;r=t.neighborCCW(e),o=t.neighborCW(e),s=n.neighborCCW(i),l=n.neighborCW(i),a=t.getConstrainedEdgeCCW(e),u=t.getConstrainedEdgeCW(e),p=n.getConstrainedEdgeCCW(i),h=n.getConstrainedEdgeCW(i),f=t.getDelaunayEdgeCCW(e),d=t.getDelaunayEdgeCW(e),c=n.getDelaunayEdgeCCW(i),y=n.getDelaunayEdgeCW(i),t.legalize(e,i),n.legalize(i,e),n.setDelaunayEdgeCCW(e,f),t.setDelaunayEdgeCW(e,d),t.setDelaunayEdgeCCW(i,c),n.setDelaunayEdgeCW(i,y),n.setConstrainedEdgeCCW(e,a),t.setConstrainedEdgeCW(e,u),t.setConstrainedEdgeCCW(i,p),n.setConstrainedEdgeCW(i,h),t.clearNeighbors(),n.clearNeighbors(),r&&n.markNeighbor(r),o&&t.markNeighbor(o),s&&t.markNeighbor(s),l&&n.markNeighbor(l),t.markNeighbor(n)}function C(t,e){if(!function(t,e){var n;return n=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y,t.basin.width>n}(t,e)&&(v(t,e),e.prev!==t.basin.left_node||e.next!==t.basin.right_node)){if(e.prev===t.basin.left_node){if(p(e.point,e.next.point,e.next.next.point)===u.CW)return;e=e.next}else if(e.next===t.basin.right_node){if(p(e.point,e.prev.point,e.prev.prev.point)===u.CCW)return;e=e.prev}else e=e.prev.point.y<e.next.point.y?e.prev:e.next;C(t,e)}}function _(t,e,n){n.point.x<e.p.x&&(p(n.point,n.next.point,n.next.next.point)===u.CCW?I(t,e,n):(E(t,e,n),_(t,e,n)))}function I(t,e,n){v(t,n.next),n.next.point!==e.p&&p(e.q,n.next.point,e.p)===u.CCW&&p(n.point,n.next.point,n.next.next.point)===u.CCW&&I(t,e,n)}function E(t,e,n){p(n.next.point,n.next.next.point,n.next.next.next.point)===u.CCW?I(t,e,n.next):p(e.q,n.next.next.point,e.p)===u.CCW&&E(t,e,n.next)}function b(t,e,n){n.point.x>e.p.x&&(p(n.point,n.prev.point,n.prev.prev.point)===u.CW?L(t,e,n):(T(t,e,n),b(t,e,n)))}function T(t,e,n){p(n.prev.point,n.prev.prev.point,n.prev.prev.prev.point)===u.CW?L(t,e,n.prev):p(e.q,n.prev.prev.point,e.p)===u.CW&&T(t,e,n.prev)}function L(t,e,n){v(t,n.prev),n.prev.point!==e.p&&p(e.q,n.prev.point,e.p)===u.CW&&p(n.point,n.prev.point,n.prev.prev.point)===u.CW&&L(t,e,n)}function S(t,e,n,o,s){var l=o.neighborAcross(s);i(l,"FLIP failed due to missing triangle!");var a=l.oppositePoint(o,s);if(o.getConstrainedEdgeAcross(s)){var f=o.index(s);throw new r("poly2tri Intersecting Constraints",[s,a,o.getPoint((f+1)%3),o.getPoint((f+2)%3)])}h(s,o.pointCCW(s),o.pointCW(s),a)?(x(o,s,l,a),t.mapTriangleToNodes(o),t.mapTriangleToNodes(l),s===n&&a===e?n===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(o.markConstrainedEdgeByPoints(e,n),l.markConstrainedEdgeByPoints(e,n),g(t,o),g(t,l)):(o=function(t,e,n,i,r,o){var s;return e===u.CCW?(s=i.edgeIndex(r,o),i.delaunay_edge[s]=!0,g(t,i),i.clearDelaunayEdges(),n):(s=n.edgeIndex(r,o),n.delaunay_edge[s]=!0,g(t,n),n.clearDelaunayEdges(),i)}(t,p(n,a,e),o,l,s,a),S(t,e,n,o,s))):(A(t,e,n,o,l,N(e,n,l,a)),y(t,e,n,o,s))}function N(t,e,n,i){var o=p(e,i,t);if(o===u.CW)return n.pointCCW(i);if(o===u.CCW)return n.pointCW(i);throw new r("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,i,t])}function A(t,e,n,r,o,s){var l=o.neighborAcross(s);i(l,"FLIP failed due to missing triangle");var a=l.oppositePoint(o,s);h(n,r.pointCCW(n),r.pointCW(n),a)?S(t,n,a,l,a):A(t,e,n,r,l,N(e,n,l,a))}e.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,n=t.pointCount();for(e=1;e<n;++e)for(var i=t.getPoint(e),r=d(t,i),o=i._p2t_edge_list,s=0;o&&s<o.length;++s)c(t,o[s],r)}(t),function(t){for(var e=t.front().head().next.triangle,n=t.front().head().next.point;!e.getConstrainedEdgeCW(n);)e=e.neighborCCW(n);t.meshClean(e)}(t)}},962:(t,e,n)=>{"use strict";var i=n(7),r=n(709),o=n(381),s=n(980),l=n(776),a=l.Node,u=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new i("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},p=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};p.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var h=function(){this.constrained_edge=null,this.right=!1},f=function(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new p,this.edge_event=new h,this.initEdges(this.points_)};f.prototype.addHole=function(t){this.initEdges(t);var e,n=t.length;for(e=0;e<n;e++)this.points_.push(t[e]);return this},f.prototype.AddHole=f.prototype.addHole,f.prototype.addHoles=function(t){var e,n=t.length;for(e=0;e<n;e++)this.initEdges(t[e]);return this.points_=this.points_.concat.apply(this.points_,t),this},f.prototype.addPoint=function(t){return this.points_.push(t),this},f.prototype.AddPoint=f.prototype.addPoint,f.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},f.prototype.triangulate=function(){return s.triangulate(this),this},f.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},f.prototype.getTriangles=function(){return this.triangles_},f.prototype.GetTriangles=f.prototype.getTriangles,f.prototype.front=function(){return this.front_},f.prototype.pointCount=function(){return this.points_.length},f.prototype.head=function(){return this.head_},f.prototype.setHead=function(t){this.head_=t},f.prototype.tail=function(){return this.tail_},f.prototype.setTail=function(t){this.tail_=t},f.prototype.getMap=function(){return this.map_},f.prototype.initTriangulation=function(){var t,e=this.points_[0].x,n=this.points_[0].x,i=this.points_[0].y,o=this.points_[0].y,s=this.points_.length;for(t=1;t<s;t++){var l=this.points_[t];l.x>e&&(e=l.x),l.x<n&&(n=l.x),l.y>i&&(i=l.y),l.y<o&&(o=l.y)}this.pmin_=new r(n,o),this.pmax_=new r(e,i);var a=.3*(e-n),u=.3*(i-o);this.head_=new r(e+a,o-u),this.tail_=new r(n-a,o-u),this.points_.sort(r.compare)},f.prototype.initEdges=function(t){var e,n=t.length;for(e=0;e<n;++e)this.edge_list.push(new u(t[e],t[(e+1)%n]))},f.prototype.getPoint=function(t){return this.points_[t]},f.prototype.addToMap=function(t){this.map_.push(t)},f.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},f.prototype.createAdvancingFront=function(){var t,e,n,i=new o(this.points_[0],this.tail_,this.head_);this.map_.push(i),t=new a(i.getPoint(1),i),e=new a(i.getPoint(0),i),n=new a(i.getPoint(2)),this.front_=new l(t,n),t.next=e,e.next=n,e.prev=t,n.prev=e},f.prototype.removeNode=function(t){},f.prototype.mapTriangleToNodes=function(t){for(var e=0;e<3;++e)if(!t.getNeighbor(e)){var n=this.front_.locatePoint(t.pointCW(t.getPoint(e)));n&&(n.triangle=t)}},f.prototype.removeFromMap=function(t){var e,n=this.map_,i=n.length;for(e=0;e<i;e++)if(n[e]===t){n.splice(e,1);break}},f.prototype.meshClean=function(t){for(var e,n,i=[t];e=i.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),n=0;n<3;n++)e.constrained_edge[n]||i.push(e.getNeighbor(n))},t.exports=f},381:(t,e,n)=>{"use strict";var i=function(t,e,n){this.points_=[t,e,n],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},r=n(294).toString;i.prototype.toString=function(){return"["+r(this.points_[0])+r(this.points_[1])+r(this.points_[2])+"]"},i.prototype.getPoint=function(t){return this.points_[t]},i.prototype.GetPoint=i.prototype.getPoint,i.prototype.getPoints=function(){return this.points_},i.prototype.getNeighbor=function(t){return this.neighbors_[t]},i.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},i.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},i.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},i.prototype.isInterior=function(){return this.interior_},i.prototype.setInterior=function(t){return this.interior_=t,this},i.prototype.markNeighborPointers=function(t,e,n){var i=this.points_;if(t===i[2]&&e===i[1]||t===i[1]&&e===i[2])this.neighbors_[0]=n;else if(t===i[0]&&e===i[2]||t===i[2]&&e===i[0])this.neighbors_[1]=n;else{if(!(t===i[0]&&e===i[1]||t===i[1]&&e===i[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=n}},i.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t,t.markNeighborPointers(e[1],e[2],this)):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t,t.markNeighborPointers(e[0],e[2],this)):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t,t.markNeighborPointers(e[0],e[1],this))},i.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},i.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},i.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},i.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},i.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},i.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},i.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},i.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},i.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},i.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},i.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},i.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},i.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},i.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},i.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},i.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},i.prototype.oppositePoint=function(t,e){var n=t.pointCW(e);return this.pointCW(n)},i.prototype.legalize=function(t,e){var n=this.points_;if(t===n[0])n[1]=n[0],n[0]=n[2],n[2]=e;else if(t===n[1])n[2]=n[1],n[1]=n[0],n[0]=e;else{if(t!==n[2])throw new Error("poly2tri Invalid Triangle.legalize() call");n[0]=n[2],n[2]=n[1],n[1]=e}},i.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},i.prototype.edgeIndex=function(t,e){var n=this.points_;if(t===n[0]){if(e===n[1])return 2;if(e===n[2])return 1}else if(t===n[1]){if(e===n[2])return 0;if(e===n[0])return 2}else if(t===n[2]){if(e===n[0])return 1;if(e===n[1])return 0}return-1},i.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},i.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},i.prototype.markConstrainedEdgeByPoints=function(t,e){var n=this.points_;e===n[0]&&t===n[1]||e===n[1]&&t===n[0]?this.constrained_edge[2]=!0:e===n[0]&&t===n[2]||e===n[2]&&t===n[0]?this.constrained_edge[1]=!0:(e===n[1]&&t===n[2]||e===n[2]&&t===n[1])&&(this.constrained_edge[0]=!0)},t.exports=i},433:(t,e)=>{"use strict";var n=1e-12;e.EPSILON=n;var i={CW:1,CCW:-1,COLLINEAR:0};e.Orientation=i,e.orient2d=function(t,e,r){var o=(t.x-r.x)*(e.y-r.y)-(t.y-r.y)*(e.x-r.x);return o>-1e-12&&o<n?i.COLLINEAR:o>0?i.CCW:i.CW},e.inScanArea=function(t,e,i,r){return!((t.x-e.x)*(r.y-e.y)-(r.x-e.x)*(t.y-e.y)>=-1e-12||(t.x-i.x)*(r.y-i.y)-(r.x-i.x)*(t.y-i.y)<=n)},e.isAngleObtuse=function(t,e,n){var i=e.x-t.x,r=e.y-t.y;return i*(n.x-t.x)+r*(n.y-t.y)<0}},294:t=>{"use strict";function e(t){return"("+t.x+";"+t.y+")"}t.exports={toString:function(t){var n=t.toString();return"[object Object]"===n?e(t):n},toStringBase:e,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},246:function(t,e,n){window.eve=n(241);var i=function(t){var e,n={},i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16,(new Date).getTime()),!0},r=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},o=0,s="M"+(+new Date).toString(36),l=Date.now||function(){return+new Date},a=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},u=function(t){if(null==t)return this.spd;this.spd=t},p=function(t){var e=this;if(null==t)return e.dur;e.s=e.s*t/e.dur,e.dur=t},h=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},f=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},d=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t,y())},c=function(){var t,e=this;if(r(e.start)){t=[];for(var n=0,i=e.start.length;n<i;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},y=function(r){if(r){var o=0;for(var s in n)if(n.hasOwnProperty(s)){var l=n[s],a=l.get();o++,l.s=(a-l.b)/(l.dur/l.spd),l.s>=1&&(delete n[s],l.s=1,o--,function(e){setTimeout((function(){t("mina.finish."+e.id,e)}))}(l)),l.update()}e=!!o&&i(y)}else e||(e=i(y))},m=function(t,e,i,r,l,v,g){var P={id:s+(o++).toString(36),start:t,end:e,b:i,s:0,dur:r-i,spd:1,get:l,set:v,easing:g||m.linear,status:a,speed:u,duration:p,stop:h,pause:f,resume:d,update:c};n[P.id]=P;var x,C=0;for(x in n)if(n.hasOwnProperty(x)&&2==++C)break;return 1==C&&y(),P};return m.time=l,m.getById=function(t){return n[t]||null},m.linear=function(t){return t},m.easeout=function(t){return Math.pow(t,1.7)},m.easein=function(t){return Math.pow(t,.48)},m.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),i=n-e,r=-n-e,o=Math.pow(Math.abs(i),1/3)*(i<0?-1:1)+Math.pow(Math.abs(r),1/3)*(r<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},m.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},m.backout=function(t){if(0==t)return 0;var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},m.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},m.bounce=function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},window.mina=m,m}("undefined"==typeof eve?function(){}:eve),r=function(t){function e(t,i){if(t){if(t.nodeType)return G(t);if(N(t,"array")&&e.set)return e.set.apply(e,t);if(t instanceof q)return t;if(null==i)try{return G(t=n.doc.querySelector(String(t)))}catch(t){return null}}return new Z(t=null==t?"100%":t,i=null==i?"100%":i)}e.version="0.5.1",e.toString=function(){return"Snap v"+this.version},e._={};var n={win:t.window,doc:t.window.document};e._.glob=n;var i,r,o="hasOwnProperty",s=String,l=parseFloat,a=parseInt,u=Math,p=u.max,h=u.min,f=u.abs,d=(u.pow,u.PI),c=(u.round,Object.prototype.toString),y=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,m=(e._.separator=/[,\s]+/,/[\s]*,[\s]*/),v={hs:1,rg:1},P=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,x=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,C=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,_=0,I="S"+(+new Date).toString(36),E=function(t){return(t&&t.type?t.type:"")+I+(_++).toString(36)},b="http://www.w3.org/1999/xlink",T="http://www.w3.org/2000/svg",L={};function S(t,e){if(e){if("#text"==t&&(t=n.doc.createTextNode(e.text||e["#text"]||"")),"#comment"==t&&(t=n.doc.createComment(e.text||e["#text"]||"")),"string"==typeof t&&(t=S(t)),"string"==typeof e)return 1==t.nodeType?"xlink:"==e.substring(0,6)?t.getAttributeNS(b,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(T,e.substring(4)):t.getAttribute(e):"text"==e?t.nodeValue:null;if(1==t.nodeType){for(var i in e)if(e[o](i)){var r=s(e[i]);r?"xlink:"==i.substring(0,6)?t.setAttributeNS(b,i.substring(6),r):"xml:"==i.substring(0,4)?t.setAttributeNS(T,i.substring(4),r):t.setAttribute(i,r):t.removeAttribute(i)}}else"text"in e&&(t.nodeValue=e.text)}else t=n.doc.createElementNS(T,t);return t}function N(t,e){return"finite"==(e=s.prototype.toLowerCase.call(e))?isFinite(t):!("array"!=e||!(t instanceof Array||Array.isArray&&Array.isArray(t)))||"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||c.call(t).slice(8,-1).toLowerCase()==e}function A(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function F(t,e,n){return function i(){var r=Array.prototype.slice.call(arguments,0),s=r.join("␀"),l=i.cache=i.cache||{},a=i.count=i.count||[];return l[o](s)?(A(a,s),n?n(l[s]):l[s]):(a.length>=1e3&&delete l[a.shift()],a.push(s),l[s]=t.apply(e,r),n?n(l[s]):l[s])}}function w(t){return t%360*d/180}e.url=function(t){return"url('#"+t+"')"},e._.$=S,e._.id=E,e.format=(i=/\{([^\}]+)\}/g,r=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,e){return s(t).replace(i,(function(t,n){return function(t,e,n){var i=n;return e.replace(r,(function(t,e,n,r,o){e=e||r,i&&(e in i&&(i=i[e]),"function"==typeof i&&o&&(i=i()))})),i=(null==i||i==n?t:i)+""}(t,n,e)}))}),e._.clone=function t(e){if("function"==typeof e||Object(e)!==e)return e;var n=new e.constructor;for(var i in e)e[o](i)&&(n[i]=t(e[i]));return n},e._.cacher=F,e.rad=w,e.deg=function(t){return 180*t/d%360},e.sin=function(t){return u.sin(e.rad(t))},e.tan=function(t){return u.tan(e.rad(t))},e.cos=function(t){return u.cos(e.rad(t))},e.asin=function(t){return e.deg(u.asin(t))},e.acos=function(t){return e.deg(u.acos(t))},e.atan=function(t){return e.deg(u.atan(t))},e.atan2=function(t){return e.deg(u.atan2(t))},e.angle=function t(e,n,i,r,o,s){if(null==o){var l=e-i,a=n-r;return l||a?(180+180*u.atan2(-a,-l)/d+360)%360:0}return t(e,n,o,s)-t(i,r,o,s)},e.len=function(t,n,i,r){return Math.sqrt(e.len2(t,n,i,r))},e.len2=function(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i)},e.closestPoint=function(t,e,n){function i(t){var i=t.x-e,r=t.y-n;return i*i+r*r}for(var r,o,s,l,a=t.node,u=a.getTotalLength(),p=u/a.pathSegList.numberOfItems*.125,h=1/0,f=0;f<=u;f+=p)(l=i(s=a.getPointAtLength(f)))<h&&(r=s,o=f,h=l);for(p*=.5;p>.5;){var d,c,y,m,v,g;(y=o-p)>=0&&(v=i(d=a.getPointAtLength(y)))<h?(r=d,o=y,h=v):(m=o+p)<=u&&(g=i(c=a.getPointAtLength(m)))<h?(r=c,o=m,h=g):p*=.5}return{x:r.x,y:r.y,length:o,distance:Math.sqrt(h)}},e.is=N,e.snapTo=function(t,e,n){if(n=N(n,"finite")?n:10,N(t,"array")){for(var i=t.length;i--;)if(f(t[i]-e)<=n)return t[i]}else{var r=e%(t=+t);if(r<n)return e-r;if(r>t-n)return e-r+t}return e},e.getRGB=F((function(t){if(!t||(t=s(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Y};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:Y};if(!v[o](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=B(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Y};var n,i,r,f,d,c,g=t.match(y);return g?(g[2]&&(r=a(g[2].substring(5),16),i=a(g[2].substring(3,5),16),n=a(g[2].substring(1,3),16)),g[3]&&(r=a((d=g[3].charAt(3))+d,16),i=a((d=g[3].charAt(2))+d,16),n=a((d=g[3].charAt(1))+d,16)),g[4]&&(c=g[4].split(m),n=l(c[0]),"%"==c[0].slice(-1)&&(n*=2.55),i=l(c[1]),"%"==c[1].slice(-1)&&(i*=2.55),r=l(c[2]),"%"==c[2].slice(-1)&&(r*=2.55),"rgba"==g[1].toLowerCase().slice(0,4)&&(f=l(c[3])),c[3]&&"%"==c[3].slice(-1)&&(f/=100)),g[5]?(c=g[5].split(m),n=l(c[0]),"%"==c[0].slice(-1)&&(n/=100),i=l(c[1]),"%"==c[1].slice(-1)&&(i/=100),r=l(c[2]),"%"==c[2].slice(-1)&&(r/=100),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(n/=360),"hsba"==g[1].toLowerCase().slice(0,4)&&(f=l(c[3])),c[3]&&"%"==c[3].slice(-1)&&(f/=100),e.hsb2rgb(n,i,r,f)):g[6]?(c=g[6].split(m),n=l(c[0]),"%"==c[0].slice(-1)&&(n/=100),i=l(c[1]),"%"==c[1].slice(-1)&&(i/=100),r=l(c[2]),"%"==c[2].slice(-1)&&(r/=100),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(n/=360),"hsla"==g[1].toLowerCase().slice(0,4)&&(f=l(c[3])),c[3]&&"%"==c[3].slice(-1)&&(f/=100),e.hsl2rgb(n,i,r,f)):(n=h(u.round(n),255),i=h(u.round(i),255),r=h(u.round(r),255),f=h(p(f,0),1),(g={r:n,g:i,b:r,toString:Y}).hex="#"+(16777216|r|i<<8|n<<16).toString(16).slice(1),g.opacity=N(f,"finite")?f:1,g)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Y}}),e),e.hsb=F((function(t,n,i){return e.hsb2rgb(t,n,i).hex})),e.hsl=F((function(t,n,i){return e.hsl2rgb(t,n,i).hex})),e.rgb=F((function(t,e,n,i){if(N(i,"finite")){var r=u.round;return"rgba("+[r(t),r(e),r(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}));var B=function(t){var e=n.doc.getElementsByTagName("head")[0]||n.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return B=F((function(t){if("red"==t.toLowerCase())return i;e.style.color=i,e.style.color=t;var r=n.doc.defaultView.getComputedStyle(e,"").getPropertyValue("color");return r==i?null:r})),B(t)},O=function(){return"hsb("+[this.h,this.s,this.b]+")"},X=function(){return"hsl("+[this.h,this.s,this.l]+")"},Y=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(t,n,i){if(null==n&&N(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,n=t.g,t=t.r),null==n&&N(t,string)){var r=e.getRGB(t);t=r.r,n=r.g,i=r.b}return(t>1||n>1||i>1)&&(t/=255,n/=255,i/=255),[t,n,i]},M=function(t,n,i,r){var o={r:t=u.round(255*t),g:n=u.round(255*n),b:i=u.round(255*i),opacity:N(r,"finite")?r:1,hex:e.rgb(t,n,i),toString:Y};return N(r,"finite")&&(o.opacity=r),o};e.color=function(t){var n;return N(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):N(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):(N(t,"string")&&(t=e.getRGB(t)),N(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):((t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=Y,t},e.hsb2rgb=function(t,e,n,i){var r,o,s,l,a;return N(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,i=t.o,t=t.h),l=(a=n*e)*(1-f((t=(t*=360)%360/60)%2-1)),r=o=s=n-a,M(r+=[a,l,0,0,l,a][t=~~t],o+=[l,a,a,l,0,0][t],s+=[0,0,l,a,a,l][t],i)},e.hsl2rgb=function(t,e,n,i){var r,o,s,l,a;return N(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),l=(a=2*e*(n<.5?n:1-n))*(1-f((t=(t*=360)%360/60)%2-1)),r=o=s=n-a/2,M(r+=[a,l,0,0,l,a][t=~~t],o+=[l,a,a,l,0,0][t],s+=[0,0,l,a,a,l][t],i)},e.rgb2hsb=function(t,e,n){var i,r;return t=(n=D(t,e,n))[0],e=n[1],n=n[2],{h:((0==(r=(i=p(t,e,n))-h(t,e,n))?null:i==t?(e-n)/r:i==e?(n-t)/r+2:(t-e)/r+4)+360)%6*60/360,s:0==r?0:r/i,b:i,toString:O}},e.rgb2hsl=function(t,e,n){var i,r,o,s;return t=(n=D(t,e,n))[0],e=n[1],n=n[2],i=((r=p(t,e,n))+(o=h(t,e,n)))/2,{h:((0==(s=r-o)?null:r==t?(e-n)/s:r==e?(n-t)/s+2:(t-e)/s+4)+360)%6*60/360,s:0==s?0:i<.5?s/(2*i):s/(2-2*i),l:i,toString:X}},e.parsePathString=function(t){if(!t)return null;var n=e.path(t);if(n.arr)return e.path.clone(n.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return N(t,"array")&&N(t[0],"array")&&(r=e.path.clone(t)),r.length||s(t).replace(P,(function(t,e,n){var o=[],s=e.toLowerCase();if(n.replace(C,(function(t,e){e&&o.push(+e)})),"m"==s&&o.length>2&&(r.push([e].concat(o.splice(0,2))),s="l",e="m"==e?"l":"L"),"o"==s&&1==o.length&&r.push([e,o[0]]),"r"==s)r.push([e].concat(o));else for(;o.length>=i[s]&&(r.push([e].concat(o.splice(0,i[s]))),i[s]););})),r.toString=e.path.toString,n.arr=e.path.clone(r),r};var R=e.parseTransformString=function(t){if(!t)return null;var n=[];return N(t,"array")&&N(t[0],"array")&&(n=e.path.clone(t)),n.length||s(t).replace(x,(function(t,e,i){var r=[];e.toLowerCase(),i.replace(C,(function(t,e){e&&r.push(+e)})),n.push([e].concat(r))})),n.toString=e.path.toString,n};function W(t){return t.node.ownerSVGElement&&G(t.node.ownerSVGElement)||e.select("svg")}function k(t){N(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach((function(t){i.appendChild(t.node)})):i.appendChild(t[e].node);var r=i.childNodes;for(e=0;e<r.length;e++)this[n++]=G(r[e]);return this}function q(t){if(t.snap in L)return L[t.snap];var e;try{e=t.ownerSVGElement}catch(t){}this.node=t,e&&(this.paper=new Z(e)),this.type=t.tagName||t.nodeName;var n=this.id=E(this);if(this.anims={},this._={transform:[]},t.snap=n,L[n]=this,"g"==this.type&&(this.add=k),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var i in Z.prototype)Z.prototype[o](i)&&(this[i]=Z.prototype[i])}function z(t){this.node=t}function j(t,e){var n=S(t);return e.appendChild(n),G(n)}function Z(t,e){var i,r,s,l=Z.prototype;if(t&&t.tagName&&"svg"==t.tagName.toLowerCase()){if(t.snap in L)return L[t.snap];var a=t.ownerDocument;for(var u in i=new q(t),r=t.getElementsByTagName("desc")[0],s=t.getElementsByTagName("defs")[0],r||((r=S("desc")).appendChild(a.createTextNode("Created with Snap")),i.node.appendChild(r)),s||(s=S("defs"),i.node.appendChild(s)),i.defs=s,l)l[o](u)&&(i[u]=l[u]);i.paper=i.root=i}else S((i=j("svg",n.doc.body)).node,{height:e,version:1.1,width:t,xmlns:T});return i}function G(t){return t?t instanceof q||t instanceof z?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new Z(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new Z(t.contentDocument.getElementsByTagName("svg")[0]):new q(t):t}function U(t,e){for(var n=0,i=t.length;n<i;n++){var r={type:t[n].type,attr:t[n].attr()},o=t[n].children();e.push(r),o.length&&U(o,r.childNodes=[])}}e._.svgTransform2string=function(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,(function(t,n,i){return i=i.split(/\s*,\s*|\s+/),"rotate"==n&&1==i.length&&i.push(0,0),"scale"==n&&(i.length>2?i=i.slice(0,2):2==i.length&&i.push(0,0),1==i.length&&i.push(i[0],0,0)),"skewX"==n?e.push(["m",1,0,u.tan(w(i[0])),1,0,0]):"skewY"==n?e.push(["m",1,u.tan(w(i[0])),0,1,0,0]):e.push([n.charAt(0)].concat(i)),t})),e},e._.rgTransform=/^[a-z][\s]*-?\.?\d/i,e._.transform2matrix=function(t,n){var i=R(t),r=new e.Matrix;if(i)for(var o=0,l=i.length;o<l;o++){var a,u,p,h,f,d=i[o],c=d.length,y=s(d[0]).toLowerCase(),m=d[0]!=y,v=m?r.invert():0;"t"==y&&2==c?r.translate(d[1],0):"t"==y&&3==c?m?(a=v.x(0,0),u=v.y(0,0),p=v.x(d[1],d[2]),h=v.y(d[1],d[2]),r.translate(p-a,h-u)):r.translate(d[1],d[2]):"r"==y?2==c?(f=f||n,r.rotate(d[1],f.x+f.width/2,f.y+f.height/2)):4==c&&(m?(p=v.x(d[2],d[3]),h=v.y(d[2],d[3]),r.rotate(d[1],p,h)):r.rotate(d[1],d[2],d[3])):"s"==y?2==c||3==c?(f=f||n,r.scale(d[1],d[c-1],f.x+f.width/2,f.y+f.height/2)):4==c?m?(p=v.x(d[2],d[3]),h=v.y(d[2],d[3]),r.scale(d[1],d[1],p,h)):r.scale(d[1],d[1],d[2],d[3]):5==c&&(m?(p=v.x(d[3],d[4]),h=v.y(d[3],d[4]),r.scale(d[1],d[2],p,h)):r.scale(d[1],d[2],d[3],d[4])):"m"==y&&7==c&&r.add(d[1],d[2],d[3],d[4],d[5],d[6])}return r},e._unit2px=function(t,e,n){var i=W(t).node,r={},o=i.querySelector(".svg---mgr");function s(t){if(null==t)return"";if(t==+t)return t;S(o,{width:t});try{return o.getBBox().width}catch(t){return 0}}function l(t){if(null==t)return"";if(t==+t)return t;S(o,{height:t});try{return o.getBBox().height}catch(t){return 0}}function a(i,o){null==e?r[i]=o(t.attr(i)||0):i==e&&(r=o(null==n?t.attr(i)||0:n))}switch(o||(o=S("rect"),S(o,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),i.appendChild(o)),t.type){case"rect":a("rx",s),a("ry",l);case"image":a("width",s),a("height",l);case"text":a("x",s),a("y",l);break;case"circle":a("cx",s),a("cy",l),a("r",s);break;case"ellipse":a("cx",s),a("cy",l),a("rx",s),a("ry",l);break;case"line":a("x1",s),a("x2",s),a("y1",l),a("y2",l);break;case"marker":a("refX",s),a("markerWidth",s),a("refY",l),a("markerHeight",l);break;case"radialGradient":a("fx",s),a("fy",l);break;case"tspan":a("dx",s),a("dy",l);break;default:a(e,s)}return i.removeChild(o),r},n.doc.contains||n.doc.compareDocumentPosition,e._.getSomeDefs=function(t){var n=t.node.ownerSVGElement&&G(t.node.ownerSVGElement)||t.node.parentNode&&G(t.node.parentNode)||e.select("svg")||e(0,0),i=n.select("defs"),r=null!=i&&i.node;return r||(r=j("defs",n.node).node),r},e._.getSomeSVG=W,e.select=function(t){return t=s(t).replace(/([^\\]):/g,"$1\\:"),G(n.doc.querySelector(t))},e.selectAll=function(t){for(var i=n.doc.querySelectorAll(t),r=(e.set||Array)(),o=0;o<i.length;o++)r.push(G(i[o]));return r},setInterval((function(){for(var t in L)if(L[o](t)){var e=L[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete L[t]}}),1e4),q.prototype.attr=function(t,e){var n=this,i=n.node;if(!t){if(1!=i.nodeType)return{text:i.nodeValue};for(var r=i.attributes,s={},l=0,a=r.length;l<a;l++)s[r[l].nodeName]=r[l].nodeValue;return s}if(N(t,"string")){if(!(arguments.length>1))return eve("snap.util.getattr."+t,n).firstDefined();var u={};u[t]=e,t=u}for(var p in t)t[o](p)&&eve("snap.util.attr."+p,n,t[p]);return n},e.parse=function(t){var e=n.doc.createDocumentFragment(),i=!0,r=n.doc.createElement("div");if((t=s(t)).match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",i=!1),r.innerHTML=t,t=r.getElementsByTagName("svg")[0])if(i)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return new z(e)},e.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),i=n.doc.createDocumentFragment(),r=0,o=t.length;r<o;r++){var s=t[r];s.node&&s.node.nodeType&&i.appendChild(s.node),s.nodeType&&i.appendChild(s),"string"==typeof s&&i.appendChild(e.parse(s).node)}return new z(i)},e._.make=j,e._.wrap=G,Z.prototype.el=function(t,e){var n=j(t,this.node);return e&&n.attr(e),n},q.prototype.children=function(){for(var t=[],n=this.node.childNodes,i=0,r=n.length;i<r;i++)t[i]=e(n[i]);return t},q.prototype.toJSON=function(){var t=[];return U([this],t),t[0]},eve.on("snap.util.getattr",(function(){var t=eve.nt(),e=(t=t.substring(t.lastIndexOf(".")+1)).replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));return H[o](e)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(e):S(this.node,t)}));var H={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};return eve.on("snap.util.attr",(function(t){var e=eve.nt(),n={};n[e=e.substring(e.lastIndexOf(".")+1)]=t;var i=e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()})),r=e.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));H[o](r)?this.node.style[i]=null==t?"":t:S(this.node,n)})),Z.prototype,e.ajax=function(t,e,n,i){var r=new XMLHttpRequest,o=E();if(r){if(N(e,"function"))i=n,n=e,e=null;else if(N(e,"object")){var s=[];for(var l in e)e.hasOwnProperty(l)&&s.push(encodeURIComponent(l)+"="+encodeURIComponent(e[l]));e=s.join("&")}return r.open(e?"POST":"GET",t,!0),e&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(eve.once("snap.ajax."+o+".0",n),eve.once("snap.ajax."+o+".200",n),eve.once("snap.ajax."+o+".304",n)),r.onreadystatechange=function(){4==r.readyState&&eve("snap.ajax."+o+"."+r.status,i,r)},4==r.readyState||r.send(e),r}},e.load=function(t,n,i){e.ajax(t,(function(t){var r=e.parse(t.responseText);i?n.call(i,r):n(r)}))},e.getElementByPoint=function(t,e){this.canvas;var i,r,o,s,l,a,u,p=n.doc.elementFromPoint(t,e);if(n.win.opera&&"svg"==p.tagName){var h=(r=(i=p).getBoundingClientRect(),s=(o=i.ownerDocument).body,a=(l=o.documentElement).clientTop||s.clientTop||0,u=l.clientLeft||s.clientLeft||0,{y:r.top+(g.win.pageYOffset||l.scrollTop||s.scrollTop)-a,x:r.left+(g.win.pageXOffset||l.scrollLeft||s.scrollLeft)-u}),f=p.createSVGRect();f.x=t-h.x,f.y=e-h.y,f.width=f.height=1;var d=p.getIntersectionList(f,null);d.length&&(p=d[d.length-1])}return p?G(p):null},e.plugin=function(t){t(e,q,Z,n,z)},n.win.Snap=e,e}(window||this);r.plugin((function(t,e,n,i,r){var o=e.prototype,s=t.is,l=String,a=t._unit2px,u=t._.$,p=t._.make,h=t._.getSomeDefs,f="hasOwnProperty",d=t._.wrap;o.getBBox=function(e){if("tspan"==this.type)return t._.box(this.node.getClientRects().item(0));if(!t.Matrix||!t.path)return this.node.getBBox();var n=this,i=new t.Matrix;if(n.removed)return t._.box();for(;"use"==n.type;)if(e||(i=i.add(n.transform().localMatrix.translate(n.attr("x")||0,n.attr("y")||0))),n.original)n=n.original;else{var r=n.attr("xlink:href");n=n.original=n.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var o=n._,s=t.path.get[n.type]||t.path.get.deflt;try{return e?(o.bboxwt=s?t.path.getBBox(n.realPath=s(n)):t._.box(n.node.getBBox()),t._.box(o.bboxwt)):(n.realPath=s(n),n.matrix=n.transform().localMatrix,o.bbox=t.path.getBBox(t.path.map(n.realPath,i.add(n.matrix))),t._.box(o.bbox))}catch(e){return t._.box()}};var c=function(){return this.string};function y(e,n){if(null==n){var i=!0;if(!(n="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new t.Matrix;n=t._.svgTransform2string(n)}else n=t._.rgTransform.test(n)?l(n).replace(/\.{3}|\u2026/g,e._.transform||""):t._.svgTransform2string(n),s(n,"array")&&(n=t.path?t.path.toString.call(n):l(n)),e._.transform=n;var r=t._.transform2matrix(n,e.getBBox(1));if(i)return r;e.matrix=r}o.transform=function(e){var n=this._;if(null==e){for(var i,r=this,o=new t.Matrix(this.node.getCTM()),s=y(this),a=[s],p=new t.Matrix,h=s.toTransformString(),f=l(s)==l(this.matrix)?l(n.transform):h;"svg"!=r.type&&(r=r.parent());)a.push(y(r));for(i=a.length;i--;)p.add(a[i]);return{string:f,globalMatrix:o,totalMatrix:p,localMatrix:s,diffMatrix:o.clone().add(s.invert()),global:o.toTransformString(),total:p.toTransformString(),local:h,toString:c}}return e instanceof t.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):y(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?u(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?u(this.node,{patternTransform:this.matrix}):u(this.node,{transform:this.matrix})),this},o.parent=function(){return d(this.node.parentNode)},o.append=o.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach((function(t){e.add(t)})),this}t=d(t),this.node.appendChild(t.node),t.paper=this.paper}return this},o.appendTo=function(t){return t&&(t=d(t)).append(this),this},o.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach((function(t){e?e.after(t):n.prepend(t),e=t})),this}var i=(t=d(t)).parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),i&&i.add()}return this},o.prependTo=function(t){return(t=d(t)).prepend(this),this},o.before=function(t){if("set"==t.type){var e=this;return t.forEach((function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()})),this.parent().add(),this}var n=(t=d(t)).parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},o.after=function(t){var e=(t=d(t)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},o.insertBefore=function(t){t=d(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},o.insertAfter=function(t){t=d(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},o.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},o.select=function(t){return d(this.node.querySelector(t))},o.selectAll=function(e){for(var n=this.node.querySelectorAll(e),i=(t.set||Array)(),r=0;r<n.length;r++)i.push(d(n[r]));return i},o.asPX=function(t,e){return null==e&&(e=this.attr(t)),+a(this,t,e)},o.use=function(){var t,e=this.node.id;return e||(e=this.id,u(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?p(this.type,this.node.parentNode):p("use",this.node.parentNode),u(t.node,{"xlink:href":"#"+e}),t.original=this,t},o.clone=function(){var e=d(this.node.cloneNode(!0));return u(e.node,"id")&&u(e.node,{id:e.id}),function(e){var n,i=e.selectAll("*"),r=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],s={};function l(e,n){var i=u(e.node,n);(i=(i=i&&i.match(r))&&i[2])&&"#"==i.charAt()&&(i=i.substring(1))&&(s[i]=(s[i]||[]).concat((function(i){var r={};r[n]=t.url(i),u(e.node,r)})))}function a(t){var e=u(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1))&&(s[e]=(s[e]||[]).concat((function(e){t.attr("xlink:href","#"+e)})))}for(var p=0,h=i.length;p<h;p++){l(n=i[p],"fill"),l(n,"stroke"),l(n,"filter"),l(n,"mask"),l(n,"clip-path"),a(n);var f=u(n.node,"id");f&&(u(n.node,{id:n.id}),o.push({old:f,id:n.id}))}for(p=0,h=o.length;p<h;p++){var d=s[o[p].old];if(d)for(var c=0,y=d.length;c<y;c++)d[c](o[p].id)}}(e),e.insertAfter(this),e},o.toDefs=function(){return h(this).appendChild(this.node),this},o.pattern=o.toPattern=function(t,e,n,i){var r=p("pattern",h(this));return null==t&&(t=this.getBBox()),s(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,t=t.x),u(r.node,{x:t,y:e,width:n,height:i,patternUnits:"userSpaceOnUse",id:r.id,viewBox:[t,e,n,i].join(" ")}),r.node.appendChild(this.node),r},o.marker=function(t,e,n,i,r,o){var l=p("marker",h(this));return null==t&&(t=this.getBBox()),s(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,r=t.refX||t.cx,o=t.refY||t.cy,t=t.x),u(l.node,{viewBox:[t,e,n,i].join(" "),markerWidth:n,markerHeight:i,orient:"auto",refX:r||0,refY:o||0,id:l.id}),l.node.appendChild(this.node),l};var m={};function v(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,i=this.node.childNodes;if(t)for(var r=0,o=n.length;r<o;r++)e+=" "+n[r].name+'="'+n[r].value.replace(/"/g,'\\"')+'"';if(i.length){for(t&&(e+=">"),r=0,o=i.length;r<o;r++)3==i[r].nodeType?e+=i[r].nodeValue:1==i[r].nodeType&&(e+=d(i[r]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}o.data=function(e,n){var i=m[this.id]=m[this.id]||{};if(0==arguments.length)return eve("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(t.is(e,"object")){for(var r in e)e[f](r)&&this.data(r,e[r]);return this}return eve("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=n,eve("snap.data.set."+this.id,this,n,e),this},o.removeData=function(t){return null==t?m[this.id]={}:m[this.id]&&delete m[this.id][t],this},o.outerSVG=o.toString=v(1),o.innerSVG=v(),o.toDataURL=function(){if(window&&window.btoa){var e=this.getBBox(),n=t.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},r.prototype.select=o.select,r.prototype.selectAll=o.selectAll})),r.plugin((function(t,e,n,i,r){var o=Object.prototype.toString,s=String,l=Math;function a(t,e,n,i,r,s){if(null==e&&"[object SVGMatrix]"==o.call(t))return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,void(this.f=t.f);null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}!function(e){function n(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var e=l.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}e.add=function(t,e,n,i,r,o){if(t&&t instanceof a)return this.add(t.a,t.b,t.c,t.d,t.e,t.f);var s=t*this.a+e*this.c,l=t*this.b+e*this.d;return this.e+=r*this.a+o*this.c,this.f+=r*this.b+o*this.d,this.c=n*this.a+i*this.c,this.d=n*this.b+i*this.d,this.a=s,this.b=l,this},a.prototype.multLeft=function(t,e,n,i,r,o){if(t&&t instanceof a)return this.multLeft(t.a,t.b,t.c,t.d,t.e,t.f);var s=t*this.a+n*this.b,l=t*this.c+n*this.d,u=t*this.e+n*this.f+r;return this.b=e*this.a+i*this.b,this.d=e*this.c+i*this.d,this.f=e*this.e+i*this.f+o,this.a=s,this.c=l,this.e=u,this},e.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new a(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},e.clone=function(){return new a(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(t,e){return this.e+=t*this.a+e*this.c,this.f+=t*this.b+e*this.d,this},e.scale=function(t,e,n,i){return null==e&&(e=t),(n||i)&&this.translate(n,i),this.a*=t,this.b*=t,this.c*=e,this.d*=e,(n||i)&&this.translate(-n,-i),this},e.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var r=+l.cos(e).toFixed(9),o=+l.sin(e).toFixed(9);return this.add(r,o,-o,r,n,i),this.add(1,0,0,1,-n,-i)},e.skewX=function(t){return this.skew(t,0)},e.skewY=function(t){return this.skew(0,t)},e.skew=function(e,n){e=e||0,n=n||0,e=t.rad(e),n=t.rad(n);var i=l.tan(e).toFixed(9),r=l.tan(n).toFixed(9);return this.add(1,r,i,1,0,0)},e.x=function(t,e){return t*this.a+e*this.c+this.e},e.y=function(t,e){return t*this.b+e*this.d+this.f},e.get=function(t){return+this[s.fromCharCode(97+t)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.determinant=function(){return this.a*this.d-this.b*this.c},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var r=[[this.a,this.b],[this.c,this.d]];e.scalex=l.sqrt(n(r[0])),i(r[0]),e.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*e.shear,r[1][1]-r[0][1]*e.shear],e.scaley=l.sqrt(n(r[1])),i(r[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var o=r[0][1],s=r[1][1];return s<0?(e.rotate=t.deg(l.acos(s)),o<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(l.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:"")+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:"")+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:""))}}(a.prototype),t.Matrix=a,t.matrix=function(t,e,n,i,r,o){return new a(t,e,n,i,r,o)}})),r.plugin((function(t,e,n,i,r){var o,s=t._.make,l=t._.wrap,a=t.is,u=t._.getSomeDefs,p=/^url\((['"]?)([^)]+)\1\)$/,h=t._.$,f=t.url,d=String,c=t._.separator;function y(n){return function(i){if(eve.stop(),i instanceof r&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,u(this).appendChild(i),i=l(i)),i instanceof e)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||h(i.node,{id:i.id});var o=f(i.node.id)}else o=i.attr(n);else if((o=t.color(i)).error){var s=t(u(this).ownerSVGElement).gradient(i);s?(s.node.id||h(s.node,{id:s.id}),o=f(s.node.id)):o=i}else o=d(o);var a={};a[n]=o,h(this.node,a),this.node.style[n]=""}}t.deurl=function(t){var e=String(t).match(p);return e?e[2]:t},eve.on("snap.util.attr.mask",(function(t){if(t instanceof e||t instanceof r){if(eve.stop(),t instanceof r&&1==t.node.childNodes.length&&(t=t.node.firstChild,u(this).appendChild(t),t=l(t)),"mask"==t.type)var n=t;else(n=s("mask",u(this))).node.appendChild(t.node);!n.node.id&&h(n.node,{id:n.id}),h(this.node,{mask:f(n.id)})}})),o=function(t){if(t instanceof e||t instanceof r){eve.stop();for(var n,i=t.node;i;){if("clipPath"===i.nodeName){n=new e(i);break}if("svg"===i.nodeName){n=void 0;break}i=i.parentNode}n||((n=s("clipPath",u(this))).node.appendChild(t.node),!n.node.id&&h(n.node,{id:n.id})),h(this.node,{"clip-path":f(n.node.id||n.id)})}},eve.on("snap.util.attr.clip",o),eve.on("snap.util.attr.clip-path",o),eve.on("snap.util.attr.clipPath",o),eve.on("snap.util.attr.fill",y("fill")),eve.on("snap.util.attr.stroke",y("stroke"));var m=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function v(t){eve.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function g(t){for(var e=[],n=t.childNodes,i=0,r=n.length;i<r;i++){var o=n[i];3==o.nodeType&&e.push(o.nodeValue),"tspan"==o.tagName&&(1==o.childNodes.length&&3==o.firstChild.nodeType?e.push(o.firstChild.nodeValue):e.push(g(o)))}return e}function P(){return eve.stop(),this.node.style.fontSize}eve.on("snap.util.grad.parse",(function(t){var e=(t=d(t)).match(m);if(!e)return null;var n=e[1],i=e[2],r=e[3];1==(i=i.split(/\s*,\s*/).map((function(t){return+t==t?+t:t}))).length&&0==i[0]&&(i=[]);var o=(r=(r=r.split("-")).map((function(t){var e={color:(t=t.split(":"))[0]};return t[1]&&(e.offset=parseFloat(t[1])),e}))).length,s=0,l=0;function a(t,e){for(var n=(e-s)/(t-l),i=l;i<t;i++)r[i].offset=+(+s+n*(i-l)).toFixed(2);l=t,s=e}o--;for(var u=0;u<o;u++)"offset"in r[u]&&a(u,r[u].offset);return r[o].offset=r[o].offset||100,a(o,r[o].offset),{type:n,params:i,stops:r}})),eve.on("snap.util.attr.d",(function(e){eve.stop(),a(e,"array")&&a(e[0],"array")&&(e=t.path.toString.call(e)),(e=d(e)).match(/[ruo]/i)&&(e=t.path.toAbsolute(e)),h(this.node,{d:e})}))(-1),eve.on("snap.util.attr.#text",(function(t){eve.stop(),t=d(t);for(var e=i.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(e)}))(-1),eve.on("snap.util.attr.path",(function(t){eve.stop(),this.attr({d:t})}))(-1),eve.on("snap.util.attr.class",(function(t){eve.stop(),this.node.className.baseVal=t}))(-1),eve.on("snap.util.attr.viewBox",(function(t){var e;e=a(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):a(t,"array")?t.join(" "):t,h(this.node,{viewBox:e}),eve.stop()}))(-1),eve.on("snap.util.attr.transform",(function(t){this.transform(t),eve.stop()}))(-1),eve.on("snap.util.attr.r",(function(t){"rect"==this.type&&(eve.stop(),h(this.node,{rx:t,ry:t}))}))(-1),eve.on("snap.util.attr.textpath",(function(t){if(eve.stop(),"text"==this.type){var n,i,r;if(!t&&this.textPath){for(i=this.textPath;i.node.firstChild;)this.node.appendChild(i.node.firstChild);return i.remove(),void delete this.textPath}if(a(t,"string")){var o=u(this),s=l(o.parentNode).path(t);o.appendChild(s.node),n=s.id,s.attr({id:n})}else(t=l(t))instanceof e&&((n=t.attr("id"))||(n=t.id,t.attr({id:n})));if(n)if(i=this.textPath,r=this.node,i)i.attr({"xlink:href":"#"+n});else{for(i=h("textPath",{"xlink:href":"#"+n});r.firstChild;)i.appendChild(r.firstChild);r.appendChild(i),this.textPath=l(i)}}}))(-1),eve.on("snap.util.attr.text",(function(t){if("text"==this.type){for(var e=this.node,n=function(t){var e=h("tspan");if(a(t,"array"))for(var r=0;r<t.length;r++)e.appendChild(n(t[r]));else e.appendChild(i.doc.createTextNode(t));return e.normalize&&e.normalize(),e};e.firstChild;)e.removeChild(e.firstChild);for(var r=n(t);r.firstChild;)e.appendChild(r.firstChild)}eve.stop()}))(-1),eve.on("snap.util.attr.fontSize",v)(-1),eve.on("snap.util.attr.font-size",v)(-1),eve.on("snap.util.getattr.transform",(function(){return eve.stop(),this.transform()}))(-1),eve.on("snap.util.getattr.textpath",(function(){return eve.stop(),this.textPath}))(-1),function(){function e(e){return function(){eve.stop();var n=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==n?n:t(i.doc.getElementById(n.match(p)[1]))}}function n(t){return function(e){eve.stop();var n="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""!=e&&e){if("marker"==e.type){var i=e.node.id;return i||h(e.node,{id:e.id}),void(this.node.style[n]=f(i))}}else this.node.style[n]="none"}}eve.on("snap.util.getattr.marker-end",e("end"))(-1),eve.on("snap.util.getattr.markerEnd",e("end"))(-1),eve.on("snap.util.getattr.marker-start",e("start"))(-1),eve.on("snap.util.getattr.markerStart",e("start"))(-1),eve.on("snap.util.getattr.marker-mid",e("mid"))(-1),eve.on("snap.util.getattr.markerMid",e("mid"))(-1),eve.on("snap.util.attr.marker-end",n("end"))(-1),eve.on("snap.util.attr.markerEnd",n("end"))(-1),eve.on("snap.util.attr.marker-start",n("start"))(-1),eve.on("snap.util.attr.markerStart",n("start"))(-1),eve.on("snap.util.attr.marker-mid",n("mid"))(-1),eve.on("snap.util.attr.markerMid",n("mid"))(-1)}(),eve.on("snap.util.getattr.r",(function(){if("rect"==this.type&&h(this.node,"rx")==h(this.node,"ry"))return eve.stop(),h(this.node,"rx")}))(-1),eve.on("snap.util.getattr.text",(function(){if("text"==this.type||"tspan"==this.type){eve.stop();var t=g(this.node);return 1==t.length?t[0]:t}}))(-1),eve.on("snap.util.getattr.#text",(function(){return this.node.textContent}))(-1),eve.on("snap.util.getattr.fill",(function(e){if(!e){eve.stop();var n=eve("snap.util.getattr.fill",this,!0).firstDefined();return t(t.deurl(n))||n}}))(-1),eve.on("snap.util.getattr.stroke",(function(e){if(!e){eve.stop();var n=eve("snap.util.getattr.stroke",this,!0).firstDefined();return t(t.deurl(n))||n}}))(-1),eve.on("snap.util.getattr.viewBox",(function(){eve.stop();var e=h(this.node,"viewBox");return e?(e=e.split(c),t._.box(+e[0],+e[1],+e[2],+e[3])):void 0}))(-1),eve.on("snap.util.getattr.points",(function(){var t=h(this.node,"points");return eve.stop(),t?t.split(c):void 0}))(-1),eve.on("snap.util.getattr.path",(function(){var t=h(this.node,"d");return eve.stop(),t}))(-1),eve.on("snap.util.getattr.class",(function(){return this.node.className.baseVal}))(-1),eve.on("snap.util.getattr.fontSize",P)(-1),eve.on("snap.util.getattr.font-size",P)(-1)})),r.plugin((function(t,e,n,i,r){var o=/\S+/g,s=String,l=e.prototype;l.addClass=function(t){var e,n,i,r=s(t||"").match(o)||[],l=this.node,a=l.className.baseVal,u=a.match(o)||[];if(r.length){for(e=0;n=r[e++];)~u.indexOf(n)||u.push(n);a!=(i=u.join(" "))&&(l.className.baseVal=i)}return this},l.removeClass=function(t){var e,n,i,r,l=s(t||"").match(o)||[],a=this.node,u=a.className.baseVal,p=u.match(o)||[];if(p.length){for(e=0;i=l[e++];)~(n=p.indexOf(i))&&p.splice(n,1);u!=(r=p.join(" "))&&(a.className.baseVal=r)}return this},l.hasClass=function(t){return!!~(this.node.className.baseVal.match(o)||[]).indexOf(t)},l.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var n,i,r,s,l=(t||"").match(o)||[],a=this.node,u=a.className.baseVal,p=u.match(o)||[];for(n=0;r=l[n++];)~(i=p.indexOf(r))?p.splice(i,1):p.push(r);return u!=(s=p.join(" "))&&(a.className.baseVal=s),this}})),r.plugin((function(t,e,n,i,r){var o={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e}},s=String,l=/[a-z]+$/i,a=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function u(t){return t}function p(t){return function(e){return+e.toFixed(3)+t}}eve.on("snap.util.attr",(function(t){var e=s(t).match(a);if(e){var n=eve.nt(),i=n.substring(n.lastIndexOf(".")+1),r=this.attr(i),u={};eve.stop();var p=e[3]||"",h=r.match(l),f=o[e[1]];if(h&&h==p?t=f(parseFloat(r),+e[2]):(r=this.asPX(i),t=f(this.asPX(i),this.asPX(i,e[2]+p))),isNaN(r)||isNaN(t))return;u[i]=t,this.attr(u)}}))(-10),eve.on("snap.util.equal",(function(t,e){var n=s(this.attr(t)||""),i=s(e).match(a);if(i){eve.stop();var r=i[3]||"",h=n.match(l),f=o[i[1]];return h&&h==r?{from:parseFloat(n),to:f(parseFloat(n),+i[2]),f:p(h)}:{from:n=this.asPX(t),to:f(n,this.asPX(t,i[2]+r)),f:u}}}))(-10)})),r.plugin((function(t,e,n,i,r){var o=n.prototype,s=t.is;o.rect=function(t,e,n,i,r,o){var l;return null==o&&(o=r),s(t,"object")&&"[object Object]"==t?l=t:null!=t&&(l={x:t,y:e,width:n,height:i},null!=r&&(l.rx=r,l.ry=o)),this.el("rect",l)},o.circle=function(t,e,n){var i;return s(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,r:n}),this.el("circle",i)};var l=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var r=i.doc.createElement("img"),o=i.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){n.call(r),r.onload=r.onerror=null,o.removeChild(r)},r.onerror=t,o.appendChild(r),r.src=e}}();o.image=function(e,n,i,r,o){var a=this.el("image");if(s(e,"object")&&"src"in e)a.attr(e);else if(null!=e){var u={"xlink:href":e,preserveAspectRatio:"none"};null!=n&&null!=i&&(u.x=n,u.y=i),null!=r&&null!=o?(u.width=r,u.height=o):l(e,(function(){t._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})})),t._.$(a.node,u)}return a},o.ellipse=function(t,e,n,i){var r;return s(t,"object")&&"[object Object]"==t?r=t:null!=t&&(r={cx:t,cy:e,rx:n,ry:i}),this.el("ellipse",r)},o.path=function(t){var e;return s(t,"object")&&!s(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},o.group=o.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.svg=function(t,e,n,i,r,o,l,a){var u={};return s(t,"object")&&null==e?u=t:(null!=t&&(u.x=t),null!=e&&(u.y=e),null!=n&&(u.width=n),null!=i&&(u.height=i),null!=r&&null!=o&&null!=l&&null!=a&&(u.viewBox=[r,o,l,a])),this.el("svg",u)},o.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.ptrn=function(t,e,n,i,r,o,l,a){if(s(t,"object"))var u=t;else u={patternUnits:"userSpaceOnUse"},t&&(u.x=t),e&&(u.y=e),null!=n&&(u.width=n),null!=i&&(u.height=i),u.viewBox=null!=r&&null!=o&&null!=l&&null!=a?[r,o,l,a]:[t||0,e||0,n||0,i||0];return this.el("pattern",u)},o.use=function(n){return null!=n?(n instanceof e&&(n.attr("id")||n.attr({id:t._.id(n)}),n=n.attr("id")),"#"==String(n).charAt()&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):e.prototype.use.call(this)},o.symbol=function(t,e,n,i){var r={};return null!=t&&null!=e&&null!=n&&null!=i&&(r.viewBox=[t,e,n,i]),this.el("symbol",r)},o.text=function(t,e,n){var i={};return s(t,"object")?i=t:null!=t&&(i={x:t,y:e,text:n||""}),this.el("text",i)},o.line=function(t,e,n,i){var r={};return s(t,"object")?r=t:null!=t&&(r={x1:t,x2:n,y1:e,y2:i}),this.el("line",r)},o.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return s(t,"object")&&!s(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},o.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return s(t,"object")&&!s(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){var e=t._.$;function n(){return this.selectAll("stop")}function i(n,i){var r=e("stop"),o={offset:+i+"%"};n=t.color(n),o["stop-color"]=n.hex,n.opacity<1&&(o["stop-opacity"]=n.opacity),e(r,o);for(var s,l=this.stops(),a=0;a<l.length;a++)if(parseFloat(l[a].attr("offset"))>i){this.node.insertBefore(r,l[a].node),s=!0;break}return s||this.node.appendChild(r),this}function r(){if("linearGradient"==this.type){var n=e(this.node,"x1")||0,i=e(this.node,"x2")||1,r=e(this.node,"y1")||0,o=e(this.node,"y2")||0;return t._.box(n,r,math.abs(i-n),math.abs(o-r))}var s=this.node.cx||.5,l=this.node.cy||.5,a=this.node.r||0;return t._.box(s-a,l-a,2*a,2*a)}function s(e){var n=e,i=this.stops();if("string"==typeof e&&(n=eve("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),t.is(n,"array")){for(var r=0;r<i.length;r++)if(n[r]){var o=t.color(n[r].color),s={offset:n[r].offset+"%"};s["stop-color"]=o.hex,o.opacity<1&&(s["stop-opacity"]=o.opacity),i[r].attr(s)}else i[r].remove();for(r=i.length;r<n.length;r++)this.addStop(n[r].color,n[r].offset);return this}}function l(o,l,a,u,p){var h=t._.make("linearGradient",o);return h.stops=n,h.addStop=i,h.getBBox=r,h.setStops=s,null!=l&&e(h.node,{x1:l,y1:a,x2:u,y2:p}),h}function a(o,s,l,a,u,p){var h=t._.make("radialGradient",o);return h.stops=n,h.addStop=i,h.getBBox=r,null!=s&&e(h.node,{cx:s,cy:l,r:a}),null!=u&&null!=p&&e(h.node,{fx:u,fy:p}),h}o.gradient=function(t){return function(t,n){var i,r=eve("snap.util.grad.parse",null,n).firstDefined();if(!r)return null;r.params.unshift(t),i="l"==r.type.toLowerCase()?l.apply(0,r.params):a.apply(0,r.params),r.type!=r.type.toLowerCase()&&e(i.node,{gradientUnits:"userSpaceOnUse"});for(var o=r.stops,s=o.length,u=0;u<s;u++){var p=o[u];i.addStop(p.color,p.offset)}return i}(this.defs,t)},o.gradientLinear=function(t,e,n,i){return l(this.defs,t,e,n,i)},o.gradientRadial=function(t,e,n,i,r){return a(this.defs,t,e,n,i,r)},o.toString=function(){var e,n=this.node.ownerDocument,i=n.createDocumentFragment(),r=n.createElement("div"),o=this.node.cloneNode(!0);return i.appendChild(r),r.appendChild(o),t._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=r.innerHTML,i.removeChild(i.firstChild),e},o.toDataURL=function(){if(window&&window.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},o.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):o.clear.call({node:e}),e=t}}()})),r.plugin((function(t,e,n,i){var r=e.prototype,o=t.is,s=t._.clone,l=/,?([a-z]),?/gi,a=parseFloat,u=Math,p=u.PI,h=u.min,f=u.max,d=u.pow,c=u.abs;function y(t){var e=y.ps=y.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var n in e)e.hasOwnProperty(n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])})),e[t]}function m(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:u.min(n,i)/2,r2:u.max(n,i)/2,r0:u.sqrt(n*n+i*i)/2,path:O(t,e,n,i),vb:[t,e,n,i].join(" ")}}function v(){return this.join(",").replace(l,"$1")}function g(t){var e=s(t);return e.toString=v,e}function P(t,e,n,i,r,o,s,l,a){return null==a?N(t,e,n,i,r,o,s,l):E(t,e,n,i,r,o,s,l,function(t,e,n,i,r,o,s,l,a){if(!(a<0||N(t,e,n,i,r,o,s,l)<a)){var u,p=.5,h=1-p;for(u=N(t,e,n,i,r,o,s,l,h);c(u-a)>.01;)u=N(t,e,n,i,r,o,s,l,h+=(u<a?1:-1)*(p/=2));return h}}(t,e,n,i,r,o,s,l,a))}function x(n,i){function r(t){return+(+t).toFixed(3)}return t._.cacher((function(t,o,s){t instanceof e&&(t=t.attr("d"));for(var l,a,u,p,h,f="",d={},c=0,y=0,m=(t=z(t)).length;y<m;y++){if("M"==(u=t[y])[0])l=+u[1],a=+u[2];else{if(c+(p=P(l,a,u[1],u[2],u[3],u[4],u[5],u[6]))>o){if(i&&!d.start){if(f+=["C"+r((h=P(l,a,u[1],u[2],u[3],u[4],u[5],u[6],o-c)).start.x),r(h.start.y),r(h.m.x),r(h.m.y),r(h.x),r(h.y)],s)return f;d.start=f,f=["M"+r(h.x),r(h.y)+"C"+r(h.n.x),r(h.n.y),r(h.end.x),r(h.end.y),r(u[5]),r(u[6])].join(),c+=p,l=+u[5],a=+u[6];continue}if(!n&&!i)return P(l,a,u[1],u[2],u[3],u[4],u[5],u[6],o-c)}c+=p,l=+u[5],a=+u[6]}f+=u.shift()+u}return d.end=f,n?c:i?d:E(l,a,u[0],u[1],u[2],u[3],u[4],u[5],1)}),null,t._.clone)}var C=x(1),_=x(),I=x(0,1);function E(t,e,n,i,r,o,s,l,a){var h=1-a,f=d(h,3),c=d(h,2),y=a*a,m=y*a,v=t+2*a*(n-t)+y*(r-2*n+t),g=e+2*a*(i-e)+y*(o-2*i+e),P=n+2*a*(r-n)+y*(s-2*r+n),x=i+2*a*(o-i)+y*(l-2*o+i);return{x:f*t+3*c*a*n+3*h*a*a*r+m*s,y:f*e+3*c*a*i+3*h*a*a*o+m*l,m:{x:v,y:g},n:{x:P,y:x},start:{x:h*t+a*n,y:h*e+a*i},end:{x:h*r+a*s,y:h*o+a*l},alpha:90-180*u.atan2(v-P,g-x)/p}}function b(e,n,i,r,o,s,l,a){t.is(e,"array")||(e=[e,n,i,r,o,s,l,a]);var u=q.apply(null,e);return m(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function T(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function L(t,e){return t=m(t),T(e=m(e),t.x,t.y)||T(e,t.x2,t.y)||T(e,t.x,t.y2)||T(e,t.x2,t.y2)||T(t,e.x,e.y)||T(t,e.x2,e.y)||T(t,e.x,e.y2)||T(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function S(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function N(t,e,n,i,r,o,s,l,a){null==a&&(a=1);for(var p=(a=a>1?1:a<0?0:a)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,c=0;c<12;c++){var y=p*h[c]+p,m=S(y,t,n,r,s),v=S(y,e,i,o,l),g=m*m+v*v;d+=f[c]*u.sqrt(g)}return p*d}function A(t,e,n,i,r,o,s,l){if(!(f(t,n)<h(r,s)||h(t,n)>f(r,s)||f(e,i)<h(o,l)||h(e,i)>f(o,l))){var a=(t-n)*(o-l)-(e-i)*(r-s);if(a){var u=((t*i-e*n)*(r-s)-(t-n)*(r*l-o*s))/a,p=((t*i-e*n)*(o-l)-(e-i)*(r*l-o*s))/a,d=+u.toFixed(2),c=+p.toFixed(2);if(!(d<+h(t,n).toFixed(2)||d>+f(t,n).toFixed(2)||d<+h(r,s).toFixed(2)||d>+f(r,s).toFixed(2)||c<+h(e,i).toFixed(2)||c>+f(e,i).toFixed(2)||c<+h(o,l).toFixed(2)||c>+f(o,l).toFixed(2)))return{x:u,y:p}}}}function F(t,e,n){if(!L(b(t),b(e)))return n?0:[];for(var i=~~(N.apply(0,t)/8),r=~~(N.apply(0,e)/8),o=[],s=[],l={},a=n?0:[],u=0;u<i+1;u++){var p=E.apply(0,t.concat(u/i));o.push({x:p.x,y:p.y,t:u/i})}for(u=0;u<r+1;u++)p=E.apply(0,e.concat(u/r)),s.push({x:p.x,y:p.y,t:u/r});for(u=0;u<i;u++)for(var h=0;h<r;h++){var f=o[u],d=o[u+1],y=s[h],m=s[h+1],v=c(d.x-f.x)<.001?"y":"x",g=c(m.x-y.x)<.001?"y":"x",P=A(f.x,f.y,d.x,d.y,y.x,y.y,m.x,m.y);if(P){if(l[P.x.toFixed(4)]==P.y.toFixed(4))continue;l[P.x.toFixed(4)]=P.y.toFixed(4);var x=f.t+c((P[v]-f[v])/(d[v]-f[v]))*(d.t-f.t),C=y.t+c((P[g]-y[g])/(m[g]-y[g]))*(m.t-y.t);x>=0&&x<=1&&C>=0&&C<=1&&(n?a++:a.push({x:P.x,y:P.y,t1:x,t2:C}))}}return a}function w(t,e,n){t=z(t),e=z(e);for(var i,r,o,s,l,a,u,p,h,f,d=n?0:[],c=0,y=t.length;c<y;c++){var m=t[c];if("M"==m[0])i=l=m[1],r=a=m[2];else{"C"==m[0]?(h=[i,r].concat(m.slice(1)),i=h[6],r=h[7]):(h=[i,r,i,r,l,a,l,a],i=l,r=a);for(var v=0,g=e.length;v<g;v++){var P=e[v];if("M"==P[0])o=u=P[1],s=p=P[2];else{"C"==P[0]?(f=[o,s].concat(P.slice(1)),o=f[6],s=f[7]):(f=[o,s,o,s,u,p,u,p],o=u,s=p);var x=F(h,f,n);if(n)d+=x;else{for(var C=0,_=x.length;C<_;C++)x[C].segment1=c,x[C].segment2=v,x[C].bez1=h,x[C].bez2=f;d=d.concat(x)}}}}}return d}function B(t){var e=y(t);if(e.bbox)return s(e.bbox);if(!t)return m();for(var n,i=0,r=0,o=[],l=[],a=0,u=(t=z(t)).length;a<u;a++)if("M"==(n=t[a])[0])i=n[1],r=n[2],o.push(i),l.push(r);else{var p=q(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);o=o.concat(p.min.x,p.max.x),l=l.concat(p.min.y,p.max.y),i=n[5],r=n[6]}var d=h.apply(0,o),c=h.apply(0,l),v=m(d,c,f.apply(0,o)-d,f.apply(0,l)-c);return e.bbox=s(v),v}function O(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=v,o}function X(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var o=Math.PI/180,s=t+n*Math.cos(-i*o),l=t+n*Math.cos(-r*o),a=[["M",s,e+n*Math.sin(-i*o)],["A",n,n,0,+(r-i>180),0,l,e+n*Math.sin(-r*o)]];else a=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return a.toString=v,a}var Y=t._unit2px,D={path:function(t){return t.attr("path")},circle:function(t){var e=Y(t);return X(e.cx,e.cy,e.r)},ellipse:function(t){var e=Y(t);return X(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=Y(t);return O(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=Y(t);return O(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return O(e.x,e.y,e.width,e.height)}};function M(e){var n=y(e);if(n.abs)return g(n.abs);if(o(e,"array")&&o(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var i,r=[],s=0,l=0,a=0,u=0,p=0;"M"==e[0][0]&&(a=s=+e[0][1],u=l=+e[0][2],p++,r[0]=["M",s,l]);for(var h,f,d=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),c=p,m=e.length;c<m;c++){if(r.push(h=[]),(i=(f=e[c])[0])!=i.toUpperCase())switch(h[0]=i.toUpperCase(),h[0]){case"A":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+f[6]+s,h[7]=+f[7]+l;break;case"V":h[1]=+f[1]+l;break;case"H":h[1]=+f[1]+s;break;case"R":for(var P=[s,l].concat(f.slice(1)),x=2,C=P.length;x<C;x++)P[x]=+P[x]+s,P[++x]=+P[x]+l;r.pop(),r=r.concat(j(P,d));break;case"O":r.pop(),(P=X(s,l,f[1],f[2])).push(P[0]),r=r.concat(P);break;case"U":r.pop(),r=r.concat(X(s,l,f[1],f[2],f[3])),h=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+f[1]+s,u=+f[2]+l;default:for(x=1,C=f.length;x<C;x++)h[x]=+f[x]+(x%2?s:l)}else if("R"==i)P=[s,l].concat(f.slice(1)),r.pop(),r=r.concat(j(P,d)),h=["R"].concat(f.slice(-2));else if("O"==i)r.pop(),(P=X(s,l,f[1],f[2])).push(P[0]),r=r.concat(P);else if("U"==i)r.pop(),r=r.concat(X(s,l,f[1],f[2],f[3])),h=["U"].concat(r[r.length-1].slice(-2));else for(var _=0,I=f.length;_<I;_++)h[_]=f[_];if("O"!=(i=i.toUpperCase()))switch(h[0]){case"Z":s=+a,l=+u;break;case"H":s=h[1];break;case"V":l=h[1];break;case"M":a=h[h.length-2],u=h[h.length-1];default:s=h[h.length-2],l=h[h.length-1]}}return r.toString=v,n.abs=g(r),r}function R(t,e,n,i){return[t,e,n,i,n,i]}function W(t,e,n,i,r,o){var s=1/3,l=2/3;return[s*t+l*n,s*e+l*i,s*r+l*n,s*o+l*i,r,o]}function k(e,n,i,r,o,s,l,a,h,f){var d,y=120*p/180,m=p/180*(+o||0),v=[],g=t._.cacher((function(t,e,n){return{x:t*u.cos(n)-e*u.sin(n),y:t*u.sin(n)+e*u.cos(n)}}));if(!i||!r)return[e,n,a,h,a,h];if(f)L=f[0],S=f[1],b=f[2],T=f[3];else{e=(d=g(e,n,-m)).x,n=d.y,a=(d=g(a,h,-m)).x,h=d.y,u.cos(p/180*o),u.sin(p/180*o);var P=(e-a)/2,x=(n-h)/2,C=P*P/(i*i)+x*x/(r*r);C>1&&(i*=C=u.sqrt(C),r*=C);var _=i*i,I=r*r,E=(s==l?-1:1)*u.sqrt(c((_*I-_*x*x-I*P*P)/(_*x*x+I*P*P))),b=E*i*x/r+(e+a)/2,T=E*-r*P/i+(n+h)/2,L=u.asin(((n-T)/r).toFixed(9)),S=u.asin(((h-T)/r).toFixed(9));(L=e<b?p-L:L)<0&&(L=2*p+L),(S=a<b?p-S:S)<0&&(S=2*p+S),l&&L>S&&(L-=2*p),!l&&S>L&&(S-=2*p)}var N=S-L;if(c(N)>y){var A=S,F=a,w=h;S=L+y*(l&&S>L?1:-1),v=k(a=b+i*u.cos(S),h=T+r*u.sin(S),i,r,o,0,l,F,w,[S,A,b,T])}N=S-L;var B=u.cos(L),O=u.sin(L),X=u.cos(S),Y=u.sin(S),D=u.tan(N/4),M=4/3*i*D,R=4/3*r*D,W=[e,n],q=[e+M*O,n-R*B],z=[a+M*Y,h-R*X],j=[a,h];if(q[0]=2*W[0]-q[0],q[1]=2*W[1]-q[1],f)return[q,z,j].concat(v);for(var Z=[],G=0,U=(v=[q,z,j].concat(v).join().split(",")).length;G<U;G++)Z[G]=G%2?g(v[G-1],v[G],m).y:g(v[G],v[G+1],m).x;return Z}function q(t,e,n,i,r,o,s,l){for(var a,p,d,y,m,v,g,P,x=[],C=[[],[]],_=0;_<2;++_)if(0==_?(p=6*t-12*n+6*r,a=-3*t+9*n-9*r+3*s,d=3*n-3*t):(p=6*e-12*i+6*o,a=-3*e+9*i-9*o+3*l,d=3*i-3*e),c(a)<1e-12){if(c(p)<1e-12)continue;0<(y=-d/p)&&y<1&&x.push(y)}else g=p*p-4*d*a,P=u.sqrt(g),g<0||(0<(m=(-p+P)/(2*a))&&m<1&&x.push(m),0<(v=(-p-P)/(2*a))&&v<1&&x.push(v));for(var I,E=x.length,b=E;E--;)I=1-(y=x[E]),C[0][E]=I*I*I*t+3*I*I*y*n+3*I*y*y*r+y*y*y*s,C[1][E]=I*I*I*e+3*I*I*y*i+3*I*y*y*o+y*y*y*l;return C[0][b]=t,C[1][b]=e,C[0][b+1]=s,C[1][b+1]=l,C[0].length=C[1].length=b+2,{min:{x:h.apply(0,C[0]),y:h.apply(0,C[1])},max:{x:f.apply(0,C[0]),y:f.apply(0,C[1])}}}function z(t,e){var n=!e&&y(t);if(!e&&n.curve)return g(n.curve);for(var i=M(t),r=e&&M(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(k.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(W(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(W(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(R(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(R(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(R(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(R(e.x,e.y,e.X,e.Y))}return t},u=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)h[e]="A",r&&(d[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),P=f(i.length,r&&r.length||0)}},p=function(t,e,n,o,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],P=f(i.length,r&&r.length||0))},h=[],d=[],c="",m="",v=0,P=f(i.length,r&&r.length||0);v<P;v++){i[v]&&(c=i[v][0]),"C"!=c&&(h[v]=c,v&&(m=h[v-1])),i[v]=l(i[v],o,m),"A"!=h[v]&&"C"==c&&(h[v]="C"),u(i,v),r&&(r[v]&&(c=r[v][0]),"C"!=c&&(d[v]=c,v&&(m=d[v-1])),r[v]=l(r[v],s,m),"A"!=d[v]&&"C"==c&&(d[v]="C"),u(r,v)),p(i,r,o,s,v),p(r,i,s,o,v);var x=i[v],C=r&&r[v],_=x.length,I=r&&C.length;o.x=x[_-2],o.y=x[_-1],o.bx=a(x[_-4])||o.x,o.by=a(x[_-3])||o.y,s.bx=r&&(a(C[I-4])||s.x),s.by=r&&(a(C[I-3])||s.y),s.x=r&&C[I-2],s.y=r&&C[I-1]}return r||(n.curve=g(i)),r?[i,r]:i}function j(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}t.path=y,t.path.getTotalLength=C,t.path.getPointAtLength=_,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return I(t,e).end;var i=I(t,n,1);return e?I(i,e).end:i},r.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},r.getPointAtLength=function(t){return _(this.attr("d"),t)},r.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=m,t.path.findDotsAtSegment=E,t.path.bezierBBox=b,t.path.isPointInsideBBox=T,t.closest=function(e,n,i,r){for(var o=100,s=m(e-o/2,n-o/2,o,o),l=[],a=i[0].hasOwnProperty("x")?function(t){return{x:i[t].x,y:i[t].y}}:function(t){return{x:i[t],y:r[t]}},u=0;o<=1e6&&!u;){for(var p=0,h=i.length;p<h;p++){var f=a(p);if(T(s,f.x,f.y)){u++,l.push(f);break}}u||(s=m(e-(o*=2)/2,n-o/2,o,o))}if(1e6!=o){var d,c=1/0;for(p=0,h=l.length;p<h;p++){var y=t.len(e,n,l[p].x,l[p].y);c>y&&(c=y,l[p].len=y,d=l[p])}return d}},t.path.isBBoxIntersect=L,t.path.intersection=function(t,e){return w(t,e)},t.path.intersectionNumber=function(t,e){return w(t,e,1)},t.path.isPointInside=function(t,e,n){var i=B(t);return T(i,e,n)&&w(t,[["M",e,n],["H",i.x2+10]],1)%2==1},t.path.getBBox=B,t.path.get=D,t.path.toRelative=function(e){var n=y(e),i=String.prototype.toLowerCase;if(n.rel)return g(n.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var r=[],o=0,s=0,l=0,a=0,u=0;"M"==e[0][0]&&(l=o=e[0][1],a=s=e[0][2],u++,r.push(["M",o,s]));for(var p=u,h=e.length;p<h;p++){var f=r[p]=[],d=e[p];if(d[0]!=i.call(d[0]))switch(f[0]=i.call(d[0]),f[0]){case"a":f[1]=d[1],f[2]=d[2],f[3]=d[3],f[4]=d[4],f[5]=d[5],f[6]=+(d[6]-o).toFixed(3),f[7]=+(d[7]-s).toFixed(3);break;case"v":f[1]=+(d[1]-s).toFixed(3);break;case"m":l=d[1],a=d[2];default:for(var c=1,m=d.length;c<m;c++)f[c]=+(d[c]-(c%2?o:s)).toFixed(3)}else{f=r[p]=[],"m"==d[0]&&(l=d[1]+o,a=d[2]+s);for(var P=0,x=d.length;P<x;P++)r[p][P]=d[P]}var C=r[p].length;switch(r[p][0]){case"z":o=l,s=a;break;case"h":o+=+r[p][C-1];break;case"v":s+=+r[p][C-1];break;default:o+=+r[p][C-2],s+=+r[p][C-1]}}return r.toString=v,n.rel=g(r),r},t.path.toAbsolute=M,t.path.toCubic=z,t.path.map=function(t,e){if(!e)return t;var n,i,r,o,s,l,a;for(r=0,s=(t=z(t)).length;r<s;r++)for(o=1,l=(a=t[r]).length;o<l;o+=2)n=e.x(a[o],a[o+1]),i=e.y(a[o],a[o+1]),a[o]=n,a[o+1]=i;return t},t.path.toString=v,t.path.clone=g})),r.plugin((function(t,e,n,r){var o=Math.max,s=Math.min,l=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},a=l.prototype;a.push=function(){for(var t,e,n=0,i=arguments.length;n<i;n++)(t=arguments[n])&&(this[e=this.items.length]=this.items[e]=t,this.length++);return this},a.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},a.forEach=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(!1===t.call(e,this.items[n],n))return this;return this},a.animate=function(e,n,r,o){"function"!=typeof r||r.length||(o=r,r=i.linear),e instanceof t._.Animation&&(o=e.callback,r=e.easing,n=r.dur,e=e.attr);var s=arguments;if(t.is(e,"array")&&t.is(s[s.length-1],"array"))var l=!0;var a,u=function(){a?this.b=a:a=this.b},p=0,h=this,f=o&&function(){++p==h.length&&o.call(this)};return this.forEach((function(t,i){eve.once("snap.animcreated."+t.id,u),l?s[i]&&t.animate.apply(t,s[i]):t.animate(e,n,r,f)}))},a.remove=function(){for(;this.length;)this.pop().remove();return this},a.bind=function(t,e,n){var i={};if("function"==typeof e)this.bindings[t]=e;else{var r=n||t;this.bindings[t]=function(t){i[r]=t,e.attr(i)}}return this},a.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var i=0,r=this.items.length;i<r;i++)this.items[i].attr(e);return this},a.clear=function(){for(;this.length;)this.pop()},a.splice=function(t,e,n){t=t<0?o(this.length+t,0):t,e=o(0,s(this.length-t,e));var i,r=[],a=[],u=[];for(i=2;i<arguments.length;i++)u.push(arguments[i]);for(i=0;i<e;i++)a.push(this[t+i]);for(;i<this.length-t;i++)r.push(this[t+i]);var p=u.length;for(i=0;i<p+r.length;i++)this.items[t+i]=this[t+i]=i<p?u[i]:r[i-p];for(i=this.items.length=this.length-=e-p;this[i];)delete this[i++];return new l(a)},a.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},a.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},a.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var l=this.items[r].getBBox();t.push(l.x),e.push(l.y),n.push(l.x+l.width),i.push(l.y+l.height)}return{x:t=s.apply(0,t),y:e=s.apply(0,e),x2:n=o.apply(0,n),y2:i=o.apply(0,i),width:n-t,height:i-e,cx:t+(n-t)/2,cy:e+(i-e)/2}},a.clone=function(t){t=new l;for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},a.toString=function(){return"Snap‘s set"},a.type="set",t.Set=l,t.set=function(){var t=new l;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}})),r.plugin((function(t,e,n,i){var r={},o=/[%a-z]+$/i,s=String;function l(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function a(t){return t}function u(t){return t.join(" ")}function p(e){return t.rgb(e[0],e[1],e[2],e[3])}function h(t){var e,n,i,r,o,s,l=0,a=[];for(e=0,n=t.length;e<n;e++){for(o="[",s=['"'+t[e][0]+'"'],i=1,r=t[e].length;i<r;i++)s[i]="val["+l+++"]";o+=s+"]",a[e]=o}return Function("val","return Snap.path.toString.call(["+a+"])")}function f(t){for(var e=[],n=0,i=t.length;n<i;n++)for(var r=1,o=t[n].length;r<o;r++)e.push(t[n][r]);return e}function d(t){return isFinite(t)}r.stroke=r.fill="colour",e.prototype.equal=function(t,e){return eve("snap.util.equal",this,t,e).firstDefined()},eve.on("snap.util.equal",(function(e,n){var i,c,y=s(this.attr(e)||""),m=this;if("colour"==r[e])return i=t.color(y),c=t.color(n),{from:[i.r,i.g,i.b,i.opacity],to:[c.r,c.g,c.b,c.opacity],f:p};if("viewBox"==e)return{from:i=this.attr(e).vb.split(" ").map(Number),to:c=n.split(" ").map(Number),f:u};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return"string"==typeof n&&(n=s(n).replace(/\.{3}|\u2026/g,y)),function(e,n,i){e=e||new t.Matrix,n=n||new t.Matrix,e=t.parseTransformString(e.toTransformString())||[],n=t.parseTransformString(n.toTransformString())||[];for(var r,o,s,a,u=Math.max(e.length,n.length),p=[],d=[],c=0;c<u;c++){if(s=e[c]||l(n[c]),a=n[c]||l(s),s[0]!=a[0]||"r"==s[0].toLowerCase()&&(s[2]!=a[2]||s[3]!=a[3])||"s"==s[0].toLowerCase()&&(s[3]!=a[3]||s[4]!=a[4])){e=t._.transform2matrix(e,i()),n=t._.transform2matrix(n,i()),p=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],d=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(p[c]=[],d[c]=[],r=0,o=Math.max(s.length,a.length);r<o;r++)r in s&&(p[c][r]=s[r]),r in a&&(d[c][r]=a[r])}return{from:f(p),to:f(d),f:h(p)}}(y=this.matrix,n=t._.rgTransform.test(n)?t._.transform2matrix(n,this.getBBox()):t._.transform2matrix(t._.svgTransform2string(n),this.getBBox()),(function(){return m.getBBox(1)}));if("d"==e||"path"==e)return{from:f((i=t.path.toCubic(y,n))[0]),to:f(i[1]),f:h(i[0])};if("points"==e)return{from:i=s(y).split(t._.separator),to:c=s(n).split(t._.separator),f:function(t){return t}};if(d(y)&&d(n))return{from:parseFloat(y),to:parseFloat(n),f:a};var v,g,P,x=y.match(o),C=s(n).match(o);return x&&(g=x,P=C,t.is(g,"array")&&t.is(P,"array")&&g.toString()==P.toString())?{from:parseFloat(y),to:parseFloat(n),f:(v=x,function(t){return+t.toFixed(3)+v})}:{from:this.asPX(e),to:this.asPX(e,n),f:a}}))})),r.plugin((function(t,e,n,i){for(var r=e.prototype,o=("createTouch"in i.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},a=function(t,e){var n="y"==t?"scrollTop":"scrollLeft",r=e&&e.node?e.node.ownerDocument:i.doc;return r[n in r.documentElement?"documentElement":"body"][n]},u=function(){return this.originalEvent.preventDefault()},p=function(){return this.originalEvent.stopPropagation()},h=function(t,e,n,i){var r=o&&l[e]?l[e]:e,s=function(r){var s=a("y",i),h=a("x",i);if(o&&l.hasOwnProperty(e))for(var f=0,d=r.targetTouches&&r.targetTouches.length;f<d;f++)if(r.targetTouches[f].target==t||t.contains(r.targetTouches[f].target)){var c=r;(r=r.targetTouches[f]).originalEvent=c,r.preventDefault=u,r.stopPropagation=p;break}var y=r.clientX+h,m=r.clientY+s;return n.call(i,r,y,m)};return e!==r&&t.addEventListener(e,s,!1),t.addEventListener(r,s,!1),function(){return e!==r&&t.removeEventListener(e,s,!1),t.removeEventListener(r,s,!1),!0}},f=[],d=function(t){for(var e,n=t.clientX,i=t.clientY,r=a("y"),s=a("x"),l=f.length;l--;){if(e=f[l],o){for(var u,p=t.touches&&t.touches.length;p--;)if((u=t.touches[p]).identifier==e.el._drag.id||e.el.node.contains(u.target)){n=u.clientX,i=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h=e.el.node;h.nextSibling,h.parentNode,h.style.display,n+=s,i+=r,eve("snap.drag.move."+e.el.id,e.move_scope||e.el,n-e.el._drag.x,i-e.el._drag.y,n,i,t)}},c=function(e){t.unmousemove(d).unmouseup(c);for(var n,i=f.length;i--;)(n=f[i]).el._drag={},eve("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,e),eve.off("snap.drag.*."+n.el.id);f=[]},y=s.length;y--;)!function(e){t[e]=r[e]=function(n,i){if(t.is(n,"function"))this.events=this.events||[],this.events.push({name:e,f:n,unbind:h(this.node||document,e,n,i||this)});else for(var r=0,o=this.events.length;r<o;r++)if(this.events[r].name==e)try{this.events[r].f.call(this)}catch(t){}return this},t["un"+e]=r["un"+e]=function(t){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==e&&(n[i].f==t||!t))return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(s[y]);r.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},r.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var m=[];r.drag=function(e,n,i,r,o,s){var l,a=this;if(!arguments.length)return a.drag((function(t,e){this.attr({transform:l+(l?"T":"t")+[t,e]})}),(function(){l=this.transform().local}));function u(l,u,p){(l.originalEvent||l).preventDefault(),a._drag.x=u,a._drag.y=p,a._drag.id=l.identifier,!f.length&&t.mousemove(d).mouseup(c),f.push({el:a,move_scope:r,start_scope:o,end_scope:s}),n&&eve.on("snap.drag.start."+a.id,n),e&&eve.on("snap.drag.move."+a.id,e),i&&eve.on("snap.drag.end."+a.id,i),eve("snap.drag.start."+a.id,o||r||a,u,p,l)}function p(t,e,n){eve("snap.draginit."+a.id,a,t,e,n)}return eve.on("snap.draginit."+a.id,u),a._drag={},m.push({el:a,start:u,init:p}),a.mousedown(p),a},r.undrag=function(){for(var e=m.length;e--;)m[e].el==this&&(this.unmousedown(m[e].init),m.splice(e,1),eve.unbind("snap.drag.*."+this.id),eve.unbind("snap.draginit."+this.id));return!m.length&&t.unmousemove(d).unmouseup(c),this}})),r.plugin((function(t,e,n,i){e.prototype;var r=n.prototype,o=/^\s*url\((.+)\)/,s=String,l=t._.$;t.filter={},r.filter=function(n){var i=this;"svg"!=i.type&&(i=i.paper);var r=t.parse(s(n)),o=t._.id(),a=(i.node.offsetWidth,i.node.offsetHeight,l("filter"));return l(a,{id:o,filterUnits:"userSpaceOnUse"}),a.appendChild(r.node),i.defs.appendChild(a),new e(a)},eve.on("snap.util.getattr.filter",(function(){eve.stop();var e=l(this.node,"filter");if(e){var n=s(e).match(o);return n&&t.select(n[1])}})),eve.on("snap.util.attr.filter",(function(n){if(n instanceof e&&"filter"==n.type){eve.stop();var i=n.node.id;i||(l(n.node,{id:n.id}),i=n.id),l(this.node,{filter:t.url(i)})}n&&"none"!=n||(eve.stop(),this.node.removeAttribute("filter"))})),t.filter.blur=function(e,n){null==e&&(e=2);var i=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,i,r,o){return null==o&&(null==r?(o=i,i=4,r="#000"):(o=r,r=i,i=4)),null==i&&(i=4),null==o&&(o=1),null==e&&(e=0,n=2),null==n&&(n=e),r=t.color(r),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:e,dy:n,blur:i,opacity:o})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}})),r.plugin((function(t,e,n,i,r){var o=t._.box,s=t.is,l=/^[^a-z]*([tbmlrc])/i,a=function(){return"T"+this.dx+","+this.dy};e.prototype.getAlign=function(t,e){null==e&&s(t,"string")&&(e=t,t=null);var n=(t=t||this.paper).getBBox?t.getBBox():o(t),i=this.getBBox(),r={};switch(e=(e=e&&e.match(l))?e[1].toLowerCase():"c"){case"t":r.dx=0,r.dy=n.y-i.y;break;case"b":r.dx=0,r.dy=n.y2-i.y2;break;case"m":r.dx=0,r.dy=n.cy-i.cy;break;case"l":r.dx=n.x-i.x,r.dy=0;break;case"r":r.dx=n.x2-i.x2,r.dy=0;break;default:r.dx=n.cx-i.cx,r.dy=0}return r.toString=a,r},e.prototype.align=function(t,e){return this.transform("..."+this.getAlign(t,e))}})),r.plugin((function(t,e,n,r,o){var s=e.prototype,l=t.is,a=String,u="hasOwnProperty";function p(t,e,n){return function(i){var r=i.slice(t,e);return 1==r.length&&(r=r[0]),n?n(r):r}}var h=function(t,e,n,r){"function"!=typeof n||n.length||(r=n,n=i.linear),this.attr=t,this.dur=e,n&&(this.easing=n),r&&(this.callback=r)};t._.Animation=h,t.animation=function(t,e,n,i){return new h(t,e,n,i)},s.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[u](n)&&function(t){e.push({anim:new h(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},t.animate=function(t,e,n,r,o,s){"function"!=typeof o||o.length||(s=o,o=i.linear);var l=i.time(),a=i(t,e,l,l+r,i.time,n,o);return s&&eve.once("mina.finish."+a.id,s),a},s.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;e<n;e++)t[e].stop();return this},s.animate=function(t,e,n,r){"function"!=typeof n||n.length||(r=n,n=i.linear),t instanceof h&&(r=t.callback,n=t.easing,e=t.dur,t=t.attr);var o,s,f,d,c=[],y=[],m={},v=this;for(var g in t)if(t[u](g)){v.equal?(o=(d=v.equal(g,a(t[g]))).from,s=d.to,f=d.f):(o=+v.attr(g),s=+t[g]);var P=l(o,"array")?o.length:1;m[g]=p(c.length,c.length+P,f),c=c.concat(o),y=y.concat(s)}var x=i.time(),C=i(c,y,x,x+e,i.time,(function(t){var e={};for(var n in m)m[u](n)&&(e[n]=m[n](t));v.attr(e)}),n);return v.anims[C.id]=C,C._attrs=t,C._callback=r,eve("snap.animcreated."+v.id,C),eve.once("mina.finish."+C.id,(function(){eve.off("mina.*."+C.id),delete v.anims[C.id],r&&r.call(v)})),eve.once("mina.stop."+C.id,(function(){eve.off("mina.*."+C.id),delete v.anims[C.id]})),v}})),r.plugin((function(t,e,n,i){function r(t){t=t.split(/(?=#)/);var e=new String(t[5]);return e[50]=t[0],e[100]=t[1],e[200]=t[2],e[300]=t[3],e[400]=t[4],e[500]=t[5],e[600]=t[6],e[700]=t[7],e[800]=t[8],e[900]=t[9],t[10]&&(e.A100=t[10],e.A200=t[11],e.A400=t[12],e.A700=t[13]),e}t.mui={},t.flat={},t.mui.red=r("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=r("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=r("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=r("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=r("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=r("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=r("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=r("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=r("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=r("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=r("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=r("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=r("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=r("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=r("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=r("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=r("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=r("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=r("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var e in t.mui)t.mui.hasOwnProperty(e)&&(window[e]=t.mui[e])}})),t.exports=r}},e={};function n(i){var r=e[i];if(void 0!==r){if(void 0!==r.error)throw r.error;return r.exports}var o=e[i]={exports:{}};try{t[i].call(o.exports,o,o.exports,n)}catch(t){throw o.error=t,t}return o.exports}(()=>{"use strict";var t=n(264);self.onmessage=e=>{const n=[];let{settings:i,opIndex:r,op:o,geometry:s,openGeometry:l,tabGeometry:a,documents:u}=e.data;const p=new Set,h=[];function f(t,e){return!t||!!e&&t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]}function d(e,i){let r=u.find((t=>t.id===i));r.rawPaths&&n.push((n=>{if(e)a=(0,t.G0)(a,(0,t.su)(r.rawPaths,r.transform2d));else if(f(o.filterFillColor,r.fillColor)&&f(o.filterStrokeColor,r.strokeColor)&&(p.add(r.id),!o.type.includes("Raster"))){let e=!1;for(let t of r.rawPaths)t.length>=4&&t[0]==t[t.length-2]&&t[1]==t[t.length-1]&&(e=!0);let n=(0,t.su)(r.rawPaths,r.transform2d);e?s=(0,t.dl)(s,n):o.filterFillColor||(l=l.concat(n))}n()})),"image"!==r.type||e||(p.add(r.id),h.push(r));for(let t of r.children)d(e,t)}for(let t of o.documents)d(!1,t);for(let t of o.tabDocuments)d(!0,t);let c=100/n.length;for(var y=0;n.length;)try{let t=n.shift();t&&t((()=>{postMessage({event:"onProgress",percent:parseInt(y+=c)})}))}catch(t){console.error(t),postMessage({event:"onError",message:"Something wrong has happened, sorry.",level:"error",error:t.toString()})}postMessage({event:"onDone",settings:i,opIndex:r,op:o,geometry:s,openGeometry:l,tabGeometry:a,filteredDocIds:p,docsWithImages:h}),self.close()}})()})();