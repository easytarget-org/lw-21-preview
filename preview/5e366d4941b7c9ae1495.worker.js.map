{"version":3,"file":"5e366d4941b7c9ae1495.worker.js","mappings":"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","sources":["webpack:///./lib/cam-gcode-lathe.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/make namespace object","webpack:///./lib/workers/cam-lathe.worker.js"],"sourcesContent":["// Copyright 2017 Todd Fleming\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n'use strict';\n\nclass GcodeGenerator {\n    constructor({ decimal, toolFeedUnits }) {\n        Object.assign(this, { decimal, toolFeedUnits });\n        if (toolFeedUnits === 'mm/s')\n            this.feedScale = 60;\n        else\n            this.feedScale = 1;\n        this.gcode = '';\n    }\n\n    getMotion(mode) {\n        if (this.motionMode === mode)\n            return '';\n        this.motionMode = mode;\n        return mode + ' ';\n    }\n\n    getFeed(f) {\n        let strF = (f * this.feedScale).toFixed(this.decimal);\n        let roundedF = Number(strF);\n        if (this.f === roundedF)\n            return '';\n        this.f = roundedF;\n        return 'F' + strF + ' ';\n    }\n\n    rapidZ(z) {\n        let strZ = z.toFixed(this.decimal);\n        let roundedZ = Number(strZ);\n        if (this.z === roundedZ)\n            return;\n        this.z = roundedZ;\n        this.gcode += this.getMotion('G0') + 'Z' + strZ + '\\n';\n    }\n\n    rapidXDia(xDia, backSide) {\n        if (!backSide)\n            xDia = -xDia;\n        let strX = (xDia / 2).toFixed(this.decimal);\n        let roundedX = Number(strX);\n        if (this.x === roundedX)\n            return;\n        this.x = roundedX;\n        this.gcode += this.getMotion('G0') + 'X' + strX + '\\n';\n    }\n\n    moveZ(z, f) {\n        let strZ = z.toFixed(this.decimal);\n        let roundedZ = Number(strZ);\n        if (this.z === roundedZ)\n            return;\n        this.z = roundedZ;\n        this.gcode += this.getMotion('G1') + this.getFeed(f) + 'Z' + strZ + '\\n';\n\n    }\n\n    moveXDia(xDia, backSide, f) {\n        if (!backSide)\n            xDia = -xDia;\n        let strX = (xDia / 2).toFixed(this.decimal);\n        let roundedX = Number(strX);\n        if (this.x === roundedX)\n            return;\n        this.x = roundedX;\n        this.gcode += this.getMotion('G1') + this.getFeed(f) + 'X' + strX + '\\n';\n    }\n}; // GcodeGenerator\n\nfunction latheConvFaceTurn(gen, showAlert, props) {\n    let {\n        latheToolBackSide, latheRapidToDiameter, latheRapidToZ, latheStartZ, latheRoughingFeed,\n        latheRoughingDepth, latheFinishFeed, latheFinishDepth, latheFinishExtraPasses, latheFace,\n        latheFaceEndDiameter, latheTurns, fluidOn, fluidOff } = props;\n\n    if (latheRapidToDiameter <= 0) return showAlert('latheRapidToDiameter <= 0', 'danger');\n    if (latheStartZ > latheRapidToZ) return showAlert('latheStartZ > latheRapidToZ', 'danger');\n    if (latheRoughingFeed <= 0) return showAlert('latheRoughingFeed <= 0', 'danger');\n    if (latheRoughingDepth <= 0) return showAlert('latheRoughingDepth <= 0', 'danger');\n    if (latheFinishFeed <= 0) return showAlert('latheFinishFeed <= 0', 'danger');\n    if (latheFinishDepth < 0) return showAlert('latheFinishDepth < 0', 'danger');\n    if (latheStartZ + latheFinishDepth > latheRapidToZ) return showAlert('latheStartZ + latheFinishDepth > latheRapidToZ', 'danger');\n    if (latheFinishExtraPasses < 0) return showAlert('latheFinishExtraPasses < 0', 'danger');\n    if (latheFace && latheFaceEndDiameter >= latheRapidToDiameter) return showAlert('latheFace && latheFaceEndDiameter >= latheRapidToDiameter', 'danger');\n    if (!latheFace && !latheTurns.length) return showAlert('!latheFace && !latheTurns.length', 'danger');\n\n    for (let i = 0; i < latheTurns.length; ++i) {\n        if (latheTurns[i].startDiameter < 0) return showAlert('i=' + i + ': latheTurns[i].startDiameter < 0');\n        if (i > 0 && latheTurns[i].startDiameter < latheTurns[i - 1].endDiameter) return showAlert('i=' + i + ': i > 0 && latheTurns[i].startDiameter < latheTurns[i - 1].endDiameter');\n        if (latheTurns[i].startDiameter >= latheRapidToDiameter) return showAlert('i=' + i + ': latheTurns[i].startDiameter >= latheRapidToDiameter');\n        if (latheTurns[i].endDiameter <= 0) return showAlert('i=' + i + ': latheTurns[i].endDiameter <= 0');\n        if (latheTurns[i].endDiameter < latheTurns[i].startDiameter) return showAlert('i=' + i + ': latheTurns[i].endDiameter < latheTurns[i].startDiameter');\n        if (latheTurns[i].endDiameter + latheFinishDepth >= latheRapidToDiameter) return showAlert('i=' + i + ': latheTurns[i].endDiameter + latheFinishDepth >= latheRapidToDiameter');\n        if (latheTurns[i].endDiameter != latheTurns[i].startDiameter) return showAlert('i=' + i + ': latheTurns[i].endDiameter != latheTurns[i].startDiameter');\n        if (latheTurns[i].length <= 0) return showAlert('i=' + i + ': latheTurns[i].length <= 0');\n    }\n\n    gen.gcode +=\n        '\\r\\n; latheToolBackSide:       ' + latheToolBackSide +\n        '\\r\\n; latheRapidToDiameter:    ' + latheRapidToDiameter + ' mm' +\n        '\\r\\n; latheRapidToZ:           ' + latheRapidToZ + ' mm' +\n        '\\r\\n; latheStartZ:             ' + latheStartZ + ' mm' +\n        '\\r\\n; latheRoughingFeed:       ' + latheRoughingFeed + gen.toolFeedUnits +\n        '\\r\\n; latheRoughingDepth:      ' + latheRoughingDepth + ' mm' +\n        '\\r\\n; latheFinishFeed:         ' + latheFinishFeed + gen.toolFeedUnits +\n        '\\r\\n; latheFinishDepth:        ' + latheFinishDepth + ' mm' +\n        '\\r\\n; latheFinishExtraPasses:  ' + latheFinishExtraPasses +\n        '\\r\\n; latheFace:               ' + latheFace +\n        '\\r\\n; latheFaceEndDiameter:    ' + latheFaceEndDiameter + ' mm' +\n        '\\r\\n; Fluid:                   ';\n\n    if (fluidOn || fluidOff) {\n            gen.gcode += 'true';\n        } else {\n            gen.gcode += 'false';\n        };\n    gen.gcode += '';\n\n    if (latheTurns.length) {\n        gen.gcode += '\\r\\n; turns:';\n        for (let turn of latheTurns)\n            gen.gcode +=\n                '\\r\\n;     startDiameter:       ' + turn.startDiameter + ' mm' +\n                '\\r\\n;     endDiameter:         ' + turn.endDiameter + ' mm' +\n                '\\r\\n;     length:              ' + turn.length + ' mm' +\n                '';\n    }\n\n    gen.gcode += '\\n\\n; Rapid\\n';\n    gen.rapidXDia(latheRapidToDiameter, latheToolBackSide);\n    gen.rapidZ(latheRapidToZ);\n\n    if (latheFace) {\n        gen.gcode += '\\n; Face roughing\\n';\n        if (fluidOn) gen.gcode += `${fluidOn}; Enable Fluid assist\\n`;\n        let z = latheRapidToZ;\n        while (true) {\n            let nextZ = Math.max(z - latheRoughingDepth, latheStartZ + latheFinishDepth);\n            if (nextZ === z)\n                break;\n            z = nextZ;\n            gen.moveZ(z, latheRoughingFeed);\n            gen.moveXDia(latheFaceEndDiameter, latheToolBackSide, latheRoughingFeed);\n            gen.moveZ(Math.min(z + latheRoughingDepth, latheRapidToZ), latheRoughingFeed);\n            gen.rapidXDia(latheRapidToDiameter, latheToolBackSide);\n        }\n        gen.gcode += '\\n; Face finishing\\n';\n        let n = latheFinishExtraPasses;\n        if (z > latheStartZ) {\n            ++n;\n            z = latheStartZ;\n        }\n        for (let i = 0; i < n; ++i) {\n            gen.moveZ(z, latheFinishFeed);\n            gen.moveXDia(latheFaceEndDiameter, latheToolBackSide, latheFinishFeed);\n            gen.moveZ(Math.min(z + latheRoughingDepth, latheRapidToZ), latheFinishFeed);\n            gen.rapidXDia(latheRapidToDiameter, latheToolBackSide);\n        }\n        latheRapidToZ = Math.min(z + latheRoughingDepth, latheRapidToZ);\n        if (fluidOff) gen.gcode += `${fluidOff}; Disable Fluid assist\\n`;\n        gen.rapidZ(latheRapidToZ);\n    }\n\n    if (latheTurns.length) {\n        gen.gcode += '\\n; Turn roughing\\n';\n        if (fluidOn) gen.gcode += `${fluidOn}; Enable Fluid assist\\n`;\n        let turnRapidToDiameter = latheRapidToDiameter;\n        let startX = turnRapidToDiameter - latheRoughingDepth;\n        while (true) {\n            let x = startX;\n            let z = latheRapidToZ;\n            let turnStartZ = latheStartZ + latheFinishDepth;\n            let done = false;\n            for (let turn of latheTurns) {\n                if (x < turn.startDiameter + latheFinishDepth && turn.startDiameter + latheFinishDepth < startX + latheRoughingDepth)\n                    x = turn.startDiameter + latheFinishDepth;\n                if (x < turn.startDiameter + latheFinishDepth) {\n                    if (turn === latheTurns[0]) {\n                        done = true;\n                        break;\n                    }\n                    gen.moveXDia(x, latheToolBackSide, latheRoughingFeed);\n                    z = turnStartZ;\n                    gen.moveZ(z, latheRoughingFeed);\n                    gen.moveXDia(Math.min(x + latheRoughingDepth, turnRapidToDiameter), latheToolBackSide, latheRoughingFeed);\n                    break;\n                } else {\n                    gen.moveXDia(x, latheToolBackSide, latheRoughingFeed);\n                    z = turnStartZ - turn.length;\n                    gen.moveZ(z, latheRoughingFeed);\n                }\n                turnStartZ -= turn.length;\n            }\n            if (done)\n                break;\n            turnRapidToDiameter = Math.min(turnRapidToDiameter, x + latheRoughingDepth);\n            startX -= latheRoughingDepth;\n            gen.moveXDia(turnRapidToDiameter, latheToolBackSide, latheRoughingFeed);\n            gen.rapidZ(latheRapidToZ);\n        }\n\n        gen.gcode += '\\n; Turn finishing\\n';\n        gen.rapidXDia(latheTurns[0].startDiameter, latheToolBackSide);\n        let z = latheStartZ;\n        for (let turn of latheTurns) {\n            gen.moveXDia(turn.startDiameter, latheToolBackSide, latheFinishFeed);\n            z -= turn.length;\n            gen.moveZ(z, latheFinishFeed);\n        }\n        gen.moveXDia(latheRapidToDiameter, latheToolBackSide, latheFinishFeed);\n        if (fluidOff) gen.gcode += `${fluidOff}; Disable Fluid assist\\n`;\n        gen.rapidZ(latheRapidToZ);\n    } // if(latheTurns.length)\n\n    gen.gcode += '\\n';\n} // latheConvFaceTurn\n\nexport function getLatheGcodeFromOp(settings, opIndex, op, geometry, openGeometry, tabGeometry, showAlert, done, progress) {\n    let gen = new GcodeGenerator({ ...settings, decimal: 2 });\n    gen.gcode =\n        '\\r\\n;' +\n        '\\r\\n; Operation:               ' + opIndex +\n        '\\r\\n; Type:                    ' + op.type +\n        '';\n    if (op.hookOperationStart.length)\n        gen.gcode += op.hookOperationStart;\n    if (op.useFluid) {\n        op.fluidOn = settings.machineFluidGcodeOn;\n        op.fluidOff = settings.machineFluidGcodeOff;\n    }\n    if (op.type === 'Lathe Conv Face/Turn')\n        latheConvFaceTurn(gen, showAlert, op);\n    if (op.hookOperationEnd.length)\n        gen.gcode += op.hookOperationEnd;\n    done(gen.gcode)\n} // getLatheGcodeFromOp\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\tif (cachedModule.error !== undefined) throw cachedModule.error;\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\ttry {\n\t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\t} catch(e) {\n\t\tmodule.error = e;\n\t\tthrow e;\n\t}\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getLatheGcodeFromOp } from '../cam-gcode-lathe'\n\nonmessage = (event) => {\n    const { settings, opIndex, op, geometry = [], openGeometry = [], tabGeometry = [] } = event.data\n    const errors = [];\n\n    const showAlert = (message, level) => {\n        errors.push({ message, level })\n    };\n    const progress = () => {\n        postMessage(JSON.stringify({ event: \"onProgress\", gcode, errors }))\n    };\n    const done = (gcode) => {\n        if (gcode === false && errors.length) {\n            postMessage(JSON.stringify({ event: \"onError\", errors }))\n        } else {\n            postMessage(JSON.stringify({ event: \"onDone\", gcode }))\n        }\n    };\n\n    getLatheGcodeFromOp.apply(this, [settings, opIndex, op, geometry, openGeometry, tabGeometry, showAlert, done, progress])\n}\n"],"names":["getLatheGcodeFromOp","GcodeGenerator","constructor","decimal","toolFeedUnits","Object","assign","feedScale","gcode","getMotion","mode","motionMode","getFeed","f","strF","toFixed","roundedF","Number","rapidZ","z","strZ","roundedZ","rapidXDia","xDia","backSide","strX","roundedX","x","moveZ","moveXDia","latheConvFaceTurn","gen","showAlert","props","latheToolBackSide","latheRapidToDiameter","latheRapidToZ","latheStartZ","latheRoughingFeed","latheRoughingDepth","latheFinishFeed","latheFinishDepth","latheFinishExtraPasses","latheFace","latheFaceEndDiameter","latheTurns","fluidOn","fluidOff","length","i","startDiameter","endDiameter","turn","nextZ","Math","max","min","n","turnRapidToDiameter","startX","turnStartZ","done","settings","opIndex","op","geometry","openGeometry","tabGeometry","progress","type","hookOperationStart","useFluid","machineFluidGcodeOn","machineFluidGcodeOff","hookOperationEnd"],"sourceRoot":""}